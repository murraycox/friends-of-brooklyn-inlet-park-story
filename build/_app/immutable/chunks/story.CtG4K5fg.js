import{s as mt,e as $,a as q,c as L,b as N,f as _,g as W,q as m,r as Be,T as V,i as j,h as b,W as ye,n as He,C as hn,V as yt,t as vt,d as wt,j as _t,R as Y,S as U,U as Lt,y as Vn,z as Gn}from"./scheduler.BwjH7zTA.js";import{S as xt,i as bt,c as te,b as ne,m as re,t as ie,a as ae,d as oe}from"./index.BU9U6aD7.js";import{g as dn,b as ve}from"./entry.CTgrmfPf.js";function Se(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pt(e){let t;return{c(){t=vt(e[1])},l(n){t=wt(n,e[1])},m(n,r){j(n,t,r)},p(n,r){r&2&&_t(t,n[1])},d(n){n&&_(t)}}}function Rt(e){let t,n,r;return{c(){t=$("div"),n=$("span"),r=vt(e[2]),this.h()},l(i){t=L(i,"DIV",{class:!0});var a=N(t);n=L(a,"SPAN",{class:!0});var o=N(n);r=wt(o,e[2]),o.forEach(_),a.forEach(_),this.h()},h(){m(n,"class","svelte-1e4hxag"),m(t,"class","story-navigation-label svelte-1e4hxag")},m(i,a){j(i,t,a),b(t,n),b(n,r)},p(i,a){a&4&&_t(r,i[2])},d(i){i&&_(t)}}}function Xn(e){let t,n,r,i,a,o,s,l=e[1]&&Pt(e),u=e[2]&&Rt(e);return{c(){t=$("a"),n=$("div"),r=$("div"),l&&l.c(),i=q(),u&&u.c(),this.h()},l(c){t=L(c,"A",{class:!0});var f=N(t);n=L(f,"DIV",{class:!0});var h=N(n);r=L(h,"DIV",{class:!0});var p=N(r);l&&l.l(p),p.forEach(_),i=W(h),u&&u.l(h),h.forEach(_),f.forEach(_),this.h()},h(){m(r,"class","story-navigation-button svelte-1e4hxag"),m(n,"class",a=Be(`story-navigation-button-and-label era-${e[0]}`)+" svelte-1e4hxag"),V(n,"hover",e[4]),V(n,"active",e[3]),m(t,"class","svelte-1e4hxag")},m(c,f){j(c,t,f),b(t,n),b(n,r),l&&l.m(r,null),b(n,i),u&&u.m(n,null),o||(s=[ye(t,"click",e[10]),ye(t,"mouseleave",e[6])],o=!0)},p(c,[f]){c[1]?l?l.p(c,f):(l=Pt(c),l.c(),l.m(r,null)):l&&(l.d(1),l=null),c[2]?u?u.p(c,f):(u=Rt(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null),f&1&&a!==(a=Be(`story-navigation-button-and-label era-${c[0]}`)+" svelte-1e4hxag")&&m(n,"class",a),f&17&&V(n,"hover",c[4]),f&9&&V(n,"active",c[3])},i:He,o:He,d(c){c&&_(t),l&&l.d(),u&&u.d(),o=!1,hn(s)}}}function Yn(e,t,n){let{navigateToMap:r=null}=t,{navigateToPage:i=null}=t,{viewID:a=null}=t,{eraID:o=null}=t,{buttonText:s=null}=t,{labelText:l=null}=t,{active:u=!1}=t,c=!1;const f=yt();function h(g){console.log("NavErasButton:onClick()"),console.log(`NavErasButton:onClick(e.pointerType: ${g.pointerType})`),!l||g.pointerType=="mouse"||g.pointerType!="mouse"&&c?(console.log(`NavErasButton:dispatch: navigate, viewID: ${a}, eraID: ${o}`),f("navigate",{viewID:a||o,eraID:o})):g.pointerType!="mouse"&&!c&&n(4,c=!0)}function p(){console.log("NavErasButton:onMouseLeave()"),n(4,c=!1)}const d=g=>h(g);return e.$$set=g=>{"navigateToMap"in g&&n(7,r=g.navigateToMap),"navigateToPage"in g&&n(8,i=g.navigateToPage),"viewID"in g&&n(9,a=g.viewID),"eraID"in g&&n(0,o=g.eraID),"buttonText"in g&&n(1,s=g.buttonText),"labelText"in g&&n(2,l=g.labelText),"active"in g&&n(3,u=g.active)},[o,s,l,u,c,h,p,r,i,a,d]}class se extends xt{constructor(t){super(),bt(this,t,Yn,Xn,mt,{navigateToMap:7,navigateToPage:8,viewID:9,eraID:0,buttonText:1,labelText:2,active:3})}}function Un(e){let t,n,r,i,a,o,s,l,u,c,f,h,p;return n=new se({props:{viewID:"intro",buttonText:"Intro"}}),n.$on("navigate",e[1]),i=new se({props:{eraID:"pre-1600s",active:e[0]=="pre-1600s",labelText:"pre 1600s"}}),i.$on("navigate",e[1]),o=new se({props:{eraID:"early-european-settlement",active:e[0]=="early-european-settlement",labelText:"1620-1855"}}),o.$on("navigate",e[1]),l=new se({props:{eraID:"urban-industrial",active:e[0]=="urban-industrial",labelText:"1855-1950"}}),l.$on("navigate",e[1]),c=new se({props:{eraID:"migration",labelText:"1950-2005"}}),c.$on("navigate",e[1]),h=new se({props:{eraID:"activism-deindustrialization",labelText:"2005-Future"}}),h.$on("navigate",e[1]),{c(){t=$("div"),te(n.$$.fragment),r=q(),te(i.$$.fragment),a=q(),te(o.$$.fragment),s=q(),te(l.$$.fragment),u=q(),te(c.$$.fragment),f=q(),te(h.$$.fragment),this.h()},l(d){t=L(d,"DIV",{id:!0,class:!0});var g=N(t);ne(n.$$.fragment,g),r=W(g),ne(i.$$.fragment,g),a=W(g),ne(o.$$.fragment,g),s=W(g),ne(l.$$.fragment,g),u=W(g),ne(c.$$.fragment,g),f=W(g),ne(h.$$.fragment,g),g.forEach(_),this.h()},h(){m(t,"id","story-navigation"),m(t,"class","position-fixed svelte-2jdffa")},m(d,g){j(d,t,g),re(n,t,null),b(t,r),re(i,t,null),b(t,a),re(o,t,null),b(t,s),re(l,t,null),b(t,u),re(c,t,null),b(t,f),re(h,t,null),p=!0},p(d,[g]){const y={};g&1&&(y.active=d[0]=="pre-1600s"),i.$set(y);const x={};g&1&&(x.active=d[0]=="early-european-settlement"),o.$set(x);const M={};g&1&&(M.active=d[0]=="urban-industrial"),l.$set(M)},i(d){p||(ie(n.$$.fragment,d),ie(i.$$.fragment,d),ie(o.$$.fragment,d),ie(l.$$.fragment,d),ie(c.$$.fragment,d),ie(h.$$.fragment,d),p=!0)},o(d){ae(n.$$.fragment,d),ae(i.$$.fragment,d),ae(o.$$.fragment,d),ae(l.$$.fragment,d),ae(c.$$.fragment,d),ae(h.$$.fragment,d),p=!1},d(d){d&&_(t),oe(n),oe(i),oe(o),oe(l),oe(c),oe(h)}}}function Jn(e,t,n){let{navigateWithinMap:r=!0}=t,{activeEraID:i=null}=t;function a(l){console.log(`NavEras:navigate(event:${JSON.stringify(l.detail)})`),l.detail.viewID,n(0,i=l.detail.eraID)}const o=yt();function s(l){console.log(`NavEras:onNavigate(event: ${JSON.stringify(l)}`),r?o("navigate",l.detail):dn(`${ve==""?"/":ve}`)}return e.$$set=l=>{"navigateWithinMap"in l&&n(2,r=l.navigateWithinMap),"activeEraID"in l&&n(0,i=l.activeEraID)},[i,s,r,a]}class is extends xt{constructor(t){super(),bt(this,t,Jn,Un,mt,{navigateWithinMap:2,activeEraID:0,navigate:3})}get navigate(){return this.$$.ctx[3]}}function Re(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pn(e){let t,n,r;e.length!==2?(t=Re,n=(s,l)=>Re(e(s),l),r=(s,l)=>e(s)-l):(t=e===Re||e===Kn?e:Zn,n=e,r=e);function i(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function Zn(){return 0}function Qn(e){return e===null?NaN:+e}const jn=pn(Re),er=jn.right;pn(Qn).center;const tr=Math.sqrt(50),nr=Math.sqrt(10),rr=Math.sqrt(2);function qe(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=tr?10:a>=nr?5:a>=rr?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?qe(e,t,n*2):[s,l,u]}function ir(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?qe(t,e,n):qe(e,t,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function at(e,t,n){return t=+t,e=+e,n=+n,qe(e,t,n)[2]}function ar(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?at(t,e,n):at(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}var or={value:()=>{}};function gn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Fe(n)}function Fe(e){this._=e}function sr(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Fe.prototype=gn.prototype={constructor:Fe,on:function(e,t){var n=this._,r=sr(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=lr(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Ft(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ft(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Fe(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function lr(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ft(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=or,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ot="http://www.w3.org/1999/xhtml";const Ot={svg:"http://www.w3.org/2000/svg",xhtml:ot,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qe(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ot.hasOwnProperty(t)?{space:Ot[t],local:e}:e}function ur(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ot&&t.documentElement.namespaceURI===ot?t.createElement(e):t.createElementNS(n,e)}}function cr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function mn(e){var t=Qe(e);return(t.local?cr:ur)(t)}function fr(){}function kt(e){return e==null?fr:function(){return this.querySelector(e)}}function hr(e){typeof e!="function"&&(e=kt(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new I(r,this._parents)}function yn(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dr(){return[]}function vn(e){return e==null?dr:function(){return this.querySelectorAll(e)}}function pr(e){return function(){return yn(e.apply(this,arguments))}}function gr(e){typeof e=="function"?e=pr(e):e=vn(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new I(r,i)}function wn(e){return function(){return this.matches(e)}}function _n(e){return function(t){return t.matches(e)}}var mr=Array.prototype.find;function yr(e){return function(){return mr.call(this.children,e)}}function vr(){return this.firstElementChild}function wr(e){return this.select(e==null?vr:yr(typeof e=="function"?e:_n(e)))}var _r=Array.prototype.filter;function xr(){return Array.from(this.children)}function br(e){return function(){return _r.call(this.children,e)}}function kr(e){return this.selectAll(e==null?xr:br(typeof e=="function"?e:_n(e)))}function Mr(e){typeof e!="function"&&(e=wn(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new I(r,this._parents)}function xn(e){return new Array(e.length)}function Nr(){return new I(this._enter||this._groups.map(xn),this._parents)}function We(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}We.prototype={constructor:We,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Er(e){return function(){return e}}function Ar(e,t,n,r,i,a){for(var o=0,s,l=t.length,u=a.length;o<u;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new We(e,a[o]);for(;o<l;++o)(s=t[o])&&(i[o]=s)}function Ir(e,t,n,r,i,a,o){var s,l,u=new Map,c=t.length,f=a.length,h=new Array(c),p;for(s=0;s<c;++s)(l=t[s])&&(h[s]=p=o.call(l,l.__data__,s,t)+"",u.has(p)?i[s]=l:u.set(p,l));for(s=0;s<f;++s)p=o.call(e,a[s],s,a)+"",(l=u.get(p))?(r[s]=l,l.__data__=a[s],u.delete(p)):n[s]=new We(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(h[s])===l&&(i[s]=l)}function Tr(e){return e.__data__}function Sr(e,t){if(!arguments.length)return Array.from(this,Tr);var n=t?Ir:Ar,r=this._parents,i=this._groups;typeof e!="function"&&(e=Er(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],f=i[u],h=f.length,p=Dr(e.call(c,c&&c.__data__,u,r)),d=p.length,g=s[u]=new Array(d),y=o[u]=new Array(d),x=l[u]=new Array(h);n(c,f,g,y,x,p,t);for(var M=0,k=0,E,A;M<d;++M)if(E=g[M]){for(M>=k&&(k=M+1);!(A=y[k])&&++k<d;);E._next=A||null}}return o=new I(o,r),o._enter=s,o._exit=l,o}function Dr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cr(){return new I(this._exit||this._groups.map(xn),this._parents)}function $r(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Lr(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],f=u.length,h=s[l]=new Array(f),p,d=0;d<f;++d)(p=u[d]||c[d])&&(h[d]=p);for(;l<i;++l)s[l]=n[l];return new I(s,this._parents)}function Pr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Rr(e){e||(e=Fr);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new I(i,this._parents).order()}function Fr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Or(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zr(){return Array.from(this)}function Br(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Hr(){let e=0;for(const t of this)++e;return e}function qr(){return!this.node()}function Wr(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Vr(e){return function(){this.removeAttribute(e)}}function Gr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xr(e,t){return function(){this.setAttribute(e,t)}}function Yr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ur(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jr(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Kr(e,t){var n=Qe(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Gr:Vr:typeof t=="function"?n.local?Jr:Ur:n.local?Yr:Xr)(n,t))}function bn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zr(e){return function(){this.style.removeProperty(e)}}function Qr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jr(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ei(e,t,n){return arguments.length>1?this.each((t==null?Zr:typeof t=="function"?jr:Qr)(e,t,n??"")):fe(this.node(),e)}function fe(e,t){return e.style.getPropertyValue(t)||bn(e).getComputedStyle(e,null).getPropertyValue(t)}function ti(e){return function(){delete this[e]}}function ni(e,t){return function(){this[e]=t}}function ri(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ii(e,t){return arguments.length>1?this.each((t==null?ti:typeof t=="function"?ri:ni)(e,t)):this.node()[e]}function kn(e){return e.trim().split(/^|\s+/)}function Mt(e){return e.classList||new Mn(e)}function Mn(e){this._node=e,this._names=kn(e.getAttribute("class")||"")}Mn.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Nn(e,t){for(var n=Mt(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function En(e,t){for(var n=Mt(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ai(e){return function(){Nn(this,e)}}function oi(e){return function(){En(this,e)}}function si(e,t){return function(){(t.apply(this,arguments)?Nn:En)(this,e)}}function li(e,t){var n=kn(e+"");if(arguments.length<2){for(var r=Mt(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?si:t?ai:oi)(n,t))}function ui(){this.textContent=""}function ci(e){return function(){this.textContent=e}}function fi(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hi(e){return arguments.length?this.each(e==null?ui:(typeof e=="function"?fi:ci)(e)):this.node().textContent}function di(){this.innerHTML=""}function pi(e){return function(){this.innerHTML=e}}function gi(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mi(e){return arguments.length?this.each(e==null?di:(typeof e=="function"?gi:pi)(e)):this.node().innerHTML}function yi(){this.nextSibling&&this.parentNode.appendChild(this)}function vi(){return this.each(yi)}function wi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _i(){return this.each(wi)}function xi(e){var t=typeof e=="function"?e:mn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bi(){return null}function ki(e,t){var n=typeof e=="function"?e:mn(e),r=t==null?bi:typeof t=="function"?t:kt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Mi(){var e=this.parentNode;e&&e.removeChild(this)}function Ni(){return this.each(Mi)}function Ei(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ai(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ii(e){return this.select(e?Ai:Ei)}function Ti(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Si(e){return function(t){e.call(this,t,this.__data__)}}function Di(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ci(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function $i(e,t,n){return function(){var r=this.__on,i,a=Si(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Li(e,t,n){var r=Di(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?$i:Ci,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function An(e,t,n){var r=bn(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Pi(e,t){return function(){return An(this,e,t)}}function Ri(e,t){return function(){return An(this,e,t.apply(this,arguments))}}function Fi(e,t){return this.each((typeof t=="function"?Ri:Pi)(e,t))}function*Oi(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Nt=[null];function I(e,t){this._groups=e,this._parents=t}function Me(){return new I([[document.documentElement]],Nt)}function zi(){return this}I.prototype=Me.prototype={constructor:I,select:hr,selectAll:gr,selectChild:wr,selectChildren:kr,filter:Mr,data:Sr,enter:Nr,exit:Cr,join:$r,merge:Lr,selection:zi,order:Pr,sort:Rr,call:Or,nodes:zr,node:Br,size:Hr,empty:qr,each:Wr,attr:Kr,style:ei,property:ii,classed:li,text:hi,html:mi,raise:vi,lower:_i,append:xi,insert:ki,remove:Ni,clone:Ii,datum:Ti,on:Li,dispatch:Fi,[Symbol.iterator]:Oi};function Bi(e){return typeof e=="string"?new I([[document.querySelector(e)]],[document.documentElement]):new I([[e]],Nt)}function zt(e){return typeof e=="string"?new I([document.querySelectorAll(e)],[document.documentElement]):new I([yn(e)],Nt)}function Et(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function In(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ne(){}var xe=.7,Ve=1/xe,ce="\\s*([+-]?\\d+)\\s*",be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",R="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hi=/^#([0-9a-f]{3,8})$/,qi=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),Wi=new RegExp(`^rgb\\(${R},${R},${R}\\)$`),Vi=new RegExp(`^rgba\\(${ce},${ce},${ce},${be}\\)$`),Gi=new RegExp(`^rgba\\(${R},${R},${R},${be}\\)$`),Xi=new RegExp(`^hsl\\(${be},${R},${R}\\)$`),Yi=new RegExp(`^hsla\\(${be},${R},${R},${be}\\)$`),Bt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Et(Ne,Z,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ht,formatHex:Ht,formatHex8:Ui,formatHsl:Ji,formatRgb:qt,toString:qt});function Ht(){return this.rgb().formatHex()}function Ui(){return this.rgb().formatHex8()}function Ji(){return Tn(this).formatHsl()}function qt(){return this.rgb().formatRgb()}function Z(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hi.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Wt(t):n===3?new T(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?De(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?De(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qi.exec(e))?new T(t[1],t[2],t[3],1):(t=Wi.exec(e))?new T(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Vi.exec(e))?De(t[1],t[2],t[3],t[4]):(t=Gi.exec(e))?De(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xi.exec(e))?Xt(t[1],t[2]/100,t[3]/100,1):(t=Yi.exec(e))?Xt(t[1],t[2]/100,t[3]/100,t[4]):Bt.hasOwnProperty(e)?Wt(Bt[e]):e==="transparent"?new T(NaN,NaN,NaN,0):null}function Wt(e){return new T(e>>16&255,e>>8&255,e&255,1)}function De(e,t,n,r){return r<=0&&(e=t=n=NaN),new T(e,t,n,r)}function Ki(e){return e instanceof Ne||(e=Z(e)),e?(e=e.rgb(),new T(e.r,e.g,e.b,e.opacity)):new T}function st(e,t,n,r){return arguments.length===1?Ki(e):new T(e,t,n,r??1)}function T(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Et(T,st,In(Ne,{brighter(e){return e=e==null?Ve:Math.pow(Ve,e),new T(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xe:Math.pow(xe,e),new T(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new T(K(this.r),K(this.g),K(this.b),Ge(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vt,formatHex:Vt,formatHex8:Zi,formatRgb:Gt,toString:Gt}));function Vt(){return`#${J(this.r)}${J(this.g)}${J(this.b)}`}function Zi(){return`#${J(this.r)}${J(this.g)}${J(this.b)}${J((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gt(){const e=Ge(this.opacity);return`${e===1?"rgb(":"rgba("}${K(this.r)}, ${K(this.g)}, ${K(this.b)}${e===1?")":`, ${e})`}`}function Ge(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function K(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function J(e){return e=K(e),(e<16?"0":"")+e.toString(16)}function Xt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new C(e,t,n,r)}function Tn(e){if(e instanceof C)return new C(e.h,e.s,e.l,e.opacity);if(e instanceof Ne||(e=Z(e)),!e)return new C;if(e instanceof C)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new C(o,s,l,e.opacity)}function Qi(e,t,n,r){return arguments.length===1?Tn(e):new C(e,t,n,r??1)}function C(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Et(C,Qi,In(Ne,{brighter(e){return e=e==null?Ve:Math.pow(Ve,e),new C(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xe:Math.pow(xe,e),new C(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new T(rt(e>=240?e-240:e+120,i,r),rt(e,i,r),rt(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new C(Yt(this.h),Ce(this.s),Ce(this.l),Ge(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ge(this.opacity);return`${e===1?"hsl(":"hsla("}${Yt(this.h)}, ${Ce(this.s)*100}%, ${Ce(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yt(e){return e=(e||0)%360,e<0?e+360:e}function Ce(e){return Math.max(0,Math.min(1,e||0))}function rt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const At=e=>()=>e;function ji(e,t){return function(n){return e+n*t}}function ea(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ta(e){return(e=+e)==1?Sn:function(t,n){return n-t?ea(t,n,e):At(isNaN(t)?n:t)}}function Sn(e,t){var n=t-e;return n?ji(e,n):At(isNaN(e)?t:e)}const Xe=function e(t){var n=ta(t);function r(i,a){var o=n((i=st(i)).r,(a=st(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Sn(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function na(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function ra(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ia(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=It(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function aa(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function D(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oa(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=It(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var lt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,it=new RegExp(lt.source,"g");function sa(e){return function(){return e}}function la(e){return function(t){return e(t)+""}}function Dn(e,t){var n=lt.lastIndex=it.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=lt.exec(e))&&(i=it.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:D(r,i)})),n=it.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?la(l[0].x):sa(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function It(e,t){var n=typeof t,r;return t==null||n==="boolean"?At(t):(n==="number"?D:n==="string"?(r=Z(t))?(t=r,Xe):Dn:t instanceof Z?Xe:t instanceof Date?aa:ra(t)?na:Array.isArray(t)?ia:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oa:D)(e,t)}function ua(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Ut=180/Math.PI,ut={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cn(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ut,skewX:Math.atan(l)*Ut,scaleX:o,scaleY:s}}var $e;function ca(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ut:Cn(t.a,t.b,t.c,t.d,t.e,t.f)}function fa(e){return e==null||($e||($e=document.createElementNS("http://www.w3.org/2000/svg","g")),$e.setAttribute("transform",e),!(e=$e.transform.baseVal.consolidate()))?ut:(e=e.matrix,Cn(e.a,e.b,e.c,e.d,e.e,e.f))}function $n(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,f,h,p,d){if(u!==f||c!==h){var g=p.push("translate(",null,t,null,n);d.push({i:g-4,x:D(u,f)},{i:g-2,x:D(c,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function o(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:D(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:D(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,p,d){if(u!==f||c!==h){var g=p.push(i(p)+"scale(",null,",",null,")");d.push({i:g-4,x:D(u,f)},{i:g-2,x:D(c,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,f,h),o(u.rotate,c.rotate,f,h),s(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(p){for(var d=-1,g=h.length,y;++d<g;)f[(y=h[d]).i]=y.x(p);return f.join("")}}}var ha=$n(ca,"px, ","px)","deg)"),da=$n(fa,", ",")",")"),he=0,ge=0,pe=0,Ln=1e3,Ye,me,Ue=0,Q=0,je=0,ke=typeof performance=="object"&&performance.now?performance:Date,Pn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Tt(){return Q||(Pn(pa),Q=ke.now()+je)}function pa(){Q=0}function Je(){this._call=this._time=this._next=null}Je.prototype=Rn.prototype={constructor:Je,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Tt():+n)+(t==null?0:+t),!this._next&&me!==this&&(me?me._next=this:Ye=this,me=this),this._call=e,this._time=n,ct()},stop:function(){this._call&&(this._call=null,this._time=1/0,ct())}};function Rn(e,t,n){var r=new Je;return r.restart(e,t,n),r}function ga(){Tt(),++he;for(var e=Ye,t;e;)(t=Q-e._time)>=0&&e._call.call(void 0,t),e=e._next;--he}function Jt(){Q=(Ue=ke.now())+je,he=ge=0;try{ga()}finally{he=0,ya(),Q=0}}function ma(){var e=ke.now(),t=e-Ue;t>Ln&&(je-=t,Ue=e)}function ya(){for(var e,t=Ye,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ye=n);me=e,ct(r)}function ct(e){if(!he){ge&&(ge=clearTimeout(ge));var t=e-Q;t>24?(e<1/0&&(ge=setTimeout(Jt,e-ke.now()-je)),pe&&(pe=clearInterval(pe))):(pe||(Ue=ke.now(),pe=setInterval(ma,Ln)),he=1,Pn(Jt))}}function ft(e,t,n){var r=new Je;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var va=gn("start","end","cancel","interrupt"),wa=[],Fn=0,Kt=1,ht=2,Oe=3,Zt=4,dt=5,ze=6;function et(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;_a(e,n,{name:t,index:r,group:i,on:va,tween:wa,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Fn})}function St(e,t){var n=P(e,t);if(n.state>Fn)throw new Error("too late; already scheduled");return n}function F(e,t){var n=P(e,t);if(n.state>Oe)throw new Error("too late; already running");return n}function P(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _a(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Rn(a,0,n.time);function a(u){n.state=Kt,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,f,h,p;if(n.state!==Kt)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Oe)return ft(o);p.state===Zt?(p.state=ze,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=ze,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(ft(function(){n.state===Oe&&(n.state=Zt,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=ht,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ht){for(n.state=Oe,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=dt,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===dt&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ze,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function xa(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>ht&&r.state<dt,r.state=ze,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function ba(e){return this.each(function(){xa(this,e)})}function ka(e,t){var n,r;return function(){var i=F(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Ma(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=F(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function Na(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=P(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?ka:Ma)(n,e,t))}function Dt(e,t,n){var r=e._id;return e.each(function(){var i=F(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return P(i,r).value[t]}}function On(e,t){var n;return(typeof t=="number"?D:t instanceof Z?Xe:(n=Z(t))?(t=n,Xe):Dn)(e,t)}function Ea(e){return function(){this.removeAttribute(e)}}function Aa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ia(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function Ta(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function Sa(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function Da(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function Ca(e,t){var n=Qe(e),r=n==="transform"?da:On;return this.attrTween(e,typeof t=="function"?(n.local?Da:Sa)(n,r,Dt(this,"attr."+e,t)):t==null?(n.local?Aa:Ea)(n):(n.local?Ta:Ia)(n,r,t))}function $a(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function La(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Pa(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&La(e,a)),n}return i._value=t,i}function Ra(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&$a(e,a)),n}return i._value=t,i}function Fa(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Qe(e);return this.tween(n,(r.local?Pa:Ra)(r,t))}function Oa(e,t){return function(){St(this,e).delay=+t.apply(this,arguments)}}function za(e,t){return t=+t,function(){St(this,e).delay=t}}function Ba(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Oa:za)(t,e)):P(this.node(),t).delay}function Ha(e,t){return function(){F(this,e).duration=+t.apply(this,arguments)}}function qa(e,t){return t=+t,function(){F(this,e).duration=t}}function Wa(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ha:qa)(t,e)):P(this.node(),t).duration}function Va(e,t){if(typeof t!="function")throw new Error;return function(){F(this,e).ease=t}}function Ga(e){var t=this._id;return arguments.length?this.each(Va(t,e)):P(this.node(),t).ease}function Xa(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;F(this,e).ease=n}}function Ya(e){if(typeof e!="function")throw new Error;return this.each(Xa(this._id,e))}function Ua(e){typeof e!="function"&&(e=wn(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new B(r,this._parents,this._name,this._id)}function Ja(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=t[s],u=n[s],c=l.length,f=o[s]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;s<r;++s)o[s]=t[s];return new B(o,this._parents,this._name,this._id)}function Ka(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Za(e,t,n){var r,i,a=Ka(t)?St:F;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function Qa(e,t){var n=this._id;return arguments.length<2?P(this.node(),n).on.on(e):this.each(Za(n,e,t))}function ja(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function eo(){return this.on("end.remove",ja(this._id))}function to(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kt(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),c,f,h=0;h<l;++h)(c=s[h])&&(f=e.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,et(u[h],t,n,h,u,P(c,n)));return new B(a,this._parents,t,n)}function no(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vn(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=e.call(c,c.__data__,f,l),p,d=P(c,n),g=0,y=h.length;g<y;++g)(p=h[g])&&et(p,t,n,g,h,d);a.push(h),o.push(c)}return new B(a,o,t,n)}var ro=Me.prototype.constructor;function io(){return new ro(this._groups,this._parents)}function ao(e,t){var n,r,i;return function(){var a=fe(this,e),o=(this.style.removeProperty(e),fe(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function zn(e){return function(){this.style.removeProperty(e)}}function oo(e,t,n){var r,i=n+"",a;return function(){var o=fe(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function so(e,t,n){var r,i,a;return function(){var o=fe(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),fe(this,e))),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}function lo(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var l=F(this,e),u=l.on,c=l.value[a]==null?s||(s=zn(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function uo(e,t,n){var r=(e+="")=="transform"?ha:On;return t==null?this.styleTween(e,ao(e,r)).on("end.style."+e,zn(e)):typeof t=="function"?this.styleTween(e,so(e,r,Dt(this,"style."+e,t))).each(lo(this._id,e)):this.styleTween(e,oo(e,r,t),n).on("end.style."+e,null)}function co(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function fo(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&co(e,o,n)),r}return a._value=t,a}function ho(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,fo(e,t,n??""))}function po(e){return function(){this.textContent=e}}function go(e){return function(){var t=e(this);this.textContent=t??""}}function mo(e){return this.tween("text",typeof e=="function"?go(Dt(this,"text",e)):po(e==null?"":e+""))}function yo(e){return function(t){this.textContent=e.call(this,t)}}function vo(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&yo(i)),t}return r._value=e,r}function wo(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vo(e))}function _o(){for(var e=this._name,t=this._id,n=Bn(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=P(l,t);et(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new B(r,this._parents,e,n)}function xo(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=F(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&a()})}var bo=0;function B(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Bn(){return++bo}var z=Me.prototype;B.prototype={constructor:B,select:to,selectAll:no,selectChild:z.selectChild,selectChildren:z.selectChildren,filter:Ua,merge:Ja,selection:io,transition:_o,call:z.call,nodes:z.nodes,node:z.node,size:z.size,empty:z.empty,each:z.each,on:Qa,attr:Ca,attrTween:Fa,style:uo,styleTween:ho,text:mo,textTween:wo,remove:eo,tween:Na,delay:Ba,duration:Wa,ease:Ga,easeVarying:Ya,end:xo,[Symbol.iterator]:z[Symbol.iterator]};function as(e){return--e*e*e+1}function ko(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Mo={time:null,delay:0,duration:250,ease:ko};function No(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Eo(e){var t,n;e instanceof B?(t=e._id,e=e._name):(t=Bn(),(n=Mo).time=Tt(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&et(l,e,t,u,o,n||No(l,t));return new B(r,this._parents,e,t)}Me.prototype.interrupt=ba;Me.prototype.transition=Eo;function Ao(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ke(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function de(e){return e=Ke(Math.abs(e)),e?e[1]:NaN}function Io(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function To(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var So=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ze(e){if(!(t=So.exec(e)))throw new Error("invalid format: "+e);var t;return new Ct({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ze.prototype=Ct.prototype;function Ct(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ct.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Do(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Hn;function Co(e,t){var n=Ke(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Hn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ke(e,Math.max(0,t+a-1))[0]}function Qt(e,t){var n=Ke(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const jt={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ao,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Qt(e*100,t),r:Qt,s:Co,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function en(e){return e}var tn=Array.prototype.map,nn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $o(e){var t=e.grouping===void 0||e.thousands===void 0?en:Io(tn.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?en:To(tn.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ze(f);var h=f.fill,p=f.align,d=f.sign,g=f.symbol,y=f.zero,x=f.width,M=f.comma,k=f.precision,E=f.trim,A=f.type;A==="n"?(M=!0,A="g"):jt[A]||(k===void 0&&(k=12),E=!0,A="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var tt=g==="$"?n:g==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",nt=g==="$"?r:/[%p]/.test(A)?o:"",Ee=jt[A],v=/[defgprs%]/.test(A);k=k===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function H(w){var G=tt,S=nt,ee,$t,Ae;if(A==="c")S=Ee(w)+S,w="";else{w=+w;var Ie=w<0||1/w<0;if(w=isNaN(w)?l:Ee(Math.abs(w),k),E&&(w=Do(w)),Ie&&+w==0&&d!=="+"&&(Ie=!1),G=(Ie?d==="("?d:s:d==="-"||d==="("?"":d)+G,S=(A==="s"?nn[8+Hn/3]:"")+S+(Ie&&d==="("?")":""),v){for(ee=-1,$t=w.length;++ee<$t;)if(Ae=w.charCodeAt(ee),48>Ae||Ae>57){S=(Ae===46?i+w.slice(ee+1):w.slice(ee))+S,w=w.slice(0,ee);break}}}M&&!y&&(w=t(w,1/0));var Te=G.length+w.length+S.length,O=Te<x?new Array(x-Te+1).join(h):"";switch(M&&y&&(w=t(O+w,O.length?x-S.length:1/0),O=""),p){case"<":w=G+w+S+O;break;case"=":w=G+O+w+S;break;case"^":w=O.slice(0,Te=O.length>>1)+G+w+S+O.slice(Te);break;default:w=O+G+w+S;break}return a(w)}return H.toString=function(){return f+""},H}function c(f,h){var p=u((f=Ze(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(de(h)/3)))*3,g=Math.pow(10,-d),y=nn[8+d/3];return function(x){return p(g*x)+y}}return{format:u,formatPrefix:c}}var Le,qn,Wn;Lo({thousands:",",grouping:[3],currency:["$",""]});function Lo(e){return Le=$o(e),qn=Le.format,Wn=Le.formatPrefix,Le}function Po(e){return Math.max(0,-de(Math.abs(e)))}function Ro(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(de(t)/3)))*3-de(Math.abs(e)))}function Fo(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,de(t)-de(e))+1}function Oo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function zo(e){return function(){return e}}function Bo(e){return+e}var rn=[0,1];function le(e){return e}function pt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:zo(isNaN(t)?NaN:.5)}function Ho(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function qo(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=pt(i,r),a=n(o,a)):(r=pt(r,i),a=n(a,o)),function(s){return a(r(s))}}function Wo(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=pt(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var l=er(e,s,1,r)-1;return a[l](i[l](s))}}function Vo(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Go(){var e=rn,t=rn,n=It,r,i,a,o=le,s,l,u;function c(){var h=Math.min(e.length,t.length);return o!==le&&(o=Ho(e[0],e[h-1])),s=h>2?Wo:qo,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=s(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=s(t,e.map(r),D)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Bo),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=ua,c()},f.clamp=function(h){return arguments.length?(o=h?!0:le,c()):o!==le},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return r=h,i=p,c()}}function Xo(){return Go()(le,le)}function Yo(e,t,n,r){var i=ar(e,t,n),a;switch(r=Ze(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Ro(i,o))&&(r.precision=a),Wn(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Fo(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Po(i))&&(r.precision=a-(r.type==="%")*2);break}}return qn(r)}function Uo(e){var t=e.domain;return e.ticks=function(n){var r=t();return ir(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Yo(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=at(o,s,n),u===l)return r[i]=o,r[a]=s,t(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function gt(){var e=Xo();return e.copy=function(){return Vo(e,gt())},Oo.apply(e,arguments),Uo(e)}function ue(e,t,n){this.k=e,this.x=t,this.y=n}ue.prototype={constructor:ue,scale:function(e){return e===1?this:new ue(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ue(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var os=new ue(1,0,0);ue.prototype;new TextEncoder;function an(e,t,n){const r=e.slice();return r[22]=t[n],r[24]=n,r}function on(e,t,n){const r=e.slice();return r[22]=t[n],r[24]=n,r}function sn(e){let t,n,r=e[22].name+"",i,a,o,s,l;return{c(){t=$("div"),n=$("div"),i=vt(r),a=q(),this.h()},l(u){t=L(u,"DIV",{id:!0,class:!0,style:!0});var c=N(t);n=L(c,"DIV",{class:!0});var f=N(n);i=wt(f,r),f.forEach(_),a=W(c),c.forEach(_),this.h()},h(){m(n,"class","story-controller-timeline-era-title svelte-19wp3kf"),m(t,"id",o="title-"+e[22].id),m(t,"class",s=`timeline-title-container era-${e[22].type=="era"?e[22].id:e[22].eraID} svelte-19wp3kf`),m(t,"style",l=`left:${e[3](e[24])-fn/2}px`)},m(u,c){j(u,t,c),b(t,n),b(n,i),b(t,a)},p(u,c){c&4&&r!==(r=u[22].name+"")&&_t(i,r),c&4&&o!==(o="title-"+u[22].id)&&m(t,"id",o),c&4&&s!==(s=`timeline-title-container era-${u[22].type=="era"?u[22].id:u[22].eraID} svelte-19wp3kf`)&&m(t,"class",s),c&8&&l!==(l=`left:${u[3](u[24])-fn/2}px`)&&m(t,"style",l)},d(u){u&&_(t)}}}function ln(e){let t,n,r,i,a,o,s,l,u;function c(){return e[15](e[22])}function f(){return e[16](e[22])}function h(){return e[17](e[22])}return{c(){t=Y("g"),n=Y("circle"),a=Y("line"),this.h()},l(p){t=U(p,"g",{class:!0,transform:!0});var d=N(t);n=U(d,"circle",{cx:!0,cy:!0,r:!0,class:!0,"stroke-width":!0,stroke:!0}),N(n).forEach(_),a=U(d,"line",{class:!0,id:!0,x1:!0,y1:!0,x2:!0,y2:!0,"stroke-width":!0,stroke:!0}),N(a).forEach(_),d.forEach(_),this.h()},h(){m(n,"cx","0"),m(n,"cy",Pe),m(n,"r",r=e[22].type=="era"?cn:un),m(n,"class",i=Be(`era-${e[22].type=="era"?e[22].id:e[22].eraID}`)+" svelte-19wp3kf"),m(n,"stroke-width","1"),m(n,"stroke","grey"),V(n,"era",e[22].type=="era"),V(n,"chapter",e[22].type=="chapter"),m(a,"class","timeline-node-anchors svelte-19wp3kf"),m(a,"id",o=`anchor-${e[22].id}`),m(a,"x1","0"),m(a,"y1","0"),m(a,"x2","0"),m(a,"y2",Pe),m(a,"stroke-width","1"),m(a,"stroke","grey"),m(t,"class","timeline-era-and-chapter-group svelte-19wp3kf"),m(t,"transform",s=`translate(${e[3](e[24])},${we+X/2-Pe})`)},m(p,d){j(p,t,d),b(t,n),b(t,a),l||(u=[ye(n,"mouseover",c),ye(n,"mouseleave",f),ye(n,"click",h)],l=!0)},p(p,d){e=p,d&4&&r!==(r=e[22].type=="era"?cn:un)&&m(n,"r",r),d&4&&i!==(i=Be(`era-${e[22].type=="era"?e[22].id:e[22].eraID}`)+" svelte-19wp3kf")&&m(n,"class",i),d&4&&V(n,"era",e[22].type=="era"),d&4&&V(n,"chapter",e[22].type=="chapter"),d&4&&o!==(o=`anchor-${e[22].id}`)&&m(a,"id",o),d&8&&s!==(s=`translate(${e[3](e[24])},${we+X/2-Pe})`)&&m(t,"transform",s)},d(p){p&&_(t),l=!1,hn(u)}}}function Jo(e){let t,n,r,i,a,o,s,l,u,c=Se(e[2]),f=[];for(let d=0;d<c.length;d+=1)f[d]=sn(on(e,c,d));let h=Se(e[2]),p=[];for(let d=0;d<h.length;d+=1)p[d]=ln(an(e,h,d));return{c(){t=$("div"),n=$("div");for(let d=0;d<f.length;d+=1)f[d].c();r=q(),i=$("div"),a=Y("svg"),o=Y("g"),s=Y("rect"),l=Y("line");for(let d=0;d<p.length;d+=1)p[d].c();this.h()},l(d){t=L(d,"DIV",{id:!0,class:!0});var g=N(t);n=L(g,"DIV",{id:!0,class:!0});var y=N(n);for(let E=0;E<f.length;E+=1)f[E].l(y);y.forEach(_),r=W(g),i=L(g,"DIV",{id:!0,class:!0});var x=N(i);a=U(x,"svg",{width:!0,height:!0,class:!0});var M=N(a);o=U(M,"g",{class:!0});var k=N(o);s=U(k,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,rx:!0,ry:!0}),N(s).forEach(_),l=U(k,"line",{x1:!0,y1:!0,y2:!0,x2:!0,"stroke-width":!0,stroke:!0,class:!0}),N(l).forEach(_);for(let E=0;E<p.length;E+=1)p[E].l(k);k.forEach(_),M.forEach(_),x.forEach(_),g.forEach(_),this.h()},h(){m(n,"id","timeline-titles"),m(n,"class","svelte-19wp3kf"),m(s,"class","timeline-background svelte-19wp3kf"),m(s,"x","0"),m(s,"y",we),m(s,"height",X),m(s,"width",e[1]),m(s,"rx",X/2),m(s,"ry",X/2),m(l,"x1",_e),m(l,"y1",we+X/2),m(l,"y2",we+X/2),m(l,"x2",u=e[1]-_e),m(l,"stroke-width","1"),m(l,"stroke","grey"),m(l,"class","svelte-19wp3kf"),m(o,"class","svelte-19wp3kf"),m(a,"width","100%"),m(a,"height","100%"),m(a,"class","svelte-19wp3kf"),m(i,"id","timeline"),m(i,"class","svelte-19wp3kf"),m(t,"id","timeline-container"),m(t,"class","position-fixed svelte-19wp3kf")},m(d,g){j(d,t,g),b(t,n);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(n,null);b(t,r),b(t,i),b(i,a),b(a,o),b(o,s),b(o,l);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(o,null);e[18](o)},p(d,[g]){if(g&12){c=Se(d[2]);let y;for(y=0;y<c.length;y+=1){const x=on(d,c,y);f[y]?f[y].p(x,g):(f[y]=sn(x),f[y].c(),f[y].m(n,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=c.length}if(g&2&&m(s,"width",d[1]),g&2&&u!==(u=d[1]-_e)&&m(l,"x2",u),g&252){h=Se(d[2]);let y;for(y=0;y<h.length;y+=1){const x=an(d,h,y);p[y]?p[y].p(x,g):(p[y]=ln(x),p[y].c(),p[y].m(o,null))}for(;y<p.length;y+=1)p[y].d(1);p.length=h.length}},i:He,o:He,d(d){d&&_(t),Lt(f,d),Lt(p,d),e[18](null)}}}const X=45,we=85,Pe=20,un=4,cn=6,_e=25,fn=80;function Ko(e,t,n){let{eras:r}=t,{navigateWithinMap:i=!0}=t,{activeEraID:a=null}=t;function o(v){console.log("NavTimeline:onMapFeatureMouseOver(event:"+JSON.stringify(v.detail)+")"),y(v.detail.featureID)}function s(v){console.log("NavTimeline:onMapFeatureMouseOut(event:"+JSON.stringify(v.detail)+")"),x(v.detail.featureID)}function l(v){console.log("NavTimeline:onMapFeatureClick(event:"+JSON.stringify(v.detail)+")"),M(v.detail.featureID)}function u(v){console.log(`NavTimeline:onNavigate(event:${JSON.stringify(v.detail)})`),n(8,a=v.detail.eraID),g(),E()}const c=yt();let f,h,p=[],d=gt().domain([0,p.length-1]);Vn(()=>{console.log("NavTimeline:onMount"),E(),window.addEventListener("resize",E)});function g(){console.log(`NavTimeline:recalculateActiveChapters(activeEraID:${a})`),r&&(n(2,p=[]),Object.values(r).forEach(v=>{v.type="era",p.push(v),a&&v.id==a&&v.chapters&&Object.values(v.chapters).forEach(H=>{H.type="chapter",H.eraID=v.id,p.push(H)})}))}console.log(p.length),g();function y(v){console.log("NavTimeline:onMouseOver(id:"+JSON.stringify(v)+")"),zt("#title-"+v+", #anchor-"+v).classed("visible",!0),c("chapterMouseOver",{id:v})}function x(v){console.log("NavTimeline:onMouseLeave(id:"+JSON.stringify(v)+")"),ft(function(){zt("#title-"+v+", #anchor-"+v).classed("visible",!1)},100),c("chapterMouseLeave",{id:v})}function M(v){Object.values(r).forEach(H=>{Object.values(H.chapters).forEach(w=>{w.link&&w.id==v&&(window.location=ve+w.link)})})}function k(v){console.log(`NavTimeline:onEraClick(${v})`),i?c("navigate",{viewID:r[v].view,eraID:v}):dn(ve==""?"/":ve)}function E(){n(1,h=parseInt(Bi("#timeline").style("width"),10)),console.log(h),n(3,d=gt().domain([0,p.length-1]).range([_e,h-_e]))}const A=v=>y(v.id),tt=v=>x(v.id),nt=v=>{v.type=="chapter"?M(v.id):k(v.id,v.name)};function Ee(v){Gn[v?"unshift":"push"](()=>{f=v,n(0,f)})}return e.$$set=v=>{"eras"in v&&n(9,r=v.eras),"navigateWithinMap"in v&&n(10,i=v.navigateWithinMap),"activeEraID"in v&&n(8,a=v.activeEraID)},[f,h,p,d,y,x,M,k,a,r,i,o,s,l,u,A,tt,nt,Ee]}class ss extends xt{constructor(t){super(),bt(this,t,Ko,Jo,mt,{eras:9,navigateWithinMap:10,activeEraID:8,onMapFeatureMouseOver:11,onMapFeatureMouseOut:12,onMapFeatureClick:13,onNavigate:14})}get onMapFeatureMouseOver(){return this.$$.ctx[11]}get onMapFeatureMouseOut(){return this.$$.ctx[12]}get onMapFeatureClick(){return this.$$.ctx[13]}get onNavigate(){return this.$$.ctx[14]}}const ls={colorEraPre1600s:"#5199C7",colorEraEarlyEuropeanSettlement:"#70AC00",colorEraUrbanIndustrial:"#9762AF"},Zo="intro",Qo={"nyc-region-land":{id:"nyc-landline",type:"shapefile",url:"/gis/NYC_region_land_4326.geojson"},"nyc-historical-waterline":{id:"nyc-historical-waterline",type:"shapefile",url:"/gis/historical_water_polygons_final_4326.geojson"},"seventeenseventysix-shoreline":{id:"seventeenseventysix-shoreline",type:"shapefile",url:"/gis/1776_shoreline_polylines_4326.geojson"},pluto:{id:"pluto",type:"tile",urlPath:"/gis/pluto/",urlExtension:"png"},"indian-paths-kings-county":{id:"indian-paths-kings-county",type:"shapefile",url:"/gis/Indian_villages_ponds_paths_kings_cty_4326.geojson"},"indian-paths-ny":{id:"indian-paths-nyc",type:"shapefile",url:"/gis/Indian_paths_of_great_metropolis_NYC_bolton_1912_4326.geojson"},"oyster-historic-beds":{id:"oyster-historic-beds",type:"shapefile",url:"/gis/historic_oyster_beds_HEP.geojson"},"oyster-restoration-sites":{id:"oyster-restoration-sites",type:"shapefile",geometryType:"polygons",url:"/gis/recent_restoration_sites_oysters_2018_HEP.geojson"},"era-1-polys":{id:"era-1-polys",type:"shapefile",geometryType:"polygons",url:"/gis/era_1_polys_4326.geojson"},"era-1-lines-the-strand":{id:"era-1-lines-the-strand",type:"shapefile",geometryType:"polygons",url:"/gis/era_1_lines_the_strand_4326.geojson"},"bip-lots":{id:"bip-lots",type:"shapefile",url:"/gis/BIP_FinalLots.geojson",interactive:!1},"era3-story-polygons":{id:"era3-story-polygons",type:"shapefile",url:"/gis/era_3_1855-1950s_story_polys_sorted.geojson",interactive:!0},"fbip-labels":{id:"fbip-labels",type:"label",path:"/gis/fbip_labels.geojson",interactive:!1,filterOnContext:!0},"era-1-labels":{id:"era-1-labels",type:"label",labelField:"label_2",path:"/gis/era_1_labels.geojson",interactive:!0}},jo={intro:{id:"intro",name:"Bushwick Inlet Park History Project",extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","nyc-historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"],story:[{type:"p",text:"Bushwick Inlet Park is a 28-acre piece of land that sits along the East River at the juncture of Greenpoint and Williamsburg. The park was created in 2005, a giveback from the City of New York to the residents of North Brooklyn as part of a massive waterfront rezoning that so far has added more than 50,000 new residents to these neighborhoods[WD1] . The design of the park is guided by a master plan design prepared by Donna Walcavage of Stantec and endorsed through a community process in 2007."},{type:"h",stop:"when-it-is-completed",text:"When it is completed"},{type:"p",text:"When it is completed, Bushwick Inlet Park will be the crown jewel set in the midst of 5 miles of almost continuous waterfront esplanades running from the Wallabout Creek to Newtown Creek. Set between Marsha P. Johnson East River State Park to the south and the Greenpoint Monitor Museum to the north, BIP and its immediate neighbors will provide close to 36 acres of contiguous public open space [WD2] directly on the East River. But almost 20 years after the rezoning, the park is still more of a concept than a reality. As of 2023, less than a third of the park has been constructed, and it was only in the past few years that the City acquired – at great expense – the final piece of the puzzle that makes up Bushwick Inlet Park. Completion of the full park is likely decades away."},{type:"p",text:"The Bushwick Inlet Park “puzzle” consists of 5 pieces of property[WD3] , acquired at various times between 2007 and 2016 and scheduled to be developed in phases."},{type:"h",text:"Motiva site (2-acres)"},{type:"p",text:"At the north end of the park, wrapping the inlet itself on three sides is the 2-acre Motiva site, the only part of the park within Greenpoint."},{type:"h",text:"Bayside Oil site (10.4-acres)"},{type:"p",text:"On the south side of the inlet is the 10.4-acre Bayside Oil site, whose large oil tanks were a stark reminder of the environmental degradation of waterfront until their demolition in 2019."},{type:"h",stop:"50-kent-st",text:"50 Kent Avenue (2-acres)"},{type:"p",text:"South of the Bayside property on Kent Avenue is a 2-acre, half-block parcel known as 50 Kent Avenue that opened in 2021 as the newest piece of green space to be added to the Park. The western half of this block and the full block to the south comprise the CitiStorage property, 8.5 acres in total."},{type:"h",text:"Soccer Field site (4.6-acres)"},{type:"p",text:"The southernmost block of Bushwick Inlet Park is the 4.6-acre soccer field site, also home to the North Brooklyn Parks headquarter/community house."}],stops:{"when-it-is-completed":{extent:{nwLng:-73.96480845,nwLat:40.72729899,seLng:-73.95572544,seLat:40.71944572},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"]},"50-kent-st":{extent:{nwLng:-73.96480845,nwLat:40.72729899,seLng:-73.95572544,seLat:40.71944572},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"]}}},"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",extent:{nwLng:-73.99610077,nwLat:40.74185405,seLng:-73.91023564,seLat:40.68369957},maps:["nyc-historical-waterline","indian-paths-kings-county","pluto","era-1-polys","era-1-lines-the-strand","era-1-labels"]},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","nyc-historical-waterline"]},"urban-industrial":{id:"urban-industrial",name:"Urban + Industrial Era",extent:{nwLng:-73.96621568,nwLat:40.729,seLng:-73.9415892,seLat:40.7110097},maps:["nyc-landline","nyc-historical-waterline","seventeenseventysix-shoreline","pluto","fbip-labels","era3-story-polygons"],story:[{type:"h",text:"Introduction"},{type:"p",text:"First envisioned as a suburb for growing Manhattan across the river, Williamsburgh quickly became a center for manufacture. In the 1850s, two industries that would transform north Brooklyn – sugar refining and petroleum distillation – were established on the Williamsburgh waterfront."},{type:"p",text:"By 1900, the Williamsburg and Greenpoint waterfronts were fully given over to industrial and distribution operations. At the head of Manhattan Avenue was the Chelsea Manufacturing Co., maker of ropes and ships stores (and a successor to the early history of rope walks). South of there was the Gleason-Tiebot Glass Works (now Glasserie). Clay Street south to Java Street was mostly given over to lumber yards, bringing bulk wood products in via the waterfront for distribution throughout the city. These yards continued in operation through the late 20th century and much of the property is now developed as Greenpoint Landing. South of Greenpoint Avenue was the American Manufacturing Company (better known now as Greenpoint Terminal Market), another rope and ship’s stores manufacturing company. And south of there was the Continental Iron Works, still in operation in 1900. South of the inlet in Williamsburg, Standard Oil and the Williamsburg Gas Light Company continued to operate as described above. Cooperages (barrel factories – barrels were the preferred containers for bulk sugar and other products), distilleries, coal pockets (coal transfer stations) and sugar refineries occupied the waterfront south of North 4th Street. The American Sugar Refining Company (previously Havemeyers, later Domino Sugar) occupied the blocks from Grand Street to South 6th Street (the Williamsburg Bridge was under construction at this time); Mollenhauer’s sugar refinery was located between South 7thStreet and Division Avenue."}]},migration:{id:"migration",name:"Migration"},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization"}},es={"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",shortLabel:"Pre 1620",longLabel:"Before 1620",link:null,view:"pre-1600s",chapters:{geography:{id:"geography",name:"Geography",link:"/era/pre-1600s/geography"},waterways:{id:"waterways",name:"Waterways",link:"/era/pre-1600s/waterways"},"the-strand":{id:"the-strand",name:"The Strand",link:"/era/pre-1600s/the-strand"},"indigenous-population":{id:"indigenous-population",name:"Indigenous Population",link:"/era/pre-1600s/indigenous-population"}}},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",link:null,view:"early-european-settlement",chapters:{"bushwick-patent":{id:"bushwick-patent",name:"Bushwick Patent",link:"/era/early-european-settlement/bushwick-patent"},"original-settlers":{id:"original-settlers",name:"Original Settlers",link:"/era/early-european-settlement/original-settlers"},"bushwick-village":{id:"bushwick-village",name:"Bushwick Village",link:"/era/early-european-settlement/bushwick-village"},"early-farms":{id:"early-farms",name:"Early Farms",link:"/era/early-european-settlement/early-farms"},"founding-of-williamsburgh":{id:"founding-of-williamsburgh",name:"Founding of Williamsburgh",link:"/era/early-european-settlement/founding-of-williamsburgh"},"williamsburgh-grows":{id:"williamsburgh-grows",name:"Williamsburgh Grows",link:"/era/early-european-settlement/williamsburgh-grows"},"greenpoint-urbanizes":{id:"greenpoint-urbanizes",name:"Greenpoint Urbanizes",link:"/era/early-european-settlement/greenpoint-urbanizes"},"back-at-the-creek":{id:"back-at-the-creek",name:"Back at the-Creek",link:"/era/early-european-settlement/back-at-the-creek"},"changing-the-creek":{id:"changing-the-creek",name:"Changing the Creek",link:"/era/early-european-settlement/changing-the-creek"},"early-industrialization":{id:"early-industrialization",name:"Early Industrialization",link:"/era/early-european-settlement/early-industrialization"},"continental-ironworks":{id:"continental-ironworks",name:"Continental Ironworks",link:"/era/early-european-settlement/continental-ironworks"},"williamsburgh-becomes-a-city":{id:"williamsburgh-becomes-a-city",name:"Williamsburgh Becomes a City",link:"/era/early-european-settlement/williamsburgh-becomes-a-city"}}},"urban-industrial":{id:"urban-industrial",name:"Urban + Industrial Era",shortLabel:"1850-1950",longLabel:"Urban and Industrial Era",link:null,view:"urban-industrial",chapters:{sugar:{id:"sugar",name:"Sugar",link:"/era/urban-industrial/sugar"},petroleum:{id:"petroleum",name:"Petroleum",link:"/era/urban-industrial/petroleum"},"coal-tar-gasification":{id:"coal-tar-gasification",name:"Coal-tar Gasification",link:"/era/urban-industrial/coal-tar-gasification"},"shipbuilding-and-ironworks":{id:"shipbuilding-and-ironworks",name:"Shipbuilding and Ironworks",link:"/era/urban-industrial/shipbuilding-and-ironworks"},"the-creek-disappears":{id:"the-creek-disappears",name:"The Creek Disappears",link:"/era/urban-industrial/the-creek-disappears"},"eastern-district-terminal":{id:"eastern-district-terminal",name:"Eastern District Terminal",link:"/era/urban-industrial/eastern-district-terminal"},demographics:{id:"demographics",name:"Demographics",link:"/era/urban-industrial/demographics"}}},migration:{id:"migration",name:"Migration",link:null,view:"migration",chapters:{}},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization",link:null,view:"activism-deindustrialization",chapters:{}}},us={intialView:Zo,maps:Qo,views:jo,eras:es};export{is as N,ue as T,ss as a,ls as b,Bi as c,gn as d,xa as e,Se as f,as as g,os as i,us as s};
