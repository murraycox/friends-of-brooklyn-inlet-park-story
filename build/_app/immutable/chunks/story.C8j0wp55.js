import{s as Ke,e as T,a as Q,c as C,b as I,l as lt,f as S,g as Z,m as g,S as Y,i as Yt,h as b,V as tt,n as Pt,C as Qe,k as $n,U as Ze,Q as et,R as nt,T as _e,x as Ln,t as Dn,d as Rn,j as Pn,r as xe,z as Fn}from"./scheduler.CdcZqrDN.js";import{S as je,i as tn}from"./index.4iWIhbwD.js";import{p as On}from"./stores.DoKOYbIW.js";import{b as W}from"./paths.CYcZe-89.js";function Et(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function qn(t){let e,n,r,i="Intro",a,s,o,u,l='<div class="story-navigation-button svelte-1hxfg1x"></div> <div class="story-navigation-label svelte-1hxfg1x"><span class="svelte-1hxfg1x">pre 1600s</span></div>',c,f,h,d,p='<div class="story-navigation-button svelte-1hxfg1x"></div> <div class="story-navigation-label svelte-1hxfg1x"><span class="svelte-1hxfg1x">1620-1855</span></div>',v,m,_,k,N='<div class="story-navigation-button svelte-1hxfg1x"></div> <div class="story-navigation-label svelte-1hxfg1x"><span class="svelte-1hxfg1x">1855-1950</span></div>',E,A,D,ot='<div class="story-navigation-button svelte-1hxfg1x"></div> <div class="story-navigation-label svelte-1hxfg1x"><span class="svelte-1hxfg1x">1950-2005</span></div>',X,y,R='<div class="story-navigation-button svelte-1hxfg1x"></div> <div class="story-navigation-label svelte-1hxfg1x"><span class="svelte-1hxfg1x">2005-Future</span></div>',w,q;return{c(){e=T("div"),n=T("a"),r=T("div"),r.textContent=i,s=Q(),o=T("a"),u=T("div"),u.innerHTML=l,f=Q(),h=T("a"),d=T("div"),d.innerHTML=p,m=Q(),_=T("a"),k=T("div"),k.innerHTML=N,A=Q(),D=T("div"),D.innerHTML=ot,X=Q(),y=T("div"),y.innerHTML=R,this.h()},l(M){e=C(M,"DIV",{id:!0,class:!0});var x=I(e);n=C(x,"A",{href:!0,class:!0});var gt=I(n);r=C(gt,"DIV",{class:!0,"data-svelte-h":!0}),lt(r)!=="svelte-1n71uxi"&&(r.textContent=i),gt.forEach(S),s=Z(x),o=C(x,"A",{href:!0,class:!0});var U=I(o);u=C(U,"DIV",{class:!0,"data-svelte-h":!0}),lt(u)!=="svelte-9vswny"&&(u.innerHTML=l),U.forEach(S),f=Z(x),h=C(x,"A",{href:!0,class:!0});var J=I(h);d=C(J,"DIV",{class:!0,"data-svelte-h":!0}),lt(d)!=="svelte-ulg6ch"&&(d.innerHTML=p),J.forEach(S),m=Z(x),_=C(x,"A",{href:!0,class:!0});var K=I(_);k=C(K,"DIV",{class:!0,"data-svelte-h":!0}),lt(k)!=="svelte-1sh20ts"&&(k.innerHTML=N),K.forEach(S),A=Z(x),D=C(x,"DIV",{class:!0,"data-svelte-h":!0}),lt(D)!=="svelte-zpps0a"&&(D.innerHTML=ot),X=Z(x),y=C(x,"DIV",{class:!0,"data-svelte-h":!0}),lt(y)!=="svelte-1lw4sxn"&&(y.innerHTML=R),x.forEach(S),this.h()},h(){g(r,"class","story-navigation-button svelte-1hxfg1x"),g(n,"href",a=t[0]?"#":`${W}/`),g(n,"class","svelte-1hxfg1x"),g(u,"class","story-navigation-button-and-label era-pre-colonial svelte-1hxfg1x"),Y(u,"active",t[1].url.pathname.includes("/eras/pre-colonial")),g(o,"href",c=t[0]?"#":`${W}/`),g(o,"class","svelte-1hxfg1x"),g(d,"class","story-navigation-button-and-label era-early-european-settlement svelte-1hxfg1x"),g(h,"href",v=t[0]?"#":`${W}/`),g(h,"class","svelte-1hxfg1x"),g(k,"class","story-navigation-button-and-label era-urban-industrial svelte-1hxfg1x"),Y(k,"active",t[1].url.pathname.includes("/eras/urban-industrial")),g(_,"href",E=t[0]?"#":`${W}/`),g(_,"class","svelte-1hxfg1x"),g(D,"class","story-navigation-button-and-label era-migration svelte-1hxfg1x"),g(y,"class","story-navigation-button-and-label era-activism-deindustrialization svelte-1hxfg1x"),g(e,"id","story-navigation"),g(e,"class","position-fixed svelte-1hxfg1x")},m(M,x){Yt(M,e,x),b(e,n),b(n,r),b(e,s),b(e,o),b(o,u),b(e,f),b(e,h),b(h,d),b(e,m),b(e,_),b(_,k),b(e,A),b(e,D),b(e,X),b(e,y),w||(q=[tt(n,"click",t[4]),tt(o,"click",t[5]),tt(h,"click",t[6]),tt(_,"click",t[7])],w=!0)},p(M,[x]){x&1&&a!==(a=M[0]?"#":`${W}/`)&&g(n,"href",a),x&2&&Y(u,"active",M[1].url.pathname.includes("/eras/pre-colonial")),x&1&&c!==(c=M[0]?"#":`${W}/`)&&g(o,"href",c),x&1&&v!==(v=M[0]?"#":`${W}/`)&&g(h,"href",v),x&2&&Y(k,"active",M[1].url.pathname.includes("/eras/urban-industrial")),x&1&&E!==(E=M[0]?"#":`${W}/`)&&g(_,"href",E)},i:Pt,o:Pt,d(M){M&&S(e),w=!1,Qe(q)}}}function zn(t,e,n){let r;$n(t,On,h=>n(1,r=h));let{navigateWithinMap:i=!0}=e;const a=Ze();function s(h){console.log(`NavEras:onViewClick(${h})`),a("navigate",{viewID:h,eraID:null})}function o(h){console.log(`NavEras:onEraClick(${h})`),a("navigate",{viewID:h,eraID:h})}const u=()=>s("intro"),l=()=>o("pre-1600s"),c=()=>o("early-european-settlement"),f=()=>o("urban-industrial-era");return t.$$set=h=>{"navigateWithinMap"in h&&n(0,i=h.navigateWithinMap)},[i,r,s,o,u,l,c,f]}class Js extends je{constructor(e){super(),tn(this,e,zn,qn,Ke,{navigateWithinMap:0})}}function $t(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Hn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function en(t){let e,n,r;t.length!==2?(e=$t,n=(o,u)=>$t(t(o),u),r=(o,u)=>t(o)-u):(e=t===$t||t===Hn?t:Bn,n=t,r=t);function i(o,u,l=0,c=o.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(o[f],u)<0?l=f+1:c=f}while(l<c)}return l}function a(o,u,l=0,c=o.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(o[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(o,u,l=0,c=o.length){const f=i(o,u,l,c-1);return f>l&&r(o[f-1],u)>-r(o[f],u)?f-1:f}return{left:i,center:s,right:a}}function Bn(){return 0}function Vn(t){return t===null?NaN:+t}const Wn=en($t),Gn=Wn.right;en(Vn).center;const Xn=Math.sqrt(50),Yn=Math.sqrt(10),Un=Math.sqrt(2);function Ft(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Xn?10:a>=Yn?5:a>=Un?2:1;let o,u,l;return i<0?(l=Math.pow(10,-i)/s,o=Math.round(t*l),u=Math.round(e*l),o/l<t&&++o,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*s,o=Math.round(t/l),u=Math.round(e/l),o*l<t&&++o,u*l>e&&--u),u<o&&.5<=n&&n<2?Ft(t,e,n*2):[o,u,l]}function Jn(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Ft(e,t,n):Ft(t,e,n);if(!(a>=i))return[];const o=a-i+1,u=new Array(o);if(r)if(s<0)for(let l=0;l<o;++l)u[l]=(a-l)/-s;else for(let l=0;l<o;++l)u[l]=(a-l)*s;else if(s<0)for(let l=0;l<o;++l)u[l]=(i+l)/-s;else for(let l=0;l<o;++l)u[l]=(i+l)*s;return u}function jt(t,e,n){return e=+e,t=+t,n=+n,Ft(t,e,n)[2]}function Kn(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?jt(e,t,n):jt(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}var Qn={value:()=>{}};function nn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Lt(n)}function Lt(t){this._=t}function Zn(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Lt.prototype=nn.prototype={constructor:Lt,on:function(t,e){var n=this._,r=Zn(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=jn(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=be(n[i],t.name,e);else if(e==null)for(i in n)n[i]=be(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Lt(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function jn(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function be(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Qn,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var te="http://www.w3.org/1999/xhtml";const ke={svg:"http://www.w3.org/2000/svg",xhtml:te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ut(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ke.hasOwnProperty(e)?{space:ke[e],local:t}:t}function tr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===te&&e.documentElement.namespaceURI===te?e.createElement(t):e.createElementNS(n,t)}}function er(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function rn(t){var e=Ut(t);return(e.local?er:tr)(e)}function nr(){}function ce(t){return t==null?nr:function(){return this.querySelector(t)}}function rr(t){typeof t!="function"&&(t=ce(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=a[c])&&(l=t.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),o[c]=l);return new $(r,this._parents)}function an(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ir(){return[]}function sn(t){return t==null?ir:function(){return this.querySelectorAll(t)}}function ar(t){return function(){return an(t.apply(this,arguments))}}function sr(t){typeof t=="function"?t=ar(t):t=sn(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,u,l=0;l<o;++l)(u=s[l])&&(r.push(t.call(u,u.__data__,l,s)),i.push(u));return new $(r,i)}function on(t){return function(){return this.matches(t)}}function ln(t){return function(e){return e.matches(t)}}var or=Array.prototype.find;function lr(t){return function(){return or.call(this.children,t)}}function ur(){return this.firstElementChild}function cr(t){return this.select(t==null?ur:lr(typeof t=="function"?t:ln(t)))}var fr=Array.prototype.filter;function hr(){return Array.from(this.children)}function dr(t){return function(){return fr.call(this.children,t)}}function pr(t){return this.selectAll(t==null?hr:dr(typeof t=="function"?t:ln(t)))}function gr(t){typeof t!="function"&&(t=on(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],u,l=0;l<s;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&o.push(u);return new $(r,this._parents)}function un(t){return new Array(t.length)}function mr(){return new $(this._enter||this._groups.map(un),this._parents)}function Ot(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ot.prototype={constructor:Ot,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function yr(t){return function(){return t}}function vr(t,e,n,r,i,a){for(var s=0,o,u=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new Ot(t,a[s]);for(;s<u;++s)(o=e[s])&&(i[s]=o)}function wr(t,e,n,r,i,a,s){var o,u,l=new Map,c=e.length,f=a.length,h=new Array(c),d;for(o=0;o<c;++o)(u=e[o])&&(h[o]=d=s.call(u,u.__data__,o,e)+"",l.has(d)?i[o]=u:l.set(d,u));for(o=0;o<f;++o)d=s.call(t,a[o],o,a)+"",(u=l.get(d))?(r[o]=u,u.__data__=a[o],l.delete(d)):n[o]=new Ot(t,a[o]);for(o=0;o<c;++o)(u=e[o])&&l.get(h[o])===u&&(i[o]=u)}function _r(t){return t.__data__}function xr(t,e){if(!arguments.length)return Array.from(this,_r);var n=e?wr:vr,r=this._parents,i=this._groups;typeof t!="function"&&(t=yr(t));for(var a=i.length,s=new Array(a),o=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=br(t.call(c,c&&c.__data__,l,r)),p=d.length,v=o[l]=new Array(p),m=s[l]=new Array(p),_=u[l]=new Array(h);n(c,f,v,m,_,d,e);for(var k=0,N=0,E,A;k<p;++k)if(E=v[k]){for(k>=N&&(N=k+1);!(A=m[N])&&++N<p;);E._next=A||null}}return s=new $(s,r),s._enter=o,s._exit=u,s}function br(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function kr(){return new $(this._exit||this._groups.map(un),this._parents)}function Mr(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Nr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],f=l.length,h=o[u]=new Array(f),d,p=0;p<f;++p)(d=l[p]||c[p])&&(h[p]=d);for(;u<i;++u)o[u]=n[u];return new $(o,this._parents)}function Er(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Ar(t){t||(t=Sr);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,u=i[a]=new Array(o),l,c=0;c<o;++c)(l=s[c])&&(u[c]=l);u.sort(e)}return new $(i,this._parents).order()}function Sr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ir(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Tr(){return Array.from(this)}function Cr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function $r(){let t=0;for(const e of this)++t;return t}function Lr(){return!this.node()}function Dr(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function Rr(t){return function(){this.removeAttribute(t)}}function Pr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fr(t,e){return function(){this.setAttribute(t,e)}}function Or(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function zr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Hr(t,e){var n=Ut(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Pr:Rr:typeof e=="function"?n.local?zr:qr:n.local?Or:Fr)(n,e))}function cn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Br(t){return function(){this.style.removeProperty(t)}}function Vr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Wr(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Gr(t,e,n){return arguments.length>1?this.each((e==null?Br:typeof e=="function"?Wr:Vr)(t,e,n??"")):ht(this.node(),t)}function ht(t,e){return t.style.getPropertyValue(e)||cn(t).getComputedStyle(t,null).getPropertyValue(e)}function Xr(t){return function(){delete this[t]}}function Yr(t,e){return function(){this[t]=e}}function Ur(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Jr(t,e){return arguments.length>1?this.each((e==null?Xr:typeof e=="function"?Ur:Yr)(t,e)):this.node()[t]}function fn(t){return t.trim().split(/^|\s+/)}function fe(t){return t.classList||new hn(t)}function hn(t){this._node=t,this._names=fn(t.getAttribute("class")||"")}hn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function dn(t,e){for(var n=fe(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function pn(t,e){for(var n=fe(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Kr(t){return function(){dn(this,t)}}function Qr(t){return function(){pn(this,t)}}function Zr(t,e){return function(){(e.apply(this,arguments)?dn:pn)(this,t)}}function jr(t,e){var n=fn(t+"");if(arguments.length<2){for(var r=fe(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Zr:e?Kr:Qr)(n,e))}function ti(){this.textContent=""}function ei(t){return function(){this.textContent=t}}function ni(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ri(t){return arguments.length?this.each(t==null?ti:(typeof t=="function"?ni:ei)(t)):this.node().textContent}function ii(){this.innerHTML=""}function ai(t){return function(){this.innerHTML=t}}function si(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function oi(t){return arguments.length?this.each(t==null?ii:(typeof t=="function"?si:ai)(t)):this.node().innerHTML}function li(){this.nextSibling&&this.parentNode.appendChild(this)}function ui(){return this.each(li)}function ci(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fi(){return this.each(ci)}function hi(t){var e=typeof t=="function"?t:rn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function di(){return null}function pi(t,e){var n=typeof t=="function"?t:rn(t),r=e==null?di:typeof e=="function"?e:ce(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gi(){var t=this.parentNode;t&&t.removeChild(this)}function mi(){return this.each(gi)}function yi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wi(t){return this.select(t?vi:yi)}function _i(t){return arguments.length?this.property("__data__",t):this.node().__data__}function xi(t){return function(e){t.call(this,e,this.__data__)}}function bi(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ki(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Mi(t,e,n){return function(){var r=this.__on,i,a=xi(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Ni(t,e,n){var r=bi(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,c;u<l;++u)for(i=0,c=o[u];i<a;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(o=e?Mi:ki,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function gn(t,e,n){var r=cn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ei(t,e){return function(){return gn(this,t,e)}}function Ai(t,e){return function(){return gn(this,t,e.apply(this,arguments))}}function Si(t,e){return this.each((typeof e=="function"?Ai:Ei)(t,e))}function*Ii(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var he=[null];function $(t,e){this._groups=t,this._parents=e}function Mt(){return new $([[document.documentElement]],he)}function Ti(){return this}$.prototype=Mt.prototype={constructor:$,select:rr,selectAll:sr,selectChild:cr,selectChildren:pr,filter:gr,data:xr,enter:mr,exit:kr,join:Mr,merge:Nr,selection:Ti,order:Er,sort:Ar,call:Ir,nodes:Tr,node:Cr,size:$r,empty:Lr,each:Dr,attr:Hr,style:Gr,property:Jr,classed:jr,text:ri,html:oi,raise:ui,lower:fi,append:hi,insert:pi,remove:mi,clone:wi,datum:_i,on:Ni,dispatch:Si,[Symbol.iterator]:Ii};function Ci(t){return typeof t=="string"?new $([[document.querySelector(t)]],[document.documentElement]):new $([[t]],he)}function Me(t){return typeof t=="string"?new $([document.querySelectorAll(t)],[document.documentElement]):new $([an(t)],he)}function de(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Nt(){}var xt=.7,qt=1/xt,ft="\\s*([+-]?\\d+)\\s*",bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",z="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$i=/^#([0-9a-f]{3,8})$/,Li=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),Di=new RegExp(`^rgb\\(${z},${z},${z}\\)$`),Ri=new RegExp(`^rgba\\(${ft},${ft},${ft},${bt}\\)$`),Pi=new RegExp(`^rgba\\(${z},${z},${z},${bt}\\)$`),Fi=new RegExp(`^hsl\\(${bt},${z},${z}\\)$`),Oi=new RegExp(`^hsla\\(${bt},${z},${z},${bt}\\)$`),Ne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};de(Nt,at,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ee,formatHex:Ee,formatHex8:qi,formatHsl:zi,formatRgb:Ae,toString:Ae});function Ee(){return this.rgb().formatHex()}function qi(){return this.rgb().formatHex8()}function zi(){return yn(this).formatHsl()}function Ae(){return this.rgb().formatRgb()}function at(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$i.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Se(e):n===3?new L(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?At(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?At(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Li.exec(t))?new L(e[1],e[2],e[3],1):(e=Di.exec(t))?new L(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ri.exec(t))?At(e[1],e[2],e[3],e[4]):(e=Pi.exec(t))?At(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fi.exec(t))?Ce(e[1],e[2]/100,e[3]/100,1):(e=Oi.exec(t))?Ce(e[1],e[2]/100,e[3]/100,e[4]):Ne.hasOwnProperty(t)?Se(Ne[t]):t==="transparent"?new L(NaN,NaN,NaN,0):null}function Se(t){return new L(t>>16&255,t>>8&255,t&255,1)}function At(t,e,n,r){return r<=0&&(t=e=n=NaN),new L(t,e,n,r)}function Hi(t){return t instanceof Nt||(t=at(t)),t?(t=t.rgb(),new L(t.r,t.g,t.b,t.opacity)):new L}function ee(t,e,n,r){return arguments.length===1?Hi(t):new L(t,e,n,r??1)}function L(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}de(L,ee,mn(Nt,{brighter(t){return t=t==null?qt:Math.pow(qt,t),new L(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?xt:Math.pow(xt,t),new L(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new L(it(this.r),it(this.g),it(this.b),zt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ie,formatHex:Ie,formatHex8:Bi,formatRgb:Te,toString:Te}));function Ie(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}`}function Bi(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}${rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Te(){const t=zt(this.opacity);return`${t===1?"rgb(":"rgba("}${it(this.r)}, ${it(this.g)}, ${it(this.b)}${t===1?")":`, ${t})`}`}function zt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function it(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function rt(t){return t=it(t),(t<16?"0":"")+t.toString(16)}function Ce(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new F(t,e,n,r)}function yn(t){if(t instanceof F)return new F(t.h,t.s,t.l,t.opacity);if(t instanceof Nt||(t=at(t)),!t)return new F;if(t instanceof F)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,u=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=u<.5?a+i:2-a-i,s*=60):o=u>0&&u<1?0:s,new F(s,o,u,t.opacity)}function Vi(t,e,n,r){return arguments.length===1?yn(t):new F(t,e,n,r??1)}function F(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}de(F,Vi,mn(Nt,{brighter(t){return t=t==null?qt:Math.pow(qt,t),new F(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xt:Math.pow(xt,t),new F(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new L(Qt(t>=240?t-240:t+120,i,r),Qt(t,i,r),Qt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new F($e(this.h),St(this.s),St(this.l),zt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zt(this.opacity);return`${t===1?"hsl(":"hsla("}${$e(this.h)}, ${St(this.s)*100}%, ${St(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $e(t){return t=(t||0)%360,t<0?t+360:t}function St(t){return Math.max(0,Math.min(1,t||0))}function Qt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const pe=t=>()=>t;function Wi(t,e){return function(n){return t+n*e}}function Gi(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Xi(t){return(t=+t)==1?vn:function(e,n){return n-e?Gi(e,n,t):pe(isNaN(e)?n:e)}}function vn(t,e){var n=e-t;return n?Wi(t,n):pe(isNaN(t)?e:t)}const Ht=function t(e){var n=Xi(e);function r(i,a){var s=n((i=ee(i)).r,(a=ee(a)).r),o=n(i.g,a.g),u=n(i.b,a.b),l=vn(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=o(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function Yi(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Ui(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ji(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=ge(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Ki(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function P(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qi(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ge(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var ne=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zt=new RegExp(ne.source,"g");function Zi(t){return function(){return t}}function ji(t){return function(e){return t(e)+""}}function wn(t,e){var n=ne.lastIndex=Zt.lastIndex=0,r,i,a,s=-1,o=[],u=[];for(t=t+"",e=e+"";(r=ne.exec(t))&&(i=Zt.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,u.push({i:s,x:P(r,i)})),n=Zt.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?u[0]?ji(u[0].x):Zi(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)o[(f=u[c]).i]=f.x(l);return o.join("")})}function ge(t,e){var n=typeof e,r;return e==null||n==="boolean"?pe(e):(n==="number"?P:n==="string"?(r=at(e))?(e=r,Ht):wn:e instanceof at?Ht:e instanceof Date?Ki:Ui(e)?Yi:Array.isArray(e)?Ji:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Qi:P)(t,e)}function ta(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Le=180/Math.PI,re={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _n(t,e,n,r,i,a){var s,o,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Le,skewX:Math.atan(u)*Le,scaleX:s,scaleY:o}}var It;function ea(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?re:_n(e.a,e.b,e.c,e.d,e.e,e.f)}function na(t){return t==null||(It||(It=document.createElementNS("http://www.w3.org/2000/svg","g")),It.setAttribute("transform",t),!(t=It.transform.baseVal.consolidate()))?re:(t=t.matrix,_n(t.a,t.b,t.c,t.d,t.e,t.f))}function xn(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,p){if(l!==f||c!==h){var v=d.push("translate(",null,e,null,n);p.push({i:v-4,x:P(l,f)},{i:v-2,x:P(c,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function s(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:P(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function o(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:P(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,h,d,p){if(l!==f||c!==h){var v=d.push(i(d)+"scale(",null,",",null,")");p.push({i:v-4,x:P(l,f)},{i:v-2,x:P(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),s(l.rotate,c.rotate,f,h),o(l.skewX,c.skewX,f,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var p=-1,v=h.length,m;++p<v;)f[(m=h[p]).i]=m.x(d);return f.join("")}}}var ra=xn(ea,"px, ","px)","deg)"),ia=xn(na,", ",")",")"),dt=0,yt=0,mt=0,bn=1e3,Bt,vt,Vt=0,st=0,Jt=0,kt=typeof performance=="object"&&performance.now?performance:Date,kn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function me(){return st||(kn(aa),st=kt.now()+Jt)}function aa(){st=0}function Wt(){this._call=this._time=this._next=null}Wt.prototype=Mn.prototype={constructor:Wt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?me():+n)+(e==null?0:+e),!this._next&&vt!==this&&(vt?vt._next=this:Bt=this,vt=this),this._call=t,this._time=n,ie()},stop:function(){this._call&&(this._call=null,this._time=1/0,ie())}};function Mn(t,e,n){var r=new Wt;return r.restart(t,e,n),r}function sa(){me(),++dt;for(var t=Bt,e;t;)(e=st-t._time)>=0&&t._call.call(void 0,e),t=t._next;--dt}function De(){st=(Vt=kt.now())+Jt,dt=yt=0;try{sa()}finally{dt=0,la(),st=0}}function oa(){var t=kt.now(),e=t-Vt;e>bn&&(Jt-=e,Vt=t)}function la(){for(var t,e=Bt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Bt=n);vt=t,ie(r)}function ie(t){if(!dt){yt&&(yt=clearTimeout(yt));var e=t-st;e>24?(t<1/0&&(yt=setTimeout(De,t-kt.now()-Jt)),mt&&(mt=clearInterval(mt))):(mt||(Vt=kt.now(),mt=setInterval(oa,bn)),dt=1,kn(De))}}function ae(t,e,n){var r=new Wt;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ua=nn("start","end","cancel","interrupt"),ca=[],Nn=0,Re=1,se=2,Dt=3,Pe=4,oe=5,Rt=6;function Kt(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;fa(t,n,{name:e,index:r,group:i,on:ua,tween:ca,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Nn})}function ye(t,e){var n=O(t,e);if(n.state>Nn)throw new Error("too late; already scheduled");return n}function H(t,e){var n=O(t,e);if(n.state>Dt)throw new Error("too late; already running");return n}function O(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function fa(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Mn(a,0,n.time);function a(l){n.state=Re,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,f,h,d;if(n.state!==Re)return u();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Dt)return ae(s);d.state===Pe?(d.state=Rt,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Rt,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(ae(function(){n.state===Dt&&(n.state=Pe,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=se,n.on.call("start",t,t.__data__,n.index,n.group),n.state===se){for(n.state=Dt,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function o(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=oe,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===oe&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Rt,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function ha(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>se&&r.state<oe,r.state=Rt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function da(t){return this.each(function(){ha(this,t)})}function pa(t,e){var n,r;return function(){var i=H(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function ga(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=H(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=o;break}u===l&&i.push(o)}a.tween=i}}function ma(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=O(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?pa:ga)(n,t,e))}function ve(t,e,n){var r=t._id;return t.each(function(){var i=H(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return O(i,r).value[e]}}function En(t,e){var n;return(typeof e=="number"?P:e instanceof at?Ht:(n=at(e))?(e=n,Ht):wn)(t,e)}function ya(t){return function(){this.removeAttribute(t)}}function va(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wa(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function _a(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function xa(t,e,n){var r,i,a;return function(){var s,o=n(this),u;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=o+"",s===u?null:s===r&&u===i?a:(i=u,a=e(r=s,o)))}}function ba(t,e,n){var r,i,a;return function(){var s,o=n(this),u;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=o+"",s===u?null:s===r&&u===i?a:(i=u,a=e(r=s,o)))}}function ka(t,e){var n=Ut(t),r=n==="transform"?ia:En;return this.attrTween(t,typeof e=="function"?(n.local?ba:xa)(n,r,ve(this,"attr."+t,e)):e==null?(n.local?va:ya)(n):(n.local?_a:wa)(n,r,e))}function Ma(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Na(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ea(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Na(t,a)),n}return i._value=e,i}function Aa(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Ma(t,a)),n}return i._value=e,i}function Sa(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ut(t);return this.tween(n,(r.local?Ea:Aa)(r,e))}function Ia(t,e){return function(){ye(this,t).delay=+e.apply(this,arguments)}}function Ta(t,e){return e=+e,function(){ye(this,t).delay=e}}function Ca(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ia:Ta)(e,t)):O(this.node(),e).delay}function $a(t,e){return function(){H(this,t).duration=+e.apply(this,arguments)}}function La(t,e){return e=+e,function(){H(this,t).duration=e}}function Da(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$a:La)(e,t)):O(this.node(),e).duration}function Ra(t,e){if(typeof e!="function")throw new Error;return function(){H(this,t).ease=e}}function Pa(t){var e=this._id;return arguments.length?this.each(Ra(e,t)):O(this.node(),e).ease}function Fa(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;H(this,t).ease=n}}function Oa(t){if(typeof t!="function")throw new Error;return this.each(Fa(this._id,t))}function qa(t){typeof t!="function"&&(t=on(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],u,l=0;l<s;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&o.push(u);return new G(r,this._parents,this._name,this._id)}function za(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var u=e[o],l=n[o],c=u.length,f=s[o]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;o<r;++o)s[o]=e[o];return new G(s,this._parents,this._name,this._id)}function Ha(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ba(t,e,n){var r,i,a=Ha(e)?ye:H;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function Va(t,e){var n=this._id;return arguments.length<2?O(this.node(),n).on.on(t):this.each(Ba(n,t,e))}function Wa(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ga(){return this.on("end.remove",Wa(this._id))}function Xa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ce(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],u=o.length,l=a[s]=new Array(u),c,f,h=0;h<u;++h)(c=o[h])&&(f=t.call(c,c.__data__,h,o))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Kt(l[h],e,n,h,l,O(c,n)));return new G(a,this._parents,e,n)}function Ya(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sn(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var u=r[o],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var h=t.call(c,c.__data__,f,u),d,p=O(c,n),v=0,m=h.length;v<m;++v)(d=h[v])&&Kt(d,e,n,v,h,p);a.push(h),s.push(c)}return new G(a,s,e,n)}var Ua=Mt.prototype.constructor;function Ja(){return new Ua(this._groups,this._parents)}function Ka(t,e){var n,r,i;return function(){var a=ht(this,t),s=(this.style.removeProperty(t),ht(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function An(t){return function(){this.style.removeProperty(t)}}function Qa(t,e,n){var r,i=n+"",a;return function(){var s=ht(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function Za(t,e,n){var r,i,a;return function(){var s=ht(this,t),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(t),ht(this,t))),s===u?null:s===r&&u===i?a:(i=u,a=e(r=s,o))}}function ja(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var u=H(this,t),l=u.on,c=u.value[a]==null?o||(o=An(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function ts(t,e,n){var r=(t+="")=="transform"?ra:En;return e==null?this.styleTween(t,Ka(t,r)).on("end.style."+t,An(t)):typeof e=="function"?this.styleTween(t,Za(t,r,ve(this,"style."+t,e))).each(ja(this._id,t)):this.styleTween(t,Qa(t,r,e),n).on("end.style."+t,null)}function es(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ns(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&es(t,s,n)),r}return a._value=e,a}function rs(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ns(t,e,n??""))}function is(t){return function(){this.textContent=t}}function as(t){return function(){var e=t(this);this.textContent=e??""}}function ss(t){return this.tween("text",typeof t=="function"?as(ve(this,"text",t)):is(t==null?"":t+""))}function os(t){return function(e){this.textContent=t.call(this,e)}}function ls(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&os(i)),e}return r._value=t,r}function us(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ls(t))}function cs(){for(var t=this._name,e=this._id,n=Sn(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,u,l=0;l<o;++l)if(u=s[l]){var c=O(u,e);Kt(u,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new G(r,this._parents,t,n)}function fs(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},u={value:function(){--i===0&&a()}};n.each(function(){var l=H(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),l.on=e}),i===0&&a()})}var hs=0;function G(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Sn(){return++hs}var V=Mt.prototype;G.prototype={constructor:G,select:Xa,selectAll:Ya,selectChild:V.selectChild,selectChildren:V.selectChildren,filter:qa,merge:za,selection:Ja,transition:cs,call:V.call,nodes:V.nodes,node:V.node,size:V.size,empty:V.empty,each:V.each,on:Va,attr:ka,attrTween:Sa,style:ts,styleTween:rs,text:ss,textTween:us,remove:Ga,tween:ma,delay:Ca,duration:Da,ease:Pa,easeVarying:Oa,end:fs,[Symbol.iterator]:V[Symbol.iterator]};function Ks(t){return--t*t*t+1}function ds(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ps={time:null,delay:0,duration:250,ease:ds};function gs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ms(t){var e,n;t instanceof G?(e=t._id,t=t._name):(e=Sn(),(n=ps).time=me(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,u,l=0;l<o;++l)(u=s[l])&&Kt(u,t,e,l,s,n||gs(u,e));return new G(r,this._parents,t,e)}Mt.prototype.interrupt=da;Mt.prototype.transition=ms;function ys(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Gt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function pt(t){return t=Gt(Math.abs(t)),t?t[1]:NaN}function vs(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],u=0;i>0&&o>0&&(u+o+1>r&&(o=Math.max(1,r-u)),a.push(n.substring(i-=o,i+o)),!((u+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function ws(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var _s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xt(t){if(!(e=_s.exec(t)))throw new Error("invalid format: "+t);var e;return new we({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xt.prototype=we.prototype;function we(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}we.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xs(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var In;function bs(t,e){var n=Gt(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(In=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Gt(t,Math.max(0,e+a-1))[0]}function Fe(t,e){var n=Gt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Oe={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ys,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Fe(t*100,e),r:Fe,s:bs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qe(t){return t}var ze=Array.prototype.map,He=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ks(t){var e=t.grouping===void 0||t.thousands===void 0?qe:vs(ze.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?qe:ws(ze.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=Xt(f);var h=f.fill,d=f.align,p=f.sign,v=f.symbol,m=f.zero,_=f.width,k=f.comma,N=f.precision,E=f.trim,A=f.type;A==="n"?(k=!0,A="g"):Oe[A]||(N===void 0&&(N=12),E=!0,A="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var D=v==="$"?n:v==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",ot=v==="$"?r:/[%p]/.test(A)?s:"",X=Oe[A],y=/[defgprs%]/.test(A);N=N===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function R(w){var q=D,M=ot,x,gt,U;if(A==="c")M=X(w)+M,w="";else{w=+w;var J=w<0||1/w<0;if(w=isNaN(w)?u:X(Math.abs(w),N),E&&(w=xs(w)),J&&+w==0&&p!=="+"&&(J=!1),q=(J?p==="("?p:o:p==="-"||p==="("?"":p)+q,M=(A==="s"?He[8+In/3]:"")+M+(J&&p==="("?")":""),y){for(x=-1,gt=w.length;++x<gt;)if(U=w.charCodeAt(x),48>U||U>57){M=(U===46?i+w.slice(x+1):w.slice(x))+M,w=w.slice(0,x);break}}}k&&!m&&(w=e(w,1/0));var K=q.length+w.length+M.length,B=K<_?new Array(_-K+1).join(h):"";switch(k&&m&&(w=e(B+w,B.length?_-M.length:1/0),B=""),d){case"<":w=q+w+M+B;break;case"=":w=q+B+w+M;break;case"^":w=B.slice(0,K=B.length>>1)+q+w+M+B.slice(K);break;default:w=B+q+w+M;break}return a(w)}return R.toString=function(){return f+""},R}function c(f,h){var d=l((f=Xt(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(pt(h)/3)))*3,v=Math.pow(10,-p),m=He[8+p/3];return function(_){return d(v*_)+m}}return{format:l,formatPrefix:c}}var Tt,Tn,Cn;Ms({thousands:",",grouping:[3],currency:["$",""]});function Ms(t){return Tt=ks(t),Tn=Tt.format,Cn=Tt.formatPrefix,Tt}function Ns(t){return Math.max(0,-pt(Math.abs(t)))}function Es(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pt(e)/3)))*3-pt(Math.abs(t)))}function As(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pt(e)-pt(t))+1}function Ss(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Is(t){return function(){return t}}function Ts(t){return+t}var Be=[0,1];function ut(t){return t}function le(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Is(isNaN(e)?NaN:.5)}function Cs(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function $s(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=le(i,r),a=n(s,a)):(r=le(r,i),a=n(a,s)),function(o){return a(r(o))}}function Ls(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=le(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var u=Gn(t,o,1,r)-1;return a[u](i[u](o))}}function Ds(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Rs(){var t=Be,e=Be,n=ge,r,i,a,s=ut,o,u,l;function c(){var h=Math.min(t.length,e.length);return s!==ut&&(s=Cs(t[0],t[h-1])),o=h>2?Ls:$s,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(u||(u=o(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((l||(l=o(e,t.map(r),P)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Ts),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=ta,c()},f.clamp=function(h){return arguments.length?(s=h?!0:ut,c()):s!==ut},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Ps(){return Rs()(ut,ut)}function Fs(t,e,n,r){var i=Kn(t,e,n),a;switch(r=Xt(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Es(i,s))&&(r.precision=a),Cn(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=As(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ns(i))&&(r.precision=a-(r.type==="%")*2);break}}return Tn(r)}function Os(t){var e=t.domain;return t.ticks=function(n){var r=e();return Jn(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Fs(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],u,l,c=10;for(o<s&&(l=s,s=o,o=l,l=i,i=a,a=l);c-- >0;){if(l=jt(s,o,n),l===u)return r[i]=s,r[a]=o,e(r);if(l>0)s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l;else if(l<0)s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l;else break;u=l}return t},t}function ue(){var t=Ps();return t.copy=function(){return Ds(t,ue())},Ss.apply(t,arguments),Os(t)}function ct(t,e,n){this.k=t,this.x=e,this.y=n}ct.prototype={constructor:ct,scale:function(t){return t===1?this:new ct(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ct(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qs=new ct(1,0,0);ct.prototype;new TextEncoder;function Ve(t,e,n){const r=t.slice();return r[22]=e[n],r[24]=n,r}function We(t,e,n){const r=t.slice();return r[22]=e[n],r[24]=n,r}function Ge(t){let e,n,r=t[22].name+"",i,a,s,o,u;return{c(){e=T("div"),n=T("div"),i=Dn(r),a=Q(),this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0,style:!0});var c=I(e);n=C(c,"DIV",{class:!0});var f=I(n);i=Rn(f,r),f.forEach(S),a=Z(c),c.forEach(S),this.h()},h(){g(n,"class","story-controller-timeline-era-title svelte-1qw5oku"),g(e,"id",s="title-"+t[22].id),g(e,"class",o=`timeline-title-container era-${t[22].type=="era"?t[22].id:t[22].eraID} svelte-1qw5oku`),g(e,"style",u=`left:${t[3](t[24])-Je/2}px`)},m(l,c){Yt(l,e,c),b(e,n),b(n,i),b(e,a)},p(l,c){c&4&&r!==(r=l[22].name+"")&&Pn(i,r),c&4&&s!==(s="title-"+l[22].id)&&g(e,"id",s),c&4&&o!==(o=`timeline-title-container era-${l[22].type=="era"?l[22].id:l[22].eraID} svelte-1qw5oku`)&&g(e,"class",o),c&8&&u!==(u=`left:${l[3](l[24])-Je/2}px`)&&g(e,"style",u)},d(l){l&&S(e)}}}function Xe(t){let e,n,r,i,a,s,o,u,l;function c(){return t[14](t[22])}function f(){return t[15](t[22])}function h(){return t[16](t[22])}return{c(){e=et("g"),n=et("circle"),a=et("line"),this.h()},l(d){e=nt(d,"g",{class:!0,transform:!0});var p=I(e);n=nt(p,"circle",{cx:!0,cy:!0,r:!0,class:!0,"stroke-width":!0,stroke:!0}),I(n).forEach(S),a=nt(p,"line",{class:!0,id:!0,x1:!0,y1:!0,x2:!0,y2:!0,"stroke-width":!0,stroke:!0}),I(a).forEach(S),p.forEach(S),this.h()},h(){g(n,"cx","0"),g(n,"cy",Ct),g(n,"r",r=t[22].type=="era"?Ue:Ye),g(n,"class",i=xe(`era-${t[22].type=="era"?t[22].id:t[22].eraID}`)+" svelte-1qw5oku"),g(n,"stroke-width","1"),g(n,"stroke","grey"),Y(n,"era",t[22].type=="era"),Y(n,"chapter",t[22].type=="chapter"),g(a,"class","timeline-node-anchors svelte-1qw5oku"),g(a,"id",s=`anchor-${t[22].id}`),g(a,"x1","0"),g(a,"y1","0"),g(a,"x2","0"),g(a,"y2",Ct),g(a,"stroke-width","1"),g(a,"stroke","grey"),g(e,"class","timeline-era-and-chapter-group svelte-1qw5oku"),g(e,"transform",o=`translate(${t[3](t[24])},${wt+j/2-Ct})`)},m(d,p){Yt(d,e,p),b(e,n),b(e,a),u||(l=[tt(n,"mouseover",c),tt(n,"mouseleave",f),tt(n,"click",h)],u=!0)},p(d,p){t=d,p&4&&r!==(r=t[22].type=="era"?Ue:Ye)&&g(n,"r",r),p&4&&i!==(i=xe(`era-${t[22].type=="era"?t[22].id:t[22].eraID}`)+" svelte-1qw5oku")&&g(n,"class",i),p&4&&Y(n,"era",t[22].type=="era"),p&4&&Y(n,"chapter",t[22].type=="chapter"),p&4&&s!==(s=`anchor-${t[22].id}`)&&g(a,"id",s),p&8&&o!==(o=`translate(${t[3](t[24])},${wt+j/2-Ct})`)&&g(e,"transform",o)},d(d){d&&S(e),u=!1,Qe(l)}}}function qs(t){let e,n,r,i,a,s,o,u,l,c=Et(t[2]),f=[];for(let p=0;p<c.length;p+=1)f[p]=Ge(We(t,c,p));let h=Et(t[2]),d=[];for(let p=0;p<h.length;p+=1)d[p]=Xe(Ve(t,h,p));return{c(){e=T("div"),n=T("div");for(let p=0;p<f.length;p+=1)f[p].c();r=Q(),i=T("div"),a=et("svg"),s=et("g"),o=et("rect"),u=et("line");for(let p=0;p<d.length;p+=1)d[p].c();this.h()},l(p){e=C(p,"DIV",{id:!0,class:!0});var v=I(e);n=C(v,"DIV",{id:!0,class:!0});var m=I(n);for(let E=0;E<f.length;E+=1)f[E].l(m);m.forEach(S),r=Z(v),i=C(v,"DIV",{id:!0,class:!0});var _=I(i);a=nt(_,"svg",{width:!0,height:!0,class:!0});var k=I(a);s=nt(k,"g",{class:!0});var N=I(s);o=nt(N,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,rx:!0,ry:!0}),I(o).forEach(S),u=nt(N,"line",{x1:!0,y1:!0,y2:!0,x2:!0,"stroke-width":!0,stroke:!0,class:!0}),I(u).forEach(S);for(let E=0;E<d.length;E+=1)d[E].l(N);N.forEach(S),k.forEach(S),_.forEach(S),v.forEach(S),this.h()},h(){g(n,"id","timeline-titles"),g(n,"class","svelte-1qw5oku"),g(o,"class","timeline-background svelte-1qw5oku"),g(o,"x","0"),g(o,"y",wt),g(o,"height",j),g(o,"width",t[1]),g(o,"rx",j/2),g(o,"ry",j/2),g(u,"x1",_t),g(u,"y1",wt+j/2),g(u,"y2",wt+j/2),g(u,"x2",l=t[1]-_t),g(u,"stroke-width","1"),g(u,"stroke","grey"),g(u,"class","svelte-1qw5oku"),g(s,"class","svelte-1qw5oku"),g(a,"width","100%"),g(a,"height","100%"),g(a,"class","svelte-1qw5oku"),g(i,"id","timeline"),g(i,"class","svelte-1qw5oku"),g(e,"id","timeline-container"),g(e,"class","position-fixed svelte-1qw5oku")},m(p,v){Yt(p,e,v),b(e,n);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(n,null);b(e,r),b(e,i),b(i,a),b(a,s),b(s,o),b(s,u);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(s,null);t[17](s)},p(p,[v]){if(v&12){c=Et(p[2]);let m;for(m=0;m<c.length;m+=1){const _=We(p,c,m);f[m]?f[m].p(_,v):(f[m]=Ge(_),f[m].c(),f[m].m(n,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=c.length}if(v&2&&g(o,"width",p[1]),v&2&&l!==(l=p[1]-_t)&&g(u,"x2",l),v&252){h=Et(p[2]);let m;for(m=0;m<h.length;m+=1){const _=Ve(p,h,m);d[m]?d[m].p(_,v):(d[m]=Xe(_),d[m].c(),d[m].m(s,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=h.length}},i:Pt,o:Pt,d(p){p&&S(e),_e(f,p),_e(d,p),t[17](null)}}}const j=45,wt=85,Ct=20,Ye=4,Ue=6,_t=25,Je=80;function zs(t,e,n){let{eras:r}=e,{navigateWithinMap:i=!0}=e;function a(y){console.log("NavTimeline:onMapFeatureMouseOver(event:"+JSON.stringify(y.detail)+")"),m(y.detail.featureID)}function s(y){console.log("NavTimeline:onMapFeatureMouseOut(event:"+JSON.stringify(y.detail)+")"),_(y.detail.featureID)}function o(y){console.log("NavTimeline:onMapFeatureClick(event:"+JSON.stringify(y.detail)+")"),k(y.detail.featureID)}function u(y){console.log(`NavTimeline:onNavigate(event:${JSON.stringify(y.detail)})`),h=y.detail.eraID,v(),E()}const l=Ze();let c,f,h=null,d=[],p=ue().domain([0,d.length-1]);Ln(()=>{console.log("NavTimeline:onMount"),E(),window.addEventListener("resize",E)});function v(){console.log(`NavTimeline:recalculateActiveChapters(activeEraID:${h})`),r&&(n(2,d=[]),Object.values(r).forEach(y=>{y.type="era",d.push(y),h&&y.id==h&&y.chapters&&Object.values(y.chapters).forEach(R=>{R.type="chapter",R.eraID=y.id,d.push(R)})}))}console.log(d.length),v();function m(y){console.log("NavTimeline:onMouseOver(id:"+JSON.stringify(y)+")"),Me("#title-"+y+", #anchor-"+y).classed("visible",!0),l("chapterMouseOver",{id:y})}function _(y){console.log("NavTimeline:onMouseLeave(id:"+JSON.stringify(y)+")"),ae(function(){Me("#title-"+y+", #anchor-"+y).classed("visible",!1)},100),l("chapterMouseLeave",{id:y})}function k(y){Object.values(r).forEach(R=>{Object.values(R.chapters).forEach(w=>{w.link&&w.id==y&&(window.location=W+w.link)})})}function N(y){console.log(`NavTimeline:onEraClick(${y})`),l("navigate",{viewID:r[y].view,eraID:y})}function E(){n(1,f=parseInt(Ci("#timeline").style("width"),10)),console.log(f),n(3,p=ue().domain([0,d.length-1]).range([_t,f-_t]))}const A=y=>m(y.id),D=y=>_(y.id),ot=y=>{y.type=="chapter"?k(y.id):N(y.id,y.name)};function X(y){Fn[y?"unshift":"push"](()=>{c=y,n(0,c)})}return t.$$set=y=>{"eras"in y&&n(8,r=y.eras),"navigateWithinMap"in y&&n(9,i=y.navigateWithinMap)},[c,f,d,p,m,_,k,N,r,i,a,s,o,u,A,D,ot,X]}class Zs extends je{constructor(e){super(),tn(this,e,zs,qs,Ke,{eras:8,navigateWithinMap:9,onMapFeatureMouseOver:10,onMapFeatureMouseOut:11,onMapFeatureClick:12,onNavigate:13})}get onMapFeatureMouseOver(){return this.$$.ctx[10]}get onMapFeatureMouseOut(){return this.$$.ctx[11]}get onMapFeatureClick(){return this.$$.ctx[12]}get onNavigate(){return this.$$.ctx[13]}}const Hs="intro",Bs={"nyc-region-land":{id:"nyc-landline",type:"shapefile",url:"/gis/NYC_region_land_4326.geojson"},"nyc-historical-waterline":{id:"nyc-historical-waterline",type:"shapefile",url:"/gis/historical_water_polygons_final_4326.geojson"},"seventeenseventysix-shoreline":{id:"seventeenseventysix-shoreline",type:"shapefile",url:"/gis/1776_shoreline_polylines_4326.geojson"},pluto:{id:"pluto",type:"tile",urlPath:"/gis/pluto/",urlExtension:"png"},"indian-paths-kings-county":{id:"indian-paths-kings-county",type:"shapefile",url:"/gis/Indian_villages_ponds_paths_kings_cty_4326.geojson"},"indian-paths-ny":{id:"indian-paths-nyc",type:"shapefile",url:"/gis/Indian_paths_of_great_metropolis_NYC_bolton_1912_4326.geojson"},"oyster-historic-beds":{id:"oyster-historic-beds",type:"shapefile",url:"/gis/historic_oyster_beds_HEP.geojson"},"oyster-restoration-sites":{id:"oyster-restoration-sites",type:"shapefile",geometryType:"polygons",url:"/gis/recent_restoration_sites_oysters_2018_HEP.geojson"},"era-1-polys":{id:"era-1-polys",type:"shapefile",geometryType:"polygons",url:"/gis/era_1_polys_4326.geojson"},"era-1-lines-the-strand":{id:"era-1-lines-the-strand",type:"shapefile",geometryType:"polygons",url:"/gis/era_1_lines_the_strand_4326.geojson"},"bip-lots":{id:"bip-lots",type:"shapefile",url:"/gis/BIP_FinalLots.geojson",interactive:!1},"era3-story-polygons":{id:"era3-story-polygons",type:"shapefile",url:"/gis/era_3_1855-1950s_story_polys_sorted.geojson",interactive:!0},"fbip-labels":{id:"fbip-labels",type:"label",path:"/gis/fbip_labels.geojson",interactive:!0}},Vs={intro:{id:"intro",name:"Bushwick Inlet Park History Project",extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","nyc-historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"],story:[{type:"p",text:"Bushwick Inlet Park is a 28-acre piece of land that sits along the East River at the juncture of Greenpoint and Williamsburg. The park was created in 2005, a giveback from the City of New York to the residents of North Brooklyn as part of a massive waterfront rezoning that so far has added more than 50,000 new residents to these neighborhoods[WD1] . The design of the park is guided by a master plan design prepared by Donna Walcavage of Stantec and endorsed through a community process in 2007."},{type:"h",stop:"when-it-is-completed",text:"When it is completed"},{type:"p",text:"When it is completed, Bushwick Inlet Park will be the crown jewel set in the midst of 5 miles of almost continuous waterfront esplanades running from the Wallabout Creek to Newtown Creek. Set between Marsha P. Johnson East River State Park to the south and the Greenpoint Monitor Museum to the north, BIP and its immediate neighbors will provide close to 36 acres of contiguous public open space [WD2] directly on the East River. But almost 20 years after the rezoning, the park is still more of a concept than a reality. As of 2023, less than a third of the park has been constructed, and it was only in the past few years that the City acquired – at great expense – the final piece of the puzzle that makes up Bushwick Inlet Park. Completion of the full park is likely decades away."},{type:"p",text:"The Bushwick Inlet Park “puzzle” consists of 5 pieces of property[WD3] , acquired at various times between 2007 and 2016 and scheduled to be developed in phases."},{type:"h",text:"Motiva site (2-acres)"},{type:"p",text:"At the north end of the park, wrapping the inlet itself on three sides is the 2-acre Motiva site, the only part of the park within Greenpoint."},{type:"h",text:"Bayside Oil site (10.4-acres)"},{type:"p",text:"On the south side of the inlet is the 10.4-acre Bayside Oil site, whose large oil tanks were a stark reminder of the environmental degradation of waterfront until their demolition in 2019."},{type:"h",stop:"50-kent-st",text:"50 Kent Avenue (2-acres)"},{type:"p",text:"South of the Bayside property on Kent Avenue is a 2-acre, half-block parcel known as 50 Kent Avenue that opened in 2021 as the newest piece of green space to be added to the Park. The western half of this block and the full block to the south comprise the CitiStorage property, 8.5 acres in total."},{type:"h",text:"Soccer Field site (4.6-acres)"},{type:"p",text:"The southernmost block of Bushwick Inlet Park is the 4.6-acre soccer field site, also home to the North Brooklyn Parks headquarter/community house."}],stops:{"when-it-is-completed":{extent:{nwLng:-73.96480845,nwLat:40.72729899,seLng:-73.95572544,seLat:40.71944572},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"]},"50-kent-st":{extent:{nwLng:-73.96480845,nwLat:40.72729899,seLng:-73.95572544,seLat:40.71944572},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"]}}},"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",extent:{nwLng:-73.99610077,nwLat:40.74185405,seLng:-73.91023564,seLat:40.68369957},maps:["nyc-historical-waterline","indian-paths-kings-county","pluto","era-1-polys","era-1-lines-the-strand","fbip-labels"]},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","nyc-historical-waterline"]},"urban-industrial-era":{id:"urban-industrial-era",name:"Urban + Industrial Era",extent:{nwLng:-73.96621568,nwLat:40.729,seLng:-73.9415892,seLat:40.7110097},maps:["nyc-landline","nyc-historical-waterline","seventeenseventysix-shoreline","pluto","fbip-labels","era3-story-polygons"],story:[{type:"h",text:"Introduction"},{type:"p",text:"First envisioned as a suburb for growing Manhattan across the river, Williamsburgh quickly became a center for manufacture. In the 1850s, two industries that would transform north Brooklyn – sugar refining and petroleum distillation – were established on the Williamsburgh waterfront."},{type:"p",text:"By 1900, the Williamsburg and Greenpoint waterfronts were fully given over to industrial and distribution operations. At the head of Manhattan Avenue was the Chelsea Manufacturing Co., maker of ropes and ships stores (and a successor to the early history of rope walks). South of there was the Gleason-Tiebot Glass Works (now Glasserie). Clay Street south to Java Street was mostly given over to lumber yards, bringing bulk wood products in via the waterfront for distribution throughout the city. These yards continued in operation through the late 20th century and much of the property is now developed as Greenpoint Landing. South of Greenpoint Avenue was the American Manufacturing Company (better known now as Greenpoint Terminal Market), another rope and ship’s stores manufacturing company. And south of there was the Continental Iron Works, still in operation in 1900. South of the inlet in Williamsburg, Standard Oil and the Williamsburg Gas Light Company continued to operate as described above. Cooperages (barrel factories – barrels were the preferred containers for bulk sugar and other products), distilleries, coal pockets (coal transfer stations) and sugar refineries occupied the waterfront south of North 4th Street. The American Sugar Refining Company (previously Havemeyers, later Domino Sugar) occupied the blocks from Grand Street to South 6th Street (the Williamsburg Bridge was under construction at this time); Mollenhauer’s sugar refinery was located between South 7thStreet and Division Avenue."}]},migration:{id:"migration",name:"Migration"},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization"}},Ws={"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",shortLabel:"Pre 1620",longLabel:"Before 1620",link:null,view:"pre-1600s",chapters:{geography:{id:"geography",name:"Geography",link:"/era/pre-1600s/geography"},waterways:{id:"waterways",name:"Waterways",link:"/era/pre-1600s/waterways"},"the-strand":{id:"the-strand",name:"The Strand",link:"/era/pre-1600s/the-strand"},"indigenous-population":{id:"indigenous-population",name:"Indigenous Population",link:"/era/pre-1600s/indigenous-population"}}},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",link:null,view:"early-european-settlement",chapters:{"bushwick-patent":{id:"bushwick-patent",name:"Bushwick Patent",link:"/era/early-european-settlement/bushwick-patent"},"original-settlers":{id:"original-settlers",name:"Original Settlers",link:"/era/early-european-settlement/original-settlers"},"bushwick-village":{id:"bushwick-village",name:"Bushwick Village",link:"/era/early-european-settlement/bushwick-village"},"early-farms":{id:"early-farms",name:"Early Farms",link:"/era/early-european-settlement/early-farms"},"founding-of-williamsburgh":{id:"founding-of-williamsburgh",name:"Founding of Williamsburgh",link:"/era/early-european-settlement/founding-of-williamsburgh"},"williamsburgh-grows":{id:"williamsburgh-grows",name:"Williamsburgh Grows",link:"/era/early-european-settlement/williamsburgh-grows"},"greenpoint-urbanizes":{id:"greenpoint-urbanizes",name:"Greenpoint Urbanizes",link:"/era/early-european-settlement/greenpoint-urbanizes"},"back-at-the-creek":{id:"back-at-the-creek",name:"Back at the-Creek",link:"/era/early-european-settlement/back-at-the-creek"},"changing-the-creek":{id:"changing-the-creek",name:"Changing the Creek",link:"/era/early-european-settlement/changing-the-creek"},"early-industrialization":{id:"early-industrialization",name:"Early Industrialization",link:"/era/early-european-settlement/early-industrialization"},"continental-ironworks":{id:"continental-ironworks",name:"Continental Ironworks",link:"/era/early-european-settlement/continental-ironworks"},"williamsburgh-becomes-a-city":{id:"williamsburgh-becomes-a-city",name:"Williamsburgh Becomes a City",link:"/era/early-european-settlement/williamsburgh-becomes-a-city"}}},"urban-industrial-era":{id:"urban-industrial-era",name:"Urban + Industrial Era",shortLabel:"1850-1950",longLabel:"Urban and Industrial Era",link:null,view:"urban-industrial-era",chapters:{sugar:{id:"sugar",name:"Sugar",link:"/era/urban-industrial/sugar"},petroleum:{id:"petroleum",name:"Petroleum",link:"/era/urban-industrial/petroleum"},"coal-tar-gasification":{id:"coal-tar-gasification",name:"Coal-tar Gasification",link:"/era/urban-industrial/coal-tar-gasification"},"shipbuilding-and-ironworks":{id:"shipbuilding-and-ironworks",name:"Shipbuilding and Ironworks",link:"/era/urban-industrial/shipbuilding-and-ironworks"},"the-creek-disappears":{id:"the-creek-disappears",name:"The Creek Disappears",link:"/era/urban-industrial/the-creek-disappears"},"eastern-district-terminal":{id:"eastern-district-terminal",name:"Eastern District Terminal",link:"/era/urban-industrial/eastern-district-terminal"},demographics:{id:"demographics",name:"Demographics",link:"/era/urban-industrial/demographics"}}},migration:{id:"migration",name:"Migration",link:null,view:"migration",chapters:{}},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization",link:null,view:"activism-deindustrialization",chapters:{}}},js={intialView:Hs,maps:Bs,views:Vs,eras:Ws};export{Js as N,ct as T,Zs as a,Ci as b,ha as c,nn as d,Et as e,Ks as f,Qs as i,js as s};
