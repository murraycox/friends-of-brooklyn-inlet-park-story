import{s as on,Q as et,R as it,b as K,f as A,m as T,S as dt,i as tt,h as at,n as Jt,T as Vn,U as Yn,x as Se,v as vt,V as jt,F as sn,C as Xe,W as Ge,e as cn,t as qe,a as Sn,c as fn,d as Be,g as En,j as Ue,z as Wt,k as je}from"../chunks/scheduler.CswFsUOV.js";import{S as un,i as ln,t as lt,g as He,e as We,a as ft,c as zt,b as kt,m as Ot,d as Ct}from"../chunks/index.CcUBC9rR.js";import{g as Ze}from"../chunks/entry.C901p79C.js";import{p as Ke}from"../chunks/stores.DUhtJUis.js";import{s as gt,d as Qe,i as Xn,T as hn,b as pn,e as $t,c as X,f as xe,N as ti,a as ni}from"../chunks/NavTimeline.CGeUZAZ-.js";import{b as ei}from"../chunks/paths.DKcxU21r.js";class yt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const o=i[r],u=n+o,s=Math.abs(n)<Math.abs(o)?n-(u-o):o-(u-n);s&&(i[e++]=s),n=u}return i[e]=n,this._n=e+1,this}valueOf(){const n=this._partials;let i=this._n,e,r,o,u=0;if(i>0){for(u=n[--i];i>0&&(e=u,r=n[--i],u=e+r,o=r-(u-e),!o););i>0&&(o<0&&n[i-1]<0||o>0&&n[i-1]>0)&&(r=o*2,e=u+r,r==e-u&&(u=e))}return u}}function*ii(t){for(const n of t)yield*n}function Ee(t){return Array.from(ii(t))}function ri(t){let n;for(;n=t.sourceEvent;)t=n;return t}function _t(t,n){if(t=ri(t),n===void 0&&(n=t.currentTarget),n){var i=n.ownerSVGElement||n;if(i.createSVGPoint){var e=i.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(n.getScreenCTM().inverse()),[e.x,e.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const wn={capture:!0,passive:!1};function zn(t){t.preventDefault(),t.stopImmediatePropagation()}function oi(t){var n=t.document.documentElement,i=gt(t).on("dragstart.drag",zn,wn);"onselectstart"in n?i.on("selectstart.drag",zn,wn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ui(t,n){var i=t.document.documentElement,e=gt(t).on("dragstart.drag",null);n&&(e.on("click.drag",zn,wn),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in i?e.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var li=1e-12;function Un(t){return((t=Math.exp(t))+1/t)/2}function ai(t){return((t=Math.exp(t))-1/t)/2}function si(t){return((t=Math.exp(2*t))-1)/(t+1)}const ci=function t(n,i,e){function r(o,u){var s=o[0],f=o[1],g=o[2],a=u[0],l=u[1],p=u[2],m=a-s,v=l-f,y=m*m+v*v,S,M;if(y<li)M=Math.log(p/g)/n,S=function(P){return[s+P*m,f+P*v,g*Math.exp(n*P*M)]};else{var d=Math.sqrt(y),z=(p*p-g*g+e*y)/(2*g*i*d),w=(p*p-g*g-e*y)/(2*p*i*d),C=Math.log(Math.sqrt(z*z+1)-z),k=Math.log(Math.sqrt(w*w+1)-w);M=(k-C)/n,S=function(P){var R=P*M,L=Un(C),J=g/(i*d)*(L*si(n*R+C)-ai(C));return[s+J*m,f+J*v,g*L/Un(n*R+C)]}}return S.duration=M*1e3*n/Math.SQRT2,S}return r.rho=function(o){var u=Math.max(.001,+o),s=u*u,f=s*s;return t(u,s,f)},r}(Math.SQRT2,2,4);function fi(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function hi(t,n){return fetch(t,n).then(fi)}var V=1e-6,pi=1e-12,D=Math.PI,Q=D/2,jn=D/4,nt=D*2,x=180/D,H=D/180,G=Math.abs,we=Math.atan,bt=Math.atan2,B=Math.cos,gi=Math.exp,mi=Math.log,U=Math.sin,di=Math.sign||function(t){return t>0?1:t<0?-1:0},St=Math.sqrt,vi=Math.tan;function _i(t){return t>1?0:t<-1?D:Math.acos(t)}function At(t){return t>1?Q:t<-1?-Q:Math.asin(t)}function ot(){}function Zt(t,n){t&&Wn.hasOwnProperty(t.type)&&Wn[t.type](t,n)}var Hn={Feature:function(t,n){Zt(t.geometry,n)},FeatureCollection:function(t,n){for(var i=t.features,e=-1,r=i.length;++e<r;)Zt(i[e].geometry,n)}},Wn={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)t=i[e],n.point(t[0],t[1],t[2])},LineString:function(t,n){kn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)kn(i[e],n,0)},Polygon:function(t,n){Zn(t.coordinates,n)},MultiPolygon:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)Zn(i[e],n)},GeometryCollection:function(t,n){for(var i=t.geometries,e=-1,r=i.length;++e<r;)Zt(i[e],n)}};function kn(t,n,i){var e=-1,r=t.length-i,o;for(n.lineStart();++e<r;)o=t[e],n.point(o[0],o[1],o[2]);n.lineEnd()}function Zn(t,n){var i=-1,e=t.length;for(n.polygonStart();++i<e;)kn(t[i],n,1);n.polygonEnd()}function Et(t,n){t&&Hn.hasOwnProperty(t.type)?Hn[t.type](t,n):Zt(t,n)}function On(t){return[bt(t[1],t[0]),At(t[2])]}function Tt(t){var n=t[0],i=t[1],e=B(i);return[e*B(n),e*U(n),U(i)]}function Xt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Kt(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function gn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Gt(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Cn(t){var n=St(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function $n(t,n){function i(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(i.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),i}function Tn(t,n){return G(t)>D&&(t-=Math.round(t/nt)*nt),[t,n]}Tn.invert=Tn;function ze(t,n,i){return(t%=nt)?n||i?$n(Qn(t),xn(n,i)):Qn(t):n||i?xn(n,i):Tn}function Kn(t){return function(n,i){return n+=t,G(n)>D&&(n-=Math.round(n/nt)*nt),[n,i]}}function Qn(t){var n=Kn(t);return n.invert=Kn(-t),n}function xn(t,n){var i=B(t),e=U(t),r=B(n),o=U(n);function u(s,f){var g=B(f),a=B(s)*g,l=U(s)*g,p=U(f),m=p*i+a*e;return[bt(l*r-m*o,a*i-p*e),At(m*r+l*o)]}return u.invert=function(s,f){var g=B(f),a=B(s)*g,l=U(s)*g,p=U(f),m=p*r-l*o;return[bt(l*r+p*o,a*i+m*e),At(m*i-a*e)]},u}function yi(t){t=ze(t[0]*H,t[1]*H,t.length>2?t[2]*H:0);function n(i){return i=t(i[0]*H,i[1]*H),i[0]*=x,i[1]*=x,i}return n.invert=function(i){return i=t.invert(i[0]*H,i[1]*H),i[0]*=x,i[1]*=x,i},n}function Mi(t,n,i,e,r,o){if(i){var u=B(n),s=U(n),f=e*i;r==null?(r=n+e*nt,o=n-f/2):(r=te(u,r),o=te(u,o),(e>0?r<o:r>o)&&(r+=e*nt));for(var g,a=r;e>0?a>o:a<o;a-=f)g=On([u,-s*B(a),-s*U(a)]),t.point(g[0],g[1])}}function te(t,n){n=Tt(n),n[0]-=t,Cn(n);var i=_i(-n[1]);return((-n[2]<0?-i:i)+nt-V)%nt}function ke(){var t=[],n;return{point:function(i,e,r){n.push([i,e,r])},lineStart:function(){t.push(n=[])},lineEnd:ot,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],n=null,i}}}function Ht(t,n){return G(t[0]-n[0])<V&&G(t[1]-n[1])<V}function qt(t,n,i,e){this.x=t,this.z=n,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function Oe(t,n,i,e,r){var o=[],u=[],s,f;if(t.forEach(function(v){if(!((y=v.length-1)<=0)){var y,S=v[0],M=v[y],d;if(Ht(S,M)){if(!S[2]&&!M[2]){for(r.lineStart(),s=0;s<y;++s)r.point((S=v[s])[0],S[1]);r.lineEnd();return}M[0]+=2*V}o.push(d=new qt(S,v,null,!0)),u.push(d.o=new qt(S,null,d,!1)),o.push(d=new qt(M,v,null,!1)),u.push(d.o=new qt(M,null,d,!0))}}),!!o.length){for(u.sort(n),ne(o),ne(u),s=0,f=u.length;s<f;++s)u[s].e=i=!i;for(var g=o[0],a,l;;){for(var p=g,m=!0;p.v;)if((p=p.n)===g)return;a=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(s=0,f=a.length;s<f;++s)r.point((l=a[s])[0],l[1]);else e(p.x,p.n.x,1,r);p=p.n}else{if(m)for(a=p.p.z,s=a.length-1;s>=0;--s)r.point((l=a[s])[0],l[1]);else e(p.x,p.p.x,-1,r);p=p.p}p=p.o,a=p.z,m=!m}while(!p.v);r.lineEnd()}}}function ne(t){if(n=t.length){for(var n,i=0,e=t[0],r;++i<n;)e.n=r=t[i],r.p=e,e=r;e.n=r=t[0],r.p=e}}function mn(t){return G(t[0])<=D?t[0]:di(t[0])*((G(t[0])+D)%nt-D)}function Si(t,n){var i=mn(n),e=n[1],r=U(e),o=[U(i),-B(i),0],u=0,s=0,f=new yt;r===1?e=Q+V:r===-1&&(e=-Q-V);for(var g=0,a=t.length;g<a;++g)if(p=(l=t[g]).length)for(var l,p,m=l[p-1],v=mn(m),y=m[1]/2+jn,S=U(y),M=B(y),d=0;d<p;++d,v=w,S=k,M=P,m=z){var z=l[d],w=mn(z),C=z[1]/2+jn,k=U(C),P=B(C),R=w-v,L=R>=0?1:-1,J=L*R,N=J>D,Z=S*k;if(f.add(bt(Z*L*U(J),M*P+Z*B(J))),u+=N?R+L*nt:R,N^v>=i^w>=i){var Y=Kt(Tt(m),Tt(z));Cn(Y);var c=Kt(o,Y);Cn(c);var h=(N^R>=0?-1:1)*At(c[2]);(e>h||e===h&&(Y[0]||Y[1]))&&(s+=N^R>=0?1:-1)}}return(u<-V||u<V&&f<-pi)^s&1}function Ce(t,n,i,e){return function(r){var o=n(r),u=ke(),s=n(u),f=!1,g,a,l,p={point:m,lineStart:y,lineEnd:S,polygonStart:function(){p.point=M,p.lineStart=d,p.lineEnd=z,a=[],g=[]},polygonEnd:function(){p.point=m,p.lineStart=y,p.lineEnd=S,a=Ee(a);var w=Si(g,e);a.length?(f||(r.polygonStart(),f=!0),Oe(a,wi,w,i,r)):w&&(f||(r.polygonStart(),f=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),a=g=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function m(w,C){t(w,C)&&r.point(w,C)}function v(w,C){o.point(w,C)}function y(){p.point=v,o.lineStart()}function S(){p.point=m,o.lineEnd()}function M(w,C){l.push([w,C]),s.point(w,C)}function d(){s.lineStart(),l=[]}function z(){M(l[0][0],l[0][1]),s.lineEnd();var w=s.clean(),C=u.result(),k,P=C.length,R,L,J;if(l.pop(),g.push(l),l=null,!!P){if(w&1){if(L=C[0],(R=L.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),k=0;k<R;++k)r.point((J=L[k])[0],J[1]);r.lineEnd()}return}P>1&&w&2&&C.push(C.pop().concat(C.shift())),a.push(C.filter(Ei))}}return p}}function Ei(t){return t.length>1}function wi(t,n){return((t=t.x)[0]<0?t[1]-Q-V:Q-t[1])-((n=n.x)[0]<0?n[1]-Q-V:Q-n[1])}const ee=Ce(function(){return!0},zi,Oi,[-D,-Q]);function zi(t){var n=NaN,i=NaN,e=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,u){var s=o>0?D:-D,f=G(o-n);G(f-D)<V?(t.point(n,i=(i+u)/2>0?Q:-Q),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),r=0):e!==s&&f>=D&&(G(n-e)<V&&(n-=e*V),G(o-s)<V&&(o-=s*V),i=ki(n,i,o,u),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(s,i),r=0),t.point(n=o,i=u),e=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-r}}}function ki(t,n,i,e){var r,o,u=U(t-i);return G(u)>V?we((U(n)*(o=B(e))*U(i)-U(e)*(r=B(n))*U(t))/(r*o*u)):(n+e)/2}function Oi(t,n,i,e){var r;if(t==null)r=i*Q,e.point(-D,r),e.point(0,r),e.point(D,r),e.point(D,0),e.point(D,-r),e.point(0,-r),e.point(-D,-r),e.point(-D,0),e.point(-D,r);else if(G(t[0]-n[0])>V){var o=t[0]<n[0]?D:-D;r=i*o/2,e.point(-o,r),e.point(0,r),e.point(o,r)}else e.point(n[0],n[1])}function Ci(t){var n=B(t),i=2*H,e=n>0,r=G(n)>V;function o(a,l,p,m){Mi(m,t,i,p,a,l)}function u(a,l){return B(a)*B(l)>n}function s(a){var l,p,m,v,y;return{lineStart:function(){v=m=!1,y=1},point:function(S,M){var d=[S,M],z,w=u(S,M),C=e?w?0:g(S,M):w?g(S+(S<0?D:-D),M):0;if(!l&&(v=m=w)&&a.lineStart(),w!==m&&(z=f(l,d),(!z||Ht(l,z)||Ht(d,z))&&(d[2]=1)),w!==m)y=0,w?(a.lineStart(),z=f(d,l),a.point(z[0],z[1])):(z=f(l,d),a.point(z[0],z[1],2),a.lineEnd()),l=z;else if(r&&l&&e^w){var k;!(C&p)&&(k=f(d,l,!0))&&(y=0,e?(a.lineStart(),a.point(k[0][0],k[0][1]),a.point(k[1][0],k[1][1]),a.lineEnd()):(a.point(k[1][0],k[1][1]),a.lineEnd(),a.lineStart(),a.point(k[0][0],k[0][1],3)))}w&&(!l||!Ht(l,d))&&a.point(d[0],d[1]),l=d,m=w,p=C},lineEnd:function(){m&&a.lineEnd(),l=null},clean:function(){return y|(v&&m)<<1}}}function f(a,l,p){var m=Tt(a),v=Tt(l),y=[1,0,0],S=Kt(m,v),M=Xt(S,S),d=S[0],z=M-d*d;if(!z)return!p&&a;var w=n*M/z,C=-n*d/z,k=Kt(y,S),P=Gt(y,w),R=Gt(S,C);gn(P,R);var L=k,J=Xt(P,L),N=Xt(L,L),Z=J*J-N*(Xt(P,P)-1);if(!(Z<0)){var Y=St(Z),c=Gt(L,(-J-Y)/N);if(gn(c,P),c=On(c),!p)return c;var h=a[0],_=l[0],E=a[1],O=l[1],$;_<h&&($=h,h=_,_=$);var F=_-h,I=G(F-D)<V,b=I||F<V;if(!I&&O<E&&($=E,E=O,O=$),b?I?E+O>0^c[1]<(G(c[0]-h)<V?E:O):E<=c[1]&&c[1]<=O:F>D^(h<=c[0]&&c[0]<=_)){var j=Gt(L,(-J+Y)/N);return gn(j,P),[c,On(j)]}}}function g(a,l){var p=e?t:D-t,m=0;return a<-p?m|=1:a>p&&(m|=2),l<-p?m|=4:l>p&&(m|=8),m}return Ce(u,s,o,e?[0,-t]:[-D,t-D])}function $i(t,n,i,e,r,o){var u=t[0],s=t[1],f=n[0],g=n[1],a=0,l=1,p=f-u,m=g-s,v;if(v=i-u,!(!p&&v>0)){if(v/=p,p<0){if(v<a)return;v<l&&(l=v)}else if(p>0){if(v>l)return;v>a&&(a=v)}if(v=r-u,!(!p&&v<0)){if(v/=p,p<0){if(v>l)return;v>a&&(a=v)}else if(p>0){if(v<a)return;v<l&&(l=v)}if(v=e-s,!(!m&&v>0)){if(v/=m,m<0){if(v<a)return;v<l&&(l=v)}else if(m>0){if(v>l)return;v>a&&(a=v)}if(v=o-s,!(!m&&v<0)){if(v/=m,m<0){if(v>l)return;v>a&&(a=v)}else if(m>0){if(v<a)return;v<l&&(l=v)}return a>0&&(t[0]=u+a*p,t[1]=s+a*m),l<1&&(n[0]=u+l*p,n[1]=s+l*m),!0}}}}}var Rt=1e9,Bt=-Rt;function Ti(t,n,i,e){function r(g,a){return t<=g&&g<=i&&n<=a&&a<=e}function o(g,a,l,p){var m=0,v=0;if(g==null||(m=u(g,l))!==(v=u(a,l))||f(g,a)<0^l>0)do p.point(m===0||m===3?t:i,m>1?e:n);while((m=(m+l+4)%4)!==v);else p.point(a[0],a[1])}function u(g,a){return G(g[0]-t)<V?a>0?0:3:G(g[0]-i)<V?a>0?2:1:G(g[1]-n)<V?a>0?1:0:a>0?3:2}function s(g,a){return f(g.x,a.x)}function f(g,a){var l=u(g,1),p=u(a,1);return l!==p?l-p:l===0?a[1]-g[1]:l===1?g[0]-a[0]:l===2?g[1]-a[1]:a[0]-g[0]}return function(g){var a=g,l=ke(),p,m,v,y,S,M,d,z,w,C,k,P={point:R,lineStart:Z,lineEnd:Y,polygonStart:J,polygonEnd:N};function R(h,_){r(h,_)&&a.point(h,_)}function L(){for(var h=0,_=0,E=m.length;_<E;++_)for(var O=m[_],$=1,F=O.length,I=O[0],b,j,q=I[0],W=I[1];$<F;++$)b=q,j=W,I=O[$],q=I[0],W=I[1],j<=e?W>e&&(q-b)*(e-j)>(W-j)*(t-b)&&++h:W<=e&&(q-b)*(e-j)<(W-j)*(t-b)&&--h;return h}function J(){a=l,p=[],m=[],k=!0}function N(){var h=L(),_=k&&h,E=(p=Ee(p)).length;(_||E)&&(g.polygonStart(),_&&(g.lineStart(),o(null,null,1,g),g.lineEnd()),E&&Oe(p,s,h,o,g),g.polygonEnd()),a=g,p=m=v=null}function Z(){P.point=c,m&&m.push(v=[]),C=!0,w=!1,d=z=NaN}function Y(){p&&(c(y,S),M&&w&&l.rejoin(),p.push(l.result())),P.point=R,w&&a.lineEnd()}function c(h,_){var E=r(h,_);if(m&&v.push([h,_]),C)y=h,S=_,M=E,C=!1,E&&(a.lineStart(),a.point(h,_));else if(E&&w)a.point(h,_);else{var O=[d=Math.max(Bt,Math.min(Rt,d)),z=Math.max(Bt,Math.min(Rt,z))],$=[h=Math.max(Bt,Math.min(Rt,h)),_=Math.max(Bt,Math.min(Rt,_))];$i(O,$,t,n,i,e)?(w||(a.lineStart(),a.point(O[0],O[1])),a.point($[0],$[1]),E||a.lineEnd(),k=!1):E&&(a.lineStart(),a.point(h,_),k=!1)}d=h,z=_,w=E}return P}}const Nn=t=>t;var dn=new yt,Pn=new yt,$e,Te,Rn,Fn,mt={point:ot,lineStart:ot,lineEnd:ot,polygonStart:function(){mt.lineStart=Ni,mt.lineEnd=Ri},polygonEnd:function(){mt.lineStart=mt.lineEnd=mt.point=ot,dn.add(G(Pn)),Pn=new yt},result:function(){var t=dn/2;return dn=new yt,t}};function Ni(){mt.point=Pi}function Pi(t,n){mt.point=Ne,$e=Rn=t,Te=Fn=n}function Ne(t,n){Pn.add(Fn*t-Rn*n),Rn=t,Fn=n}function Ri(){Ne($e,Te)}var Nt=1/0,Qt=Nt,Vt=-Nt,xt=Vt,tn={point:Fi,lineStart:ot,lineEnd:ot,polygonStart:ot,polygonEnd:ot,result:function(){var t=[[Nt,Qt],[Vt,xt]];return Vt=xt=-(Qt=Nt=1/0),t}};function Fi(t,n){t<Nt&&(Nt=t),t>Vt&&(Vt=t),n<Qt&&(Qt=n),n>xt&&(xt=n)}var Ln=0,In=0,Ft=0,nn=0,en=0,wt=0,Dn=0,Jn=0,Lt=0,Pe,Re,st,ct,rt={point:Mt,lineStart:ie,lineEnd:re,polygonStart:function(){rt.lineStart=Di,rt.lineEnd=Ji},polygonEnd:function(){rt.point=Mt,rt.lineStart=ie,rt.lineEnd=re},result:function(){var t=Lt?[Dn/Lt,Jn/Lt]:wt?[nn/wt,en/wt]:Ft?[Ln/Ft,In/Ft]:[NaN,NaN];return Ln=In=Ft=nn=en=wt=Dn=Jn=Lt=0,t}};function Mt(t,n){Ln+=t,In+=n,++Ft}function ie(){rt.point=Li}function Li(t,n){rt.point=Ii,Mt(st=t,ct=n)}function Ii(t,n){var i=t-st,e=n-ct,r=St(i*i+e*e);nn+=r*(st+t)/2,en+=r*(ct+n)/2,wt+=r,Mt(st=t,ct=n)}function re(){rt.point=Mt}function Di(){rt.point=bi}function Ji(){Fe(Pe,Re)}function bi(t,n){rt.point=Fe,Mt(Pe=st=t,Re=ct=n)}function Fe(t,n){var i=t-st,e=n-ct,r=St(i*i+e*e);nn+=r*(st+t)/2,en+=r*(ct+n)/2,wt+=r,r=ct*t-st*n,Dn+=r*(st+t),Jn+=r*(ct+n),Lt+=r*3,Mt(st=t,ct=n)}function Le(t){this._context=t}Le.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,nt);break}}},result:ot};var bn=new yt,vn,Ie,De,It,Dt,Yt={point:ot,lineStart:function(){Yt.point=Ai},lineEnd:function(){vn&&Je(Ie,De),Yt.point=ot},polygonStart:function(){vn=!0},polygonEnd:function(){vn=null},result:function(){var t=+bn;return bn=new yt,t}};function Ai(t,n){Yt.point=Je,Ie=It=t,De=Dt=n}function Je(t,n){It-=t,Dt-=n,bn.add(St(It*It+Dt*Dt)),It=t,Dt=n}let oe,rn,ue,le;class ae{constructor(n){this._append=n==null?be:Vi(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,i){switch(this._point){case 0:{this._append`M${n},${i}`,this._point=1;break}case 1:{this._append`L${n},${i}`;break}default:{if(this._append`M${n},${i}`,this._radius!==ue||this._append!==rn){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,ue=e,rn=this._append,le=this._,this._=r}this._+=le;break}}}result(){const n=this._;return this._="",n.length?n:null}}function be(t){let n=1;this._+=t[0];for(const i=t.length;n<i;++n)this._+=arguments[n]+t[n]}function Vi(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return be;if(n!==oe){const i=10**n;oe=n,rn=function(r){let o=1;this._+=r[0];for(const u=r.length;o<u;++o)this._+=Math.round(arguments[o]*i)/i+r[o]}}return rn}function Ae(t,n){let i=3,e=4.5,r,o;function u(s){return s&&(typeof e=="function"&&o.pointRadius(+e.apply(this,arguments)),Et(s,r(o))),o.result()}return u.area=function(s){return Et(s,r(mt)),mt.result()},u.measure=function(s){return Et(s,r(Yt)),Yt.result()},u.bounds=function(s){return Et(s,r(tn)),tn.result()},u.centroid=function(s){return Et(s,r(rt)),rt.result()},u.projection=function(s){return arguments.length?(r=s==null?(t=null,Nn):(t=s).stream,u):t},u.context=function(s){return arguments.length?(o=s==null?(n=null,new ae(i)):new Le(n=s),typeof e!="function"&&o.pointRadius(e),u):n},u.pointRadius=function(s){return arguments.length?(e=typeof s=="function"?s:(o.pointRadius(+s),+s),u):e},u.digits=function(s){if(!arguments.length)return i;if(s==null)i=null;else{const f=Math.floor(s);if(!(f>=0))throw new RangeError(`invalid digits: ${s}`);i=f}return n===null&&(o=new ae(i)),u},u.projection(t).digits(i).context(n)}function Gn(t){return function(n){var i=new An;for(var e in t)i[e]=t[e];return i.stream=n,i}}function An(){}An.prototype={constructor:An,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function qn(t,n,i){var e=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),e!=null&&t.clipExtent(null),Et(i,t.stream(tn)),n(tn.result()),e!=null&&t.clipExtent(e),t}function Ve(t,n,i){return qn(t,function(e){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],u=Math.min(r/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),s=+n[0][0]+(r-u*(e[1][0]+e[0][0]))/2,f=+n[0][1]+(o-u*(e[1][1]+e[0][1]))/2;t.scale(150*u).translate([s,f])},i)}function Yi(t,n,i){return Ve(t,[[0,0],n],i)}function Xi(t,n,i){return qn(t,function(e){var r=+n,o=r/(e[1][0]-e[0][0]),u=(r-o*(e[1][0]+e[0][0]))/2,s=-o*e[0][1];t.scale(150*o).translate([u,s])},i)}function Gi(t,n,i){return qn(t,function(e){var r=+n,o=r/(e[1][1]-e[0][1]),u=-o*e[0][0],s=(r-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([u,s])},i)}var se=16,qi=B(30*H);function ce(t,n){return+n?Ui(t,n):Bi(t)}function Bi(t){return Gn({point:function(n,i){n=t(n,i),this.stream.point(n[0],n[1])}})}function Ui(t,n){function i(e,r,o,u,s,f,g,a,l,p,m,v,y,S){var M=g-e,d=a-r,z=M*M+d*d;if(z>4*n&&y--){var w=u+p,C=s+m,k=f+v,P=St(w*w+C*C+k*k),R=At(k/=P),L=G(G(k)-1)<V||G(o-l)<V?(o+l)/2:bt(C,w),J=t(L,R),N=J[0],Z=J[1],Y=N-e,c=Z-r,h=d*Y-M*c;(h*h/z>n||G((M*Y+d*c)/z-.5)>.3||u*p+s*m+f*v<qi)&&(i(e,r,o,u,s,f,N,Z,L,w/=P,C/=P,k,y,S),S.point(N,Z),i(N,Z,L,w,C,k,g,a,l,p,m,v,y,S))}}return function(e){var r,o,u,s,f,g,a,l,p,m,v,y,S={point:M,lineStart:d,lineEnd:w,polygonStart:function(){e.polygonStart(),S.lineStart=C},polygonEnd:function(){e.polygonEnd(),S.lineStart=d}};function M(R,L){R=t(R,L),e.point(R[0],R[1])}function d(){l=NaN,S.point=z,e.lineStart()}function z(R,L){var J=Tt([R,L]),N=t(R,L);i(l,p,a,m,v,y,l=N[0],p=N[1],a=R,m=J[0],v=J[1],y=J[2],se,e),e.point(l,p)}function w(){S.point=M,e.lineEnd()}function C(){d(),S.point=k,S.lineEnd=P}function k(R,L){z(r=R,L),o=l,u=p,s=m,f=v,g=y,S.point=z}function P(){i(l,p,a,m,v,y,o,u,r,s,f,g,se,e),S.lineEnd=w,w()}return S}}var ji=Gn({point:function(t,n){this.stream.point(t*H,n*H)}});function Hi(t){return Gn({point:function(n,i){var e=t(n,i);return this.stream.point(e[0],e[1])}})}function Wi(t,n,i,e,r){function o(u,s){return u*=e,s*=r,[n+t*u,i-t*s]}return o.invert=function(u,s){return[(u-n)/t*e,(i-s)/t*r]},o}function fe(t,n,i,e,r,o){if(!o)return Wi(t,n,i,e,r);var u=B(o),s=U(o),f=u*t,g=s*t,a=u/t,l=s/t,p=(s*i-u*n)/t,m=(s*n+u*i)/t;function v(y,S){return y*=e,S*=r,[f*y-g*S+n,i-g*y-f*S]}return v.invert=function(y,S){return[e*(a*y-l*S+p),r*(m-l*y-a*S)]},v}function Zi(t){return Ki(function(){return t})()}function Ki(t){var n,i=150,e=480,r=250,o=0,u=0,s=0,f=0,g=0,a,l=0,p=1,m=1,v=null,y=ee,S=null,M,d,z,w=Nn,C=.5,k,P,R,L,J;function N(h){return R(h[0]*H,h[1]*H)}function Z(h){return h=R.invert(h[0],h[1]),h&&[h[0]*x,h[1]*x]}N.stream=function(h){return L&&J===h?L:L=ji(Hi(a)(y(k(w(J=h)))))},N.preclip=function(h){return arguments.length?(y=h,v=void 0,c()):y},N.postclip=function(h){return arguments.length?(w=h,S=M=d=z=null,c()):w},N.clipAngle=function(h){return arguments.length?(y=+h?Ci(v=h*H):(v=null,ee),c()):v*x},N.clipExtent=function(h){return arguments.length?(w=h==null?(S=M=d=z=null,Nn):Ti(S=+h[0][0],M=+h[0][1],d=+h[1][0],z=+h[1][1]),c()):S==null?null:[[S,M],[d,z]]},N.scale=function(h){return arguments.length?(i=+h,Y()):i},N.translate=function(h){return arguments.length?(e=+h[0],r=+h[1],Y()):[e,r]},N.center=function(h){return arguments.length?(o=h[0]%360*H,u=h[1]%360*H,Y()):[o*x,u*x]},N.rotate=function(h){return arguments.length?(s=h[0]%360*H,f=h[1]%360*H,g=h.length>2?h[2]%360*H:0,Y()):[s*x,f*x,g*x]},N.angle=function(h){return arguments.length?(l=h%360*H,Y()):l*x},N.reflectX=function(h){return arguments.length?(p=h?-1:1,Y()):p<0},N.reflectY=function(h){return arguments.length?(m=h?-1:1,Y()):m<0},N.precision=function(h){return arguments.length?(k=ce(P,C=h*h),c()):St(C)},N.fitExtent=function(h,_){return Ve(N,h,_)},N.fitSize=function(h,_){return Yi(N,h,_)},N.fitWidth=function(h,_){return Xi(N,h,_)},N.fitHeight=function(h,_){return Gi(N,h,_)};function Y(){var h=fe(i,0,0,p,m,l).apply(null,n(o,u)),_=fe(i,e-h[0],r-h[1],p,m,l);return a=ze(s,f,g),P=$n(n,_),R=$n(a,P),k=ce(P,C),c()}function c(){return L=J=null,N}return function(){return n=t.apply(this,arguments),N.invert=n.invert&&Z,Y()}}function Bn(t,n){return[t,mi(vi((Q+n)/2))]}Bn.invert=function(t,n){return[t,2*we(gi(n))-Q]};function Qi(){return xi(Bn).scale(961/nt)}function xi(t){var n=Zi(t),i=n.center,e=n.scale,r=n.translate,o=n.clipExtent,u=null,s,f,g;n.scale=function(l){return arguments.length?(e(l),a()):e()},n.translate=function(l){return arguments.length?(r(l),a()):r()},n.center=function(l){return arguments.length?(i(l),a()):i()},n.clipExtent=function(l){return arguments.length?(l==null?u=s=f=g=null:(u=+l[0][0],s=+l[0][1],f=+l[1][0],g=+l[1][1]),a()):u==null?null:[[u,s],[f,g]]};function a(){var l=D*e(),p=n(yi(n.rotate()).invert([0,0]));return o(u==null?[[p[0]-l,p[1]-l],[p[0]+l,p[1]+l]]:t===Bn?[[Math.max(p[0]-l,u),s],[Math.min(p[0]+l,f),g]]:[[u,Math.max(p[1]-l,s)],[f,Math.min(p[1]+l,g)]])}return a()}const Ut=t=>()=>t;function tr(t,{sourceEvent:n,target:i,transform:e,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:r}})}function _n(t){t.stopImmediatePropagation()}function Pt(t){t.preventDefault(),t.stopImmediatePropagation()}function nr(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function er(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function he(){return this.__zoom||Xn}function ir(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function rr(){return navigator.maxTouchPoints||"ontouchstart"in this}function or(t,n,i){var e=t.invertX(n[0][0])-i[0][0],r=t.invertX(n[1][0])-i[1][0],o=t.invertY(n[0][1])-i[0][1],u=t.invertY(n[1][1])-i[1][1];return t.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function ur(){var t=nr,n=er,i=or,e=ir,r=rr,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],s=250,f=ci,g=Qe("start","zoom","end"),a,l,p,m=500,v=150,y=0,S=10;function M(c){c.property("__zoom",he).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",J).filter(r).on("touchstart.zoom",N).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(c,h,_,E){var O=c.selection?c.selection():c;O.property("__zoom",he),c!==O?C(c,h,_,E):O.interrupt().each(function(){k(this,arguments).event(E).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},M.scaleBy=function(c,h,_,E){M.scaleTo(c,function(){var O=this.__zoom.k,$=typeof h=="function"?h.apply(this,arguments):h;return O*$},_,E)},M.scaleTo=function(c,h,_,E){M.transform(c,function(){var O=n.apply(this,arguments),$=this.__zoom,F=_==null?w(O):typeof _=="function"?_.apply(this,arguments):_,I=$.invert(F),b=typeof h=="function"?h.apply(this,arguments):h;return i(z(d($,b),F,I),O,u)},_,E)},M.translateBy=function(c,h,_,E){M.transform(c,function(){return i(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof _=="function"?_.apply(this,arguments):_),n.apply(this,arguments),u)},null,E)},M.translateTo=function(c,h,_,E,O){M.transform(c,function(){var $=n.apply(this,arguments),F=this.__zoom,I=E==null?w($):typeof E=="function"?E.apply(this,arguments):E;return i(Xn.translate(I[0],I[1]).scale(F.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof _=="function"?-_.apply(this,arguments):-_),$,u)},E,O)};function d(c,h){return h=Math.max(o[0],Math.min(o[1],h)),h===c.k?c:new hn(h,c.x,c.y)}function z(c,h,_){var E=h[0]-_[0]*c.k,O=h[1]-_[1]*c.k;return E===c.x&&O===c.y?c:new hn(c.k,E,O)}function w(c){return[(+c[0][0]+ +c[1][0])/2,(+c[0][1]+ +c[1][1])/2]}function C(c,h,_,E){c.on("start.zoom",function(){k(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(E).end()}).tween("zoom",function(){var O=this,$=arguments,F=k(O,$).event(E),I=n.apply(O,$),b=_==null?w(I):typeof _=="function"?_.apply(O,$):_,j=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),q=O.__zoom,W=typeof h=="function"?h.apply(O,$):h,ht=f(q.invert(b).concat(j/q.k),W.invert(b).concat(j/W.k));return function(ut){if(ut===1)ut=W;else{var pt=ht(ut),an=j/pt[2];ut=new hn(an,b[0]-pt[0]*an,b[1]-pt[1]*an)}F.zoom(null,ut)}})}function k(c,h,_){return!_&&c.__zooming||new P(c,h)}function P(c,h){this.that=c,this.args=h,this.active=0,this.sourceEvent=null,this.extent=n.apply(c,h),this.taps=0}P.prototype={event:function(c){return c&&(this.sourceEvent=c),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(c,h){return this.mouse&&c!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&c!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&c!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(c){var h=gt(this.that).datum();g.call(c,this.that,new tr(c,{sourceEvent:this.sourceEvent,target:M,type:c,transform:this.that.__zoom,dispatch:g}),h)}};function R(c,...h){if(!t.apply(this,arguments))return;var _=k(this,h).event(c),E=this.__zoom,O=Math.max(o[0],Math.min(o[1],E.k*Math.pow(2,e.apply(this,arguments)))),$=_t(c);if(_.wheel)(_.mouse[0][0]!==$[0]||_.mouse[0][1]!==$[1])&&(_.mouse[1]=E.invert(_.mouse[0]=$)),clearTimeout(_.wheel);else{if(E.k===O)return;_.mouse=[$,E.invert($)],pn(this),_.start()}Pt(c),_.wheel=setTimeout(F,v),_.zoom("mouse",i(z(d(E,O),_.mouse[0],_.mouse[1]),_.extent,u));function F(){_.wheel=null,_.end()}}function L(c,...h){if(p||!t.apply(this,arguments))return;var _=c.currentTarget,E=k(this,h,!0).event(c),O=gt(c.view).on("mousemove.zoom",b,!0).on("mouseup.zoom",j,!0),$=_t(c,_),F=c.clientX,I=c.clientY;oi(c.view),_n(c),E.mouse=[$,this.__zoom.invert($)],pn(this),E.start();function b(q){if(Pt(q),!E.moved){var W=q.clientX-F,ht=q.clientY-I;E.moved=W*W+ht*ht>y}E.event(q).zoom("mouse",i(z(E.that.__zoom,E.mouse[0]=_t(q,_),E.mouse[1]),E.extent,u))}function j(q){O.on("mousemove.zoom mouseup.zoom",null),ui(q.view,E.moved),Pt(q),E.event(q).end()}}function J(c,...h){if(t.apply(this,arguments)){var _=this.__zoom,E=_t(c.changedTouches?c.changedTouches[0]:c,this),O=_.invert(E),$=_.k*(c.shiftKey?.5:2),F=i(z(d(_,$),E,O),n.apply(this,h),u);Pt(c),s>0?gt(this).transition().duration(s).call(C,F,E,c):gt(this).call(M.transform,F,E,c)}}function N(c,...h){if(t.apply(this,arguments)){var _=c.touches,E=_.length,O=k(this,h,c.changedTouches.length===E).event(c),$,F,I,b;for(_n(c),F=0;F<E;++F)I=_[F],b=_t(I,this),b=[b,this.__zoom.invert(b),I.identifier],O.touch0?!O.touch1&&O.touch0[2]!==b[2]&&(O.touch1=b,O.taps=0):(O.touch0=b,$=!0,O.taps=1+!!a);a&&(a=clearTimeout(a)),$&&(O.taps<2&&(l=b[0],a=setTimeout(function(){a=null},m)),pn(this),O.start())}}function Z(c,...h){if(this.__zooming){var _=k(this,h).event(c),E=c.changedTouches,O=E.length,$,F,I,b;for(Pt(c),$=0;$<O;++$)F=E[$],I=_t(F,this),_.touch0&&_.touch0[2]===F.identifier?_.touch0[0]=I:_.touch1&&_.touch1[2]===F.identifier&&(_.touch1[0]=I);if(F=_.that.__zoom,_.touch1){var j=_.touch0[0],q=_.touch0[1],W=_.touch1[0],ht=_.touch1[1],ut=(ut=W[0]-j[0])*ut+(ut=W[1]-j[1])*ut,pt=(pt=ht[0]-q[0])*pt+(pt=ht[1]-q[1])*pt;F=d(F,Math.sqrt(ut/pt)),I=[(j[0]+W[0])/2,(j[1]+W[1])/2],b=[(q[0]+ht[0])/2,(q[1]+ht[1])/2]}else if(_.touch0)I=_.touch0[0],b=_.touch0[1];else return;_.zoom("touch",i(z(F,I,b),_.extent,u))}}function Y(c,...h){if(this.__zooming){var _=k(this,h).event(c),E=c.changedTouches,O=E.length,$,F;for(_n(c),p&&clearTimeout(p),p=setTimeout(function(){p=null},m),$=0;$<O;++$)F=E[$],_.touch0&&_.touch0[2]===F.identifier?delete _.touch0:_.touch1&&_.touch1[2]===F.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(F=_t(F,this),Math.hypot(l[0]-F[0],l[1]-F[1])<S)){var I=gt(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return M.wheelDelta=function(c){return arguments.length?(e=typeof c=="function"?c:Ut(+c),M):e},M.filter=function(c){return arguments.length?(t=typeof c=="function"?c:Ut(!!c),M):t},M.touchable=function(c){return arguments.length?(r=typeof c=="function"?c:Ut(!!c),M):r},M.extent=function(c){return arguments.length?(n=typeof c=="function"?c:Ut([[+c[0][0],+c[0][1]],[+c[1][0],+c[1][1]]]),M):n},M.scaleExtent=function(c){return arguments.length?(o[0]=+c[0],o[1]=+c[1],M):[o[0],o[1]]},M.translateExtent=function(c){return arguments.length?(u[0][0]=+c[0][0],u[1][0]=+c[1][0],u[0][1]=+c[0][1],u[1][1]=+c[1][1],M):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},M.constrain=function(c){return arguments.length?(i=c,M):i},M.duration=function(c){return arguments.length?(s=+c,M):s},M.interpolate=function(c){return arguments.length?(f=c,M):f},M.on=function(){var c=g.on.apply(g,arguments);return c===g?M:c},M.clickDistance=function(c){return arguments.length?(y=(c=+c)*c,M):Math.sqrt(y)},M.tapDistance=function(c){return arguments.length?(S=+c,M):S},M}function pe(t,n,i){const e=t.slice();return e[15]=n[i],e}function lr(t){let n,i,e;return{c(){n=et("circle"),this.h()},l(r){n=it(r,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),K(n).forEach(A),this.h()},h(){T(n,"cx",i=t[0](t[15])[0]),T(n,"cy",e=t[0](t[15])[1]),T(n,"r","30"),T(n,"fill","#599FF0")},m(r,o){tt(r,n,o)},p(r,o){o&33&&i!==(i=r[0](r[15])[0])&&T(n,"cx",i),o&33&&e!==(e=r[0](r[15])[1])&&T(n,"cy",e)},d(r){r&&A(n)}}}function ar(t){let n;function i(o,u){return o[2]?cr:sr}let e=i(t),r=e(t);return{c(){r.c(),n=vt()},l(o){r.l(o),n=vt()},m(o,u){r.m(o,u),tt(o,n,u)},p(o,u){e===(e=i(o))&&r?r.p(o,u):(r.d(1),r=e(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){o&&A(n),r.d(o)}}}function sr(t){let n,i;return{c(){n=et("path"),this.h()},l(e){n=it(e,"path",{d:!0,class:!0}),K(n).forEach(A),this.h()},h(){T(n,"d",i=t[6](t[15])),T(n,"class","svelte-ndv55b")},m(e,r){tt(e,n,r)},p(e,r){r&96&&i!==(i=e[6](e[15]))&&T(n,"d",i)},d(e){e&&A(n)}}}function cr(t){let n,i,e,r;return{c(){n=et("path"),this.h()},l(o){n=it(o,"path",{d:!0,class:!0}),K(n).forEach(A),this.h()},h(){T(n,"d",i=t[6](t[15])),T(n,"class","svelte-ndv55b"),dt(n,"hover",t[15].properties&&t[15].properties.id&&t[7]==t[15].properties.id)},m(o,u){tt(o,n,u),e||(r=[jt(n,"mouseover",function(){sn(t[8](t[15]))&&t[8](t[15]).apply(this,arguments)}),jt(n,"mouseout",function(){sn(t[9](t[15]))&&t[9](t[15]).apply(this,arguments)}),jt(n,"click",function(){sn(t[10](t[15]))&&t[10](t[15]).apply(this,arguments)})],e=!0)},p(o,u){t=o,u&96&&i!==(i=t[6](t[15]))&&T(n,"d",i),u&160&&dt(n,"hover",t[15].properties&&t[15].properties.id&&t[7]==t[15].properties.id)},d(o){o&&A(n),e=!1,Xe(r)}}}function ge(t){let n;function i(o,u){return o[4]=="polygons"?ar:lr}let e=i(t),r=e(t);return{c(){r.c(),n=vt()},l(o){r.l(o),n=vt()},m(o,u){r.m(o,u),tt(o,n,u)},p(o,u){e===(e=i(o))&&r?r.p(o,u):(r.d(1),r=e(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){o&&A(n),r.d(o)}}}function fr(t){let n,i,e,r,o,u=$t(t[5]),s=[];for(let f=0;f<u.length;f+=1)s[f]=ge(pe(t,u,f));return{c(){n=et("g"),i=et("pattern"),e=et("circle"),r=et("pattern"),o=et("circle");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){n=it(f,"g",{class:!0,id:!0});var g=K(n);i=it(g,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var a=K(i);e=it(a,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),K(e).forEach(A),a.forEach(A),r=it(g,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var l=K(r);o=it(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),K(o).forEach(A),l.forEach(A);for(let p=0;p<s.length;p+=1)s[p].l(g);g.forEach(A),this.h()},h(){T(e,"cx","1"),T(e,"cy","1"),T(e,"r","3"),T(e,"fill","#A060C1"),T(i,"id","circles-urban-industrial-era"),T(i,"x","0"),T(i,"y","0"),T(i,"width","5"),T(i,"height","5"),T(i,"patternUnits","userSpaceOnUse"),T(o,"cx","50"),T(o,"cy","50"),T(o,"r","20"),T(o,"fill","#599FF0"),T(r,"id","circles-pre-1600s"),T(r,"x","0"),T(r,"y","0"),T(r,"width","50"),T(r,"height","50"),T(r,"patternUnits","userSpaceOnUse"),T(n,"class","map-svg-g svelte-ndv55b"),T(n,"id",t[1]),dt(n,"visible",t[3]),dt(n,"hidden",!t[3])},m(f,g){tt(f,n,g),at(n,i),at(i,e),at(n,r),at(r,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null)},p(f,[g]){if(g&2037){u=$t(f[5]);let a;for(a=0;a<u.length;a+=1){const l=pe(f,u,a);s[a]?s[a].p(l,g):(s[a]=ge(l),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=u.length}g&2&&T(n,"id",f[1]),g&8&&dt(n,"visible",f[3]),g&8&&dt(n,"hidden",!f[3])},i:Jt,o:Jt,d(f){f&&A(n),Vn(s,f)}}}function hr(t,n,i){let{url:e=""}=n,{projection:r}=n,{id:o}=n,{interactive:u=!1}=n,{visible:s=!1}=n,{geometryType:f="polygons"}=n;function g(d){console.log("Map(id: "+o+"):onChapterMouseOver(event:"+JSON.stringify(d.detail)+")"),i(7,m=d.detail.id)}function a(d){console.log("Map(id: "+o+"):onChapterMouseLeave(event:"+JSON.stringify(d.detail)+")"),i(7,m=null)}let l=[],p=null,m=null;const v=Yn();Se(()=>{hi(ei+e).then(d=>{i(5,l=d.features),i(6,p=Ae().projection(r))})});function y(d){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(d)+")"),d.properties&&d.properties.id&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(d.properties.id)+")"),v("featureMouseOver",{mapID:o,featureID:d.properties&&d.properties.id?d.properties.id:"?"})}function S(d){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(d)+")"),d.properties&&d.properties.id&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(d.properties.id)+")"),v("featureMouseOut",{mapID:o,featureID:d.properties&&d.properties.id?d.properties.id:"?"})}function M(d){console.log("Map:onFeatureClick(feature:"+JSON.stringify(d)+")"),v("featureClick",{mapID:o,featureID:d.properties&&d.properties.id?d.properties.id:"?"})}return t.$$set=d=>{"url"in d&&i(11,e=d.url),"projection"in d&&i(0,r=d.projection),"id"in d&&i(1,o=d.id),"interactive"in d&&i(2,u=d.interactive),"visible"in d&&i(3,s=d.visible),"geometryType"in d&&i(4,f=d.geometryType)},[r,o,u,s,f,l,p,m,y,S,M,e,g,a]}class Ye extends un{constructor(n){super(),ln(this,n,hr,fr,on,{url:11,projection:0,id:1,interactive:2,visible:3,geometryType:4,onChapterMouseOver:12,onChapterMouseLeave:13})}get onChapterMouseOver(){return this.$$.ctx[12]}get onChapterMouseLeave(){return this.$$.ctx[13]}}function pr(t){return t.k}function gr(t){return[t.x,t.y]}function me(t){return function(){return t}}function mr(){let t=0,n=0,i=960,e=500,r=!0,o=!0,u=256,s=pr,f=gr,g=0;function a(){const l=+s.apply(this,arguments),p=f.apply(this,arguments),m=Math.log2(l/u),v=Math.round(Math.max(m+g,0)),y=Math.pow(2,m-v)*u,S=+p[0]-l/2,M=+p[1]-l/2,d=Math.max(r?0:-1/0,Math.floor((t-S)/y)),z=Math.min(r?1<<v:1/0,Math.ceil((i-S)/y)),w=Math.max(o?0:-1/0,Math.floor((n-M)/y)),C=Math.min(o?1<<v:1/0,Math.ceil((e-M)/y)),k=[];for(let P=w;P<C;++P)for(let R=d;R<z;++R)k.push([R,P,v]);return k.translate=[S/y,M/y],k.scale=y,k}return a.size=function(l){return arguments.length?(t=n=0,i=+l[0],e=+l[1],a):[i-t,e-n]},a.extent=function(l){return arguments.length?(t=+l[0][0],n=+l[0][1],i=+l[1][0],e=+l[1][1],a):[[t,n],[i,e]]},a.scale=function(l){return arguments.length?(s=typeof l=="function"?l:me(+l),a):s},a.translate=function(l){return arguments.length?(f=typeof l=="function"?l:me([+l[0],+l[1]]),a):f},a.zoomDelta=function(l){return arguments.length?(g=+l,a):g},a.tileSize=function(l){return arguments.length?(u=+l,a):u},a.clamp=function(l){return arguments.length?(r=o=!!l,a):r&&o},a.clampX=function(l){return arguments.length?(r=!!l,a):r},a.clampY=function(l){return arguments.length?(o=!!l,a):o},a}function de(t,n,i){const e=t.slice();e[11]=n[i];const r=vr(e[11],e[1]);return e[12]=r[0],e[13]=r[1],e}function ve(t){let n;return{c(){n=et("image"),this.h()},l(i){n=it(i,"image",{"xlink:href":!0,x:!0,y:!0,width:!0,height:!0,class:!0}),K(n).forEach(A),this.h()},h(){Ge(n,"xlink:href",t[3](...t[11])),T(n,"x",t[12]),T(n,"y",t[13]),T(n,"width",t[2]),T(n,"height",t[2]),T(n,"class","svelte-511esr")},m(i,e){tt(i,n,e)},p:Jt,d(i){i&&A(n)}}}function dr(t){let n,i=$t(t[1]),e=[];for(let r=0;r<i.length;r+=1)e[r]=ve(de(t,i,r));return{c(){n=et("g");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){n=it(r,"g",{class:!0});var o=K(n);for(let u=0;u<e.length;u+=1)e[u].l(o);o.forEach(A),this.h()},h(){T(n,"class","map-svg-g svelte-511esr"),dt(n,"visible",t[0])},m(r,o){tt(r,n,o);for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(n,null)},p(r,[o]){if(o&14){i=$t(r[1]);let u;for(u=0;u<i.length;u+=1){const s=de(r,i,u);e[u]?e[u].p(s,o):(e[u]=ve(s),e[u].c(),e[u].m(n,null))}for(;u<e.length;u+=1)e[u].d(1);e.length=i.length}o&1&&dt(n,"visible",r[0])},i:Jt,o:Jt,d(r){r&&A(n),Vn(e,r)}}}function vr(t,n){const[i,e]=t,{translate:[r,o],scale:u}=n;return[(i+r)*u,(e+o)*u]}function _r(t,n,i){let{urlPath:e}=n,{urlExtension:r}=n,{projection:o}=n,{visible:u=!1}=n;Yn(),Se(()=>{});const f=mr().size([2e3,1e3]).scale(o.scale()*2*Math.PI).translate(o([0,0]))(),{translate:[g,a],scale:l}=f;console.log(`tx:${g}, ty:${a}, k:${l}`);for(const[m,v,y]of f)console.log(`tile ${m}/${v}/${y} is at ${(m+g)*l}, ${(v+a)*l}`);const p=(m,v,y)=>`${e}${y}/${m}/${v}.${r}`;return t.$$set=m=>{"urlPath"in m&&i(4,e=m.urlPath),"urlExtension"in m&&i(5,r=m.urlExtension),"projection"in m&&i(6,o=m.projection),"visible"in m&&i(0,u=m.visible)},[u,f,l,p,e,r,o]}class yr extends un{constructor(n){super(),ln(this,n,_r,dr,on,{urlPath:4,urlExtension:5,projection:6,visible:0})}}function _e(t,n,i){const e=t.slice();return e[15]=n[i],e}function Mr(t){let n,i;return n=new yr({props:{urlPath:t[15].urlPath,urlExtension:t[15].urlExtension,projection:t[3],visible:X.views[t[2]].maps&&X.views[t[2]].maps.includes(t[15].id)}}),{c(){zt(n.$$.fragment)},l(e){kt(n.$$.fragment,e)},m(e,r){Ot(n,e,r),i=!0},p(e,r){const o={};r&4&&(o.visible=X.views[e[2]].maps&&X.views[e[2]].maps.includes(e[15].id)),n.$set(o)},i(e){i||(lt(n.$$.fragment,e),i=!0)},o(e){ft(n.$$.fragment,e),i=!1},d(e){Ct(n,e)}}}function Sr(t){let n,i,e,r;const o=[wr,Er],u=[];function s(f,g){return f[15].interactive?0:1}return n=s(t),i=u[n]=o[n](t),{c(){i.c(),e=vt()},l(f){i.l(f),e=vt()},m(f,g){u[n].m(f,g),tt(f,e,g),r=!0},p(f,g){i.p(f,g)},i(f){r||(lt(i),r=!0)},o(f){ft(i),r=!1},d(f){f&&A(e),u[n].d(f)}}}function Er(t){let n,i;return n=new Ye({props:{url:t[15].url,geometryType:t[15].geometryType?t[15].geometryType:"polygons",id:t[15].id,projection:t[3],visible:X.views[t[2]].maps&&X.views[t[2]].maps.includes(t[15].id)}}),{c(){zt(n.$$.fragment)},l(e){kt(n.$$.fragment,e)},m(e,r){Ot(n,e,r),i=!0},p(e,r){const o={};r&4&&(o.visible=X.views[e[2]].maps&&X.views[e[2]].maps.includes(e[15].id)),n.$set(o)},i(e){i||(lt(n.$$.fragment,e),i=!0)},o(e){ft(n.$$.fragment,e),i=!1},d(e){Ct(n,e)}}}function wr(t){let n,i,e={url:t[15].url,geometryType:t[15].geometryType?t[15].geometryType:"polygons",id:t[15].id,projection:t[3],visible:X.views[t[2]].maps&&X.views[t[2]].maps.includes(t[15].id),interactive:!0};return n=new Ye({props:e}),t[10](n),n.$on("featureMouseOver",t[4]),n.$on("featureMouseOut",t[5]),n.$on("featureClick",t[6]),{c(){zt(n.$$.fragment)},l(r){kt(n.$$.fragment,r)},m(r,o){Ot(n,r,o),i=!0},p(r,o){const u={};o&4&&(u.visible=X.views[r[2]].maps&&X.views[r[2]].maps.includes(r[15].id)),n.$set(u)},i(r){i||(lt(n.$$.fragment,r),i=!0)},o(r){ft(n.$$.fragment,r),i=!1},d(r){t[10](null),Ct(n,r)}}}function ye(t){let n,i,e,r;const o=[Sr,Mr],u=[];function s(f,g){return f[15].type=="shapefile"?0:f[15].type=="tile"?1:-1}return~(n=s(t))&&(i=u[n]=o[n](t)),{c(){i&&i.c(),e=vt()},l(f){i&&i.l(f),e=vt()},m(f,g){~n&&u[n].m(f,g),tt(f,e,g),r=!0},p(f,g){i&&i.p(f,g)},i(f){r||(lt(i),r=!0)},o(f){ft(i),r=!1},d(f){f&&A(e),~n&&u[n].d(f)}}}function zr(t){let n,i,e,r=X.views[t[2]].name+"",o,u,s,f,g,a=$t(Object.values(X.maps)),l=[];for(let m=0;m<a.length;m+=1)l[m]=ye(_e(t,a,m));const p=m=>ft(l[m],1,1,()=>{l[m]=null});return{c(){n=cn("div"),i=cn("div"),e=cn("h1"),o=qe(r),u=Sn(),s=et("svg"),f=et("g");for(let m=0;m<l.length;m+=1)l[m].c();this.h()},l(m){n=fn(m,"DIV",{id:!0,class:!0});var v=K(n);i=fn(v,"DIV",{id:!0,class:!0});var y=K(i);e=fn(y,"H1",{class:!0});var S=K(e);o=Be(S,r),S.forEach(A),y.forEach(A),u=En(v),s=it(v,"svg",{id:!0,class:!0});var M=K(s);f=it(M,"g",{});var d=K(f);for(let z=0;z<l.length;z+=1)l[z].l(d);d.forEach(A),M.forEach(A),v.forEach(A),this.h()},h(){T(e,"class","svelte-1deeijh"),T(i,"id","story-narrative"),T(i,"class","svelte-1deeijh"),T(s,"id","map-svg"),T(s,"class","svelte-1deeijh"),T(n,"id","map"),T(n,"class","svelte-1deeijh")},m(m,v){tt(m,n,v),at(n,i),at(i,e),at(e,o),at(n,u),at(n,s),at(s,f);for(let y=0;y<l.length;y+=1)l[y]&&l[y].m(f,null);t[11](f),g=!0},p(m,[v]){if((!g||v&4)&&r!==(r=X.views[m[2]].name+"")&&Ue(o,r),v&125){a=$t(Object.values(X.maps));let y;for(y=0;y<a.length;y+=1){const S=_e(m,a,y);l[y]?(l[y].p(S,v),lt(l[y],1)):(l[y]=ye(S),l[y].c(),lt(l[y],1),l[y].m(f,null))}for(He(),y=a.length;y<l.length;y+=1)p(y);We()}},i(m){if(!g){for(let v=0;v<a.length;v+=1)lt(l[v]);g=!0}},o(m){l=l.filter(Boolean);for(let v=0;v<l.length;v+=1)ft(l[v]);g=!1},d(m){m&&A(n),Vn(l,m),t[11](null)}}}let yn=800,Mn=600;function Me(t){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[[[t.nwLng,t.nwLat],[t.seLng,t.nwLat],[t.seLng,t.seLat],[t.nwLng,t.seLat],[t.nwLng,t.nwLat]]],type:"Polygon"}}]}}function kr(t,n,i){function e(d){console.log("Maps:onChapterMouseOver(event:"+JSON.stringify(d.detail)+")"),u&&u.onChapterMouseOver(d)}function r(d){console.log("Maps:onChapterMouseLeave(event:"+JSON.stringify(d.detail)+")"),u&&u.onChapterMouseLeave(d)}function o(d){if(console.log(`Maps:onEraClick(event:${JSON.stringify(d.detail)})`),i(2,g=X.views[d.detail.id].id),X.views[g].extent){console.log(`Maps:onEraClick(era.extent:${JSON.stringify(X.views[g].extent)})`);const w=Me(X.views[g].extent);var z=Ae().projection(p);const C=z.bounds(w),[[k,P],[R,L]]=C;gt(s).transition().duration(3e3).ease(xe).call(f.transform,Xn.translate(yn/2,Mn/2).scale(.9/Math.max((R-k)/yn,(L-P)/Mn)).translate(-(k+R)/2,-(P+L)/2))}}let u,s,f,g=X.intialView;f=ur().on("zoom",l);const a=Yn();function l(d){const{transform:z}=d;gt(s).attr("transform",z)}const p=Qi().rotate([74,0]).fitSize([yn,Mn],Me(X.views[X.intialView].extent));function m(d){console.log("Maps:onFeatureMouseOver(event.detail:"+JSON.stringify(d.detail)+")"),a("featureMouseOver",d.detail)}function v(d){console.log("Maps:onFeatureMouseOut(event.detail:"+JSON.stringify(d.detail)+")"),a("featureMouseOut",d.detail)}function y(d){console.log("Maps:onFeatureClick(event.detail:"+JSON.stringify(d.detail)+")"),a("featureClick",d.detail)}function S(d){Wt[d?"unshift":"push"](()=>{u=d,i(0,u)})}function M(d){Wt[d?"unshift":"push"](()=>{s=d,i(1,s)})}return[u,s,g,p,m,v,y,e,r,o,S,M]}class Or extends un{constructor(n){super(),ln(this,n,kr,zr,on,{onChapterMouseOver:7,onChapterMouseLeave:8,onEraClick:9})}get onChapterMouseOver(){return this.$$.ctx[7]}get onChapterMouseLeave(){return this.$$.ctx[8]}get onEraClick(){return this.$$.ctx[9]}}function Cr(t){let n,i,e,r,o,u,s,f;n=new ti({}),n.$on("eraClick",t[7]);let g={};e=new Or({props:g}),t[9](e),e.$on("featureMouseOver",t[2]),e.$on("featureMouseOut",t[3]),e.$on("featureClick",t[6]);let a={};return o=new ni({props:a}),t[10](o),o.$on("chapterMouseOver",t[4]),o.$on("chapterMouseLeave",t[5]),o.$on("eraClick",t[7]),{c(){zt(n.$$.fragment),i=Sn(),zt(e.$$.fragment),r=Sn(),zt(o.$$.fragment)},l(l){kt(n.$$.fragment,l),i=En(l),kt(e.$$.fragment,l),r=En(l),kt(o.$$.fragment,l)},m(l,p){Ot(n,l,p),tt(l,i,p),Ot(e,l,p),tt(l,r,p),Ot(o,l,p),u=!0,s||(f=jt(window,"popstate",t[8]),s=!0)},p(l,[p]){const m={};e.$set(m);const v={};o.$set(v)},i(l){u||(lt(n.$$.fragment,l),lt(e.$$.fragment,l),lt(o.$$.fragment,l),u=!0)},o(l){ft(n.$$.fragment,l),ft(e.$$.fragment,l),ft(o.$$.fragment,l),u=!1},d(l){l&&(A(i),A(r)),Ct(n,l),t[9](null),Ct(e,l),t[10](null),Ct(o,l),s=!1,f()}}}function $r(t,n,i){let e;je(t,Ke,y=>i(11,e=y));let r,o;function u(y){console.log("routes/map:onFeatureMouseOver(event.detail:"+JSON.stringify(y.detail)+")"),r.onMapFeatureMouseOver(y)}function s(y){console.log("routes/map:onMapFeatureMouseOut(event.detail:"+JSON.stringify(y.detail)+")"),r.onMapFeatureMouseOut(y)}function f(y){console.log("routes/map:onChapterMouseOver(event.detail:"+JSON.stringify(y.detail)+")"),o.onChapterMouseOver(y)}function g(y){console.log("routes/map:onChapterMouseLeave(event.detail:"+JSON.stringify(y.detail)+")"),o.onChapterMouseLeave(y)}function a(y){console.log("routes/map:onFeatureClick(event.detail:"+JSON.stringify(y.detail)+")"),r.onMapFeatureClick(y)}function l(y){console.log(`routes/map:onEraClick(event.detail:${JSON.stringify(y.detail)})`),o.onEraClick(y),Ze(`#/era/${y.detail.id}`,{state:{view:"era",id:y.detail.id},noScroll:!0})}function p(y){y.state&&(console.log(`routes/:popstate:event.state:${JSON.stringify(y.state)}`),console.log(`routes/:popstate:page.state:${JSON.stringify(e.state)}`),e.state.view&&e.state.view=="era"&&o.onEraClick({detail:{id:e.state.id}}))}function m(y){Wt[y?"unshift":"push"](()=>{o=y,i(1,o)})}function v(y){Wt[y?"unshift":"push"](()=>{r=y,i(0,r)})}return[r,o,u,s,f,g,a,l,p,m,v]}class Ir extends un{constructor(n){super(),ln(this,n,$r,Cr,on,{})}}export{Ir as component};
