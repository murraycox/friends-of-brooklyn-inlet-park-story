import{s as on,Q as et,R as it,b as Z,f as A,m as P,S as dt,i as tt,h as lt,n as Ft,T as Vn,U as jn,x as Ee,v as mt,V as Bt,F as sn,C as Ge,W as Ue,e as cn,t as qe,a as wn,c as fn,d as Be,g as Sn,j as He,z as Wt,k as We}from"../chunks/scheduler.CswFsUOV.js";import{S as an,i as un,t as x,g as Yn,e as Xn,a as at,c as Et,b as kt,m as zt,d as Ot}from"../chunks/index.CcUBC9rR.js";import{g as Ze}from"../chunks/entry.DYE4IQ-o.js";import{p as Ke}from"../chunks/stores.Sp0vz5_w.js";import{s as pt,d as Qe,i as Gn,T as hn,b as pn,e as Nt,c as xe,N as ti,a as ni}from"../chunks/NavTimeline.CTVdnnPj.js";import{b as ei}from"../chunks/paths.DYNfp2CW.js";class _t{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const o=i[r],a=n+o,s=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);s&&(i[e++]=s),n=a}return i[e]=n,this._n=e+1,this}valueOf(){const n=this._partials;let i=this._n,e,r,o,a=0;if(i>0){for(a=n[--i];i>0&&(e=a,r=n[--i],a=e+r,o=r-(a-e),!o););i>0&&(o<0&&n[i-1]<0||o>0&&n[i-1]>0)&&(r=o*2,e=a+r,r==e-a&&(a=e))}return a}}function*ii(t){for(const n of t)yield*n}function ke(t){return Array.from(ii(t))}function ri(t){let n;for(;n=t.sourceEvent;)t=n;return t}function vt(t,n){if(t=ri(t),n===void 0&&(n=t.currentTarget),n){var i=n.ownerSVGElement||n;if(i.createSVGPoint){var e=i.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(n.getScreenCTM().inverse()),[e.x,e.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const En={capture:!0,passive:!1};function kn(t){t.preventDefault(),t.stopImmediatePropagation()}function oi(t){var n=t.document.documentElement,i=pt(t).on("dragstart.drag",kn,En);"onselectstart"in n?i.on("selectstart.drag",kn,En):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ai(t,n){var i=t.document.documentElement,e=pt(t).on("dragstart.drag",null);n&&(e.on("click.drag",kn,En),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in i?e.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var ui=1e-12;function Hn(t){return((t=Math.exp(t))+1/t)/2}function li(t){return((t=Math.exp(t))-1/t)/2}function si(t){return((t=Math.exp(2*t))-1)/(t+1)}const ci=function t(n,i,e){function r(o,a){var s=o[0],c=o[1],d=o[2],l=a[0],u=a[1],p=a[2],g=l-s,_=u-c,M=g*g+_*_,S,m;if(M<ui)m=Math.log(p/d)/n,S=function(L){return[s+L*g,c+L*_,d*Math.exp(n*L*m)]};else{var y=Math.sqrt(M),w=(p*p-d*d+e*M)/(2*d*i*y),k=(p*p-d*d-e*M)/(2*p*i*y),N=Math.log(Math.sqrt(w*w+1)-w),z=Math.log(Math.sqrt(k*k+1)-k);m=(z-N)/n,S=function(L){var b=L*m,D=Hn(N),F=d/(i*y)*(D*si(n*b+N)-li(N));return[s+F*g,c+F*_,d*D/Hn(n*b+N)]}}return S.duration=m*1e3*n/Math.SQRT2,S}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return t(a,s,c)},r}(Math.SQRT2,2,4);function fi(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function hi(t,n){return fetch(t,n).then(fi)}var V=1e-6,pi=1e-12,$=Math.PI,K=$/2,Wn=$/4,nt=$*2,Q=180/$,B=$/180,Y=Math.abs,ze=Math.atan,Jt=Math.atan2,G=Math.cos,gi=Math.exp,di=Math.log,U=Math.sin,mi=Math.sign||function(t){return t>0?1:t<0?-1:0},Mt=Math.sqrt,vi=Math.tan;function _i(t){return t>1?0:t<-1?$:Math.acos(t)}function At(t){return t>1?K:t<-1?-K:Math.asin(t)}function ot(){}function Zt(t,n){t&&Kn.hasOwnProperty(t.type)&&Kn[t.type](t,n)}var Zn={Feature:function(t,n){Zt(t.geometry,n)},FeatureCollection:function(t,n){for(var i=t.features,e=-1,r=i.length;++e<r;)Zt(i[e].geometry,n)}},Kn={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)t=i[e],n.point(t[0],t[1],t[2])},LineString:function(t,n){zn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)zn(i[e],n,0)},Polygon:function(t,n){Qn(t.coordinates,n)},MultiPolygon:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)Qn(i[e],n)},GeometryCollection:function(t,n){for(var i=t.geometries,e=-1,r=i.length;++e<r;)Zt(i[e],n)}};function zn(t,n,i){var e=-1,r=t.length-i,o;for(n.lineStart();++e<r;)o=t[e],n.point(o[0],o[1],o[2]);n.lineEnd()}function Qn(t,n){var i=-1,e=t.length;for(n.polygonStart();++i<e;)zn(t[i],n,1);n.polygonEnd()}function wt(t,n){t&&Zn.hasOwnProperty(t.type)?Zn[t.type](t,n):Zt(t,n)}function On(t){return[Jt(t[1],t[0]),At(t[2])]}function Tt(t){var n=t[0],i=t[1],e=G(i);return[e*G(n),e*U(n),U(i)]}function Yt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Kt(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function gn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Xt(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Nn(t){var n=Mt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Tn(t,n){function i(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(i.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),i}function Pn(t,n){return Y(t)>$&&(t-=Math.round(t/nt)*nt),[t,n]}Pn.invert=Pn;function Oe(t,n,i){return(t%=nt)?n||i?Tn(te(t),ne(n,i)):te(t):n||i?ne(n,i):Pn}function xn(t){return function(n,i){return n+=t,Y(n)>$&&(n-=Math.round(n/nt)*nt),[n,i]}}function te(t){var n=xn(t);return n.invert=xn(-t),n}function ne(t,n){var i=G(t),e=U(t),r=G(n),o=U(n);function a(s,c){var d=G(c),l=G(s)*d,u=U(s)*d,p=U(c),g=p*i+l*e;return[Jt(u*r-g*o,l*i-p*e),At(g*r+u*o)]}return a.invert=function(s,c){var d=G(c),l=G(s)*d,u=U(s)*d,p=U(c),g=p*r-u*o;return[Jt(u*r+p*o,l*i+g*e),At(g*i-l*e)]},a}function yi(t){t=Oe(t[0]*B,t[1]*B,t.length>2?t[2]*B:0);function n(i){return i=t(i[0]*B,i[1]*B),i[0]*=Q,i[1]*=Q,i}return n.invert=function(i){return i=t.invert(i[0]*B,i[1]*B),i[0]*=Q,i[1]*=Q,i},n}function Mi(t,n,i,e,r,o){if(i){var a=G(n),s=U(n),c=e*i;r==null?(r=n+e*nt,o=n-c/2):(r=ee(a,r),o=ee(a,o),(e>0?r<o:r>o)&&(r+=e*nt));for(var d,l=r;e>0?l>o:l<o;l-=c)d=On([a,-s*G(l),-s*U(l)]),t.point(d[0],d[1])}}function ee(t,n){n=Tt(n),n[0]-=t,Nn(n);var i=_i(-n[1]);return((-n[2]<0?-i:i)+nt-V)%nt}function Ne(){var t=[],n;return{point:function(i,e,r){n.push([i,e,r])},lineStart:function(){t.push(n=[])},lineEnd:ot,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],n=null,i}}}function Ht(t,n){return Y(t[0]-n[0])<V&&Y(t[1]-n[1])<V}function Gt(t,n,i,e){this.x=t,this.z=n,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function Te(t,n,i,e,r){var o=[],a=[],s,c;if(t.forEach(function(_){if(!((M=_.length-1)<=0)){var M,S=_[0],m=_[M],y;if(Ht(S,m)){if(!S[2]&&!m[2]){for(r.lineStart(),s=0;s<M;++s)r.point((S=_[s])[0],S[1]);r.lineEnd();return}m[0]+=2*V}o.push(y=new Gt(S,_,null,!0)),a.push(y.o=new Gt(S,null,y,!1)),o.push(y=new Gt(m,_,null,!1)),a.push(y.o=new Gt(m,null,y,!0))}}),!!o.length){for(a.sort(n),ie(o),ie(a),s=0,c=a.length;s<c;++s)a[s].e=i=!i;for(var d=o[0],l,u;;){for(var p=d,g=!0;p.v;)if((p=p.n)===d)return;l=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(s=0,c=l.length;s<c;++s)r.point((u=l[s])[0],u[1]);else e(p.x,p.n.x,1,r);p=p.n}else{if(g)for(l=p.p.z,s=l.length-1;s>=0;--s)r.point((u=l[s])[0],u[1]);else e(p.x,p.p.x,-1,r);p=p.p}p=p.o,l=p.z,g=!g}while(!p.v);r.lineEnd()}}}function ie(t){if(n=t.length){for(var n,i=0,e=t[0],r;++i<n;)e.n=r=t[i],r.p=e,e=r;e.n=r=t[0],r.p=e}}function dn(t){return Y(t[0])<=$?t[0]:mi(t[0])*((Y(t[0])+$)%nt-$)}function wi(t,n){var i=dn(n),e=n[1],r=U(e),o=[U(i),-G(i),0],a=0,s=0,c=new _t;r===1?e=K+V:r===-1&&(e=-K-V);for(var d=0,l=t.length;d<l;++d)if(p=(u=t[d]).length)for(var u,p,g=u[p-1],_=dn(g),M=g[1]/2+Wn,S=U(M),m=G(M),y=0;y<p;++y,_=k,S=z,m=L,g=w){var w=u[y],k=dn(w),N=w[1]/2+Wn,z=U(N),L=G(N),b=k-_,D=b>=0?1:-1,F=D*b,C=F>$,W=S*z;if(c.add(Jt(W*D*U(F),m*L+W*G(F))),a+=C?b+D*nt:b,C^_>=i^k>=i){var j=Kt(Tt(g),Tt(w));Nn(j);var f=Kt(o,j);Nn(f);var h=(C^b>=0?-1:1)*At(f[2]);(e>h||e===h&&(j[0]||j[1]))&&(s+=C^b>=0?1:-1)}}return(a<-V||a<V&&c<-pi)^s&1}function Pe(t,n,i,e){return function(r){var o=n(r),a=Ne(),s=n(a),c=!1,d,l,u,p={point:g,lineStart:M,lineEnd:S,polygonStart:function(){p.point=m,p.lineStart=y,p.lineEnd=w,l=[],d=[]},polygonEnd:function(){p.point=g,p.lineStart=M,p.lineEnd=S,l=ke(l);var k=wi(d,e);l.length?(c||(r.polygonStart(),c=!0),Te(l,Ei,k,i,r)):k&&(c||(r.polygonStart(),c=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),l=d=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function g(k,N){t(k,N)&&r.point(k,N)}function _(k,N){o.point(k,N)}function M(){p.point=_,o.lineStart()}function S(){p.point=g,o.lineEnd()}function m(k,N){u.push([k,N]),s.point(k,N)}function y(){s.lineStart(),u=[]}function w(){m(u[0][0],u[0][1]),s.lineEnd();var k=s.clean(),N=a.result(),z,L=N.length,b,D,F;if(u.pop(),d.push(u),u=null,!!L){if(k&1){if(D=N[0],(b=D.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),z=0;z<b;++z)r.point((F=D[z])[0],F[1]);r.lineEnd()}return}L>1&&k&2&&N.push(N.pop().concat(N.shift())),l.push(N.filter(Si))}}return p}}function Si(t){return t.length>1}function Ei(t,n){return((t=t.x)[0]<0?t[1]-K-V:K-t[1])-((n=n.x)[0]<0?n[1]-K-V:K-n[1])}const re=Pe(function(){return!0},ki,Oi,[-$,-K]);function ki(t){var n=NaN,i=NaN,e=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var s=o>0?$:-$,c=Y(o-n);Y(c-$)<V?(t.point(n,i=(i+a)/2>0?K:-K),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),r=0):e!==s&&c>=$&&(Y(n-e)<V&&(n-=e*V),Y(o-s)<V&&(o-=s*V),i=zi(n,i,o,a),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(s,i),r=0),t.point(n=o,i=a),e=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-r}}}function zi(t,n,i,e){var r,o,a=U(t-i);return Y(a)>V?ze((U(n)*(o=G(e))*U(i)-U(e)*(r=G(n))*U(t))/(r*o*a)):(n+e)/2}function Oi(t,n,i,e){var r;if(t==null)r=i*K,e.point(-$,r),e.point(0,r),e.point($,r),e.point($,0),e.point($,-r),e.point(0,-r),e.point(-$,-r),e.point(-$,0),e.point(-$,r);else if(Y(t[0]-n[0])>V){var o=t[0]<n[0]?$:-$;r=i*o/2,e.point(-o,r),e.point(0,r),e.point(o,r)}else e.point(n[0],n[1])}function Ni(t){var n=G(t),i=2*B,e=n>0,r=Y(n)>V;function o(l,u,p,g){Mi(g,t,i,p,l,u)}function a(l,u){return G(l)*G(u)>n}function s(l){var u,p,g,_,M;return{lineStart:function(){_=g=!1,M=1},point:function(S,m){var y=[S,m],w,k=a(S,m),N=e?k?0:d(S,m):k?d(S+(S<0?$:-$),m):0;if(!u&&(_=g=k)&&l.lineStart(),k!==g&&(w=c(u,y),(!w||Ht(u,w)||Ht(y,w))&&(y[2]=1)),k!==g)M=0,k?(l.lineStart(),w=c(y,u),l.point(w[0],w[1])):(w=c(u,y),l.point(w[0],w[1],2),l.lineEnd()),u=w;else if(r&&u&&e^k){var z;!(N&p)&&(z=c(y,u,!0))&&(M=0,e?(l.lineStart(),l.point(z[0][0],z[0][1]),l.point(z[1][0],z[1][1]),l.lineEnd()):(l.point(z[1][0],z[1][1]),l.lineEnd(),l.lineStart(),l.point(z[0][0],z[0][1],3)))}k&&(!u||!Ht(u,y))&&l.point(y[0],y[1]),u=y,g=k,p=N},lineEnd:function(){g&&l.lineEnd(),u=null},clean:function(){return M|(_&&g)<<1}}}function c(l,u,p){var g=Tt(l),_=Tt(u),M=[1,0,0],S=Kt(g,_),m=Yt(S,S),y=S[0],w=m-y*y;if(!w)return!p&&l;var k=n*m/w,N=-n*y/w,z=Kt(M,S),L=Xt(M,k),b=Xt(S,N);gn(L,b);var D=z,F=Yt(L,D),C=Yt(D,D),W=F*F-C*(Yt(L,L)-1);if(!(W<0)){var j=Mt(W),f=Xt(D,(-F-j)/C);if(gn(f,L),f=On(f),!p)return f;var h=l[0],v=u[0],E=l[1],O=u[1],T;v<h&&(T=h,h=v,v=T);var I=v-h,R=Y(I-$)<V,J=R||I<V;if(!R&&O<E&&(T=E,E=O,O=T),J?R?E+O>0^f[1]<(Y(f[0]-h)<V?E:O):E<=f[1]&&f[1]<=O:I>$^(h<=f[0]&&f[0]<=v)){var q=Xt(D,(-F+j)/C);return gn(q,L),[f,On(q)]}}}function d(l,u){var p=e?t:$-t,g=0;return l<-p?g|=1:l>p&&(g|=2),u<-p?g|=4:u>p&&(g|=8),g}return Pe(a,s,o,e?[0,-t]:[-$,t-$])}function Ti(t,n,i,e,r,o){var a=t[0],s=t[1],c=n[0],d=n[1],l=0,u=1,p=c-a,g=d-s,_;if(_=i-a,!(!p&&_>0)){if(_/=p,p<0){if(_<l)return;_<u&&(u=_)}else if(p>0){if(_>u)return;_>l&&(l=_)}if(_=r-a,!(!p&&_<0)){if(_/=p,p<0){if(_>u)return;_>l&&(l=_)}else if(p>0){if(_<l)return;_<u&&(u=_)}if(_=e-s,!(!g&&_>0)){if(_/=g,g<0){if(_<l)return;_<u&&(u=_)}else if(g>0){if(_>u)return;_>l&&(l=_)}if(_=o-s,!(!g&&_<0)){if(_/=g,g<0){if(_>u)return;_>l&&(l=_)}else if(g>0){if(_<l)return;_<u&&(u=_)}return l>0&&(t[0]=a+l*p,t[1]=s+l*g),u<1&&(n[0]=a+u*p,n[1]=s+u*g),!0}}}}}var Lt=1e9,Ut=-Lt;function Pi(t,n,i,e){function r(d,l){return t<=d&&d<=i&&n<=l&&l<=e}function o(d,l,u,p){var g=0,_=0;if(d==null||(g=a(d,u))!==(_=a(l,u))||c(d,l)<0^u>0)do p.point(g===0||g===3?t:i,g>1?e:n);while((g=(g+u+4)%4)!==_);else p.point(l[0],l[1])}function a(d,l){return Y(d[0]-t)<V?l>0?0:3:Y(d[0]-i)<V?l>0?2:1:Y(d[1]-n)<V?l>0?1:0:l>0?3:2}function s(d,l){return c(d.x,l.x)}function c(d,l){var u=a(d,1),p=a(l,1);return u!==p?u-p:u===0?l[1]-d[1]:u===1?d[0]-l[0]:u===2?d[1]-l[1]:l[0]-d[0]}return function(d){var l=d,u=Ne(),p,g,_,M,S,m,y,w,k,N,z,L={point:b,lineStart:W,lineEnd:j,polygonStart:F,polygonEnd:C};function b(h,v){r(h,v)&&l.point(h,v)}function D(){for(var h=0,v=0,E=g.length;v<E;++v)for(var O=g[v],T=1,I=O.length,R=O[0],J,q,X=R[0],H=R[1];T<I;++T)J=X,q=H,R=O[T],X=R[0],H=R[1],q<=e?H>e&&(X-J)*(e-q)>(H-q)*(t-J)&&++h:H<=e&&(X-J)*(e-q)<(H-q)*(t-J)&&--h;return h}function F(){l=u,p=[],g=[],z=!0}function C(){var h=D(),v=z&&h,E=(p=ke(p)).length;(v||E)&&(d.polygonStart(),v&&(d.lineStart(),o(null,null,1,d),d.lineEnd()),E&&Te(p,s,h,o,d),d.polygonEnd()),l=d,p=g=_=null}function W(){L.point=f,g&&g.push(_=[]),N=!0,k=!1,y=w=NaN}function j(){p&&(f(M,S),m&&k&&u.rejoin(),p.push(u.result())),L.point=b,k&&l.lineEnd()}function f(h,v){var E=r(h,v);if(g&&_.push([h,v]),N)M=h,S=v,m=E,N=!1,E&&(l.lineStart(),l.point(h,v));else if(E&&k)l.point(h,v);else{var O=[y=Math.max(Ut,Math.min(Lt,y)),w=Math.max(Ut,Math.min(Lt,w))],T=[h=Math.max(Ut,Math.min(Lt,h)),v=Math.max(Ut,Math.min(Lt,v))];Ti(O,T,t,n,i,e)?(k||(l.lineStart(),l.point(O[0],O[1])),l.point(T[0],T[1]),E||l.lineEnd(),z=!1):E&&(l.lineStart(),l.point(h,v),z=!1)}y=h,w=v,k=E}return L}}const Cn=t=>t;var mn=new _t,Ln=new _t,Ce,Le,bn,In,gt={point:ot,lineStart:ot,lineEnd:ot,polygonStart:function(){gt.lineStart=Ci,gt.lineEnd=bi},polygonEnd:function(){gt.lineStart=gt.lineEnd=gt.point=ot,mn.add(Y(Ln)),Ln=new _t},result:function(){var t=mn/2;return mn=new _t,t}};function Ci(){gt.point=Li}function Li(t,n){gt.point=be,Ce=bn=t,Le=In=n}function be(t,n){Ln.add(In*t-bn*n),bn=t,In=n}function bi(){be(Ce,Le)}var Pt=1/0,Qt=Pt,Vt=-Pt,xt=Vt,tn={point:Ii,lineStart:ot,lineEnd:ot,polygonStart:ot,polygonEnd:ot,result:function(){var t=[[Pt,Qt],[Vt,xt]];return Vt=xt=-(Qt=Pt=1/0),t}};function Ii(t,n){t<Pt&&(Pt=t),t>Vt&&(Vt=t),n<Qt&&(Qt=n),n>xt&&(xt=n)}var Dn=0,Rn=0,bt=0,nn=0,en=0,St=0,$n=0,Fn=0,It=0,Ie,De,st,ct,rt={point:yt,lineStart:oe,lineEnd:ae,polygonStart:function(){rt.lineStart=$i,rt.lineEnd=Fi},polygonEnd:function(){rt.point=yt,rt.lineStart=oe,rt.lineEnd=ae},result:function(){var t=It?[$n/It,Fn/It]:St?[nn/St,en/St]:bt?[Dn/bt,Rn/bt]:[NaN,NaN];return Dn=Rn=bt=nn=en=St=$n=Fn=It=0,t}};function yt(t,n){Dn+=t,Rn+=n,++bt}function oe(){rt.point=Di}function Di(t,n){rt.point=Ri,yt(st=t,ct=n)}function Ri(t,n){var i=t-st,e=n-ct,r=Mt(i*i+e*e);nn+=r*(st+t)/2,en+=r*(ct+n)/2,St+=r,yt(st=t,ct=n)}function ae(){rt.point=yt}function $i(){rt.point=Ji}function Fi(){Re(Ie,De)}function Ji(t,n){rt.point=Re,yt(Ie=st=t,De=ct=n)}function Re(t,n){var i=t-st,e=n-ct,r=Mt(i*i+e*e);nn+=r*(st+t)/2,en+=r*(ct+n)/2,St+=r,r=ct*t-st*n,$n+=r*(st+t),Fn+=r*(ct+n),It+=r*3,yt(st=t,ct=n)}function $e(t){this._context=t}$e.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,nt);break}}},result:ot};var Jn=new _t,vn,Fe,Je,Dt,Rt,jt={point:ot,lineStart:function(){jt.point=Ai},lineEnd:function(){vn&&Ae(Fe,Je),jt.point=ot},polygonStart:function(){vn=!0},polygonEnd:function(){vn=null},result:function(){var t=+Jn;return Jn=new _t,t}};function Ai(t,n){jt.point=Ae,Fe=Dt=t,Je=Rt=n}function Ae(t,n){Dt-=t,Rt-=n,Jn.add(Mt(Dt*Dt+Rt*Rt)),Dt=t,Rt=n}let ue,rn,le,se;class ce{constructor(n){this._append=n==null?Ve:Vi(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,i){switch(this._point){case 0:{this._append`M${n},${i}`,this._point=1;break}case 1:{this._append`L${n},${i}`;break}default:{if(this._append`M${n},${i}`,this._radius!==le||this._append!==rn){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,le=e,rn=this._append,se=this._,this._=r}this._+=se;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Ve(t){let n=1;this._+=t[0];for(const i=t.length;n<i;++n)this._+=arguments[n]+t[n]}function Vi(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Ve;if(n!==ue){const i=10**n;ue=n,rn=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*i)/i+r[o]}}return rn}function je(t,n){let i=3,e=4.5,r,o;function a(s){return s&&(typeof e=="function"&&o.pointRadius(+e.apply(this,arguments)),wt(s,r(o))),o.result()}return a.area=function(s){return wt(s,r(gt)),gt.result()},a.measure=function(s){return wt(s,r(jt)),jt.result()},a.bounds=function(s){return wt(s,r(tn)),tn.result()},a.centroid=function(s){return wt(s,r(rt)),rt.result()},a.projection=function(s){return arguments.length?(r=s==null?(t=null,Cn):(t=s).stream,a):t},a.context=function(s){return arguments.length?(o=s==null?(n=null,new ce(i)):new $e(n=s),typeof e!="function"&&o.pointRadius(e),a):n},a.pointRadius=function(s){return arguments.length?(e=typeof s=="function"?s:(o.pointRadius(+s),+s),a):e},a.digits=function(s){if(!arguments.length)return i;if(s==null)i=null;else{const c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);i=c}return n===null&&(o=new ce(i)),a},a.projection(t).digits(i).context(n)}function Un(t){return function(n){var i=new An;for(var e in t)i[e]=t[e];return i.stream=n,i}}function An(){}An.prototype={constructor:An,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function qn(t,n,i){var e=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),e!=null&&t.clipExtent(null),wt(i,t.stream(tn)),n(tn.result()),e!=null&&t.clipExtent(e),t}function Ye(t,n,i){return qn(t,function(e){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(r/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),s=+n[0][0]+(r-a*(e[1][0]+e[0][0]))/2,c=+n[0][1]+(o-a*(e[1][1]+e[0][1]))/2;t.scale(150*a).translate([s,c])},i)}function ji(t,n,i){return Ye(t,[[0,0],n],i)}function Yi(t,n,i){return qn(t,function(e){var r=+n,o=r/(e[1][0]-e[0][0]),a=(r-o*(e[1][0]+e[0][0]))/2,s=-o*e[0][1];t.scale(150*o).translate([a,s])},i)}function Xi(t,n,i){return qn(t,function(e){var r=+n,o=r/(e[1][1]-e[0][1]),a=-o*e[0][0],s=(r-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,s])},i)}var fe=16,Gi=G(30*B);function he(t,n){return+n?qi(t,n):Ui(t)}function Ui(t){return Un({point:function(n,i){n=t(n,i),this.stream.point(n[0],n[1])}})}function qi(t,n){function i(e,r,o,a,s,c,d,l,u,p,g,_,M,S){var m=d-e,y=l-r,w=m*m+y*y;if(w>4*n&&M--){var k=a+p,N=s+g,z=c+_,L=Mt(k*k+N*N+z*z),b=At(z/=L),D=Y(Y(z)-1)<V||Y(o-u)<V?(o+u)/2:Jt(N,k),F=t(D,b),C=F[0],W=F[1],j=C-e,f=W-r,h=y*j-m*f;(h*h/w>n||Y((m*j+y*f)/w-.5)>.3||a*p+s*g+c*_<Gi)&&(i(e,r,o,a,s,c,C,W,D,k/=L,N/=L,z,M,S),S.point(C,W),i(C,W,D,k,N,z,d,l,u,p,g,_,M,S))}}return function(e){var r,o,a,s,c,d,l,u,p,g,_,M,S={point:m,lineStart:y,lineEnd:k,polygonStart:function(){e.polygonStart(),S.lineStart=N},polygonEnd:function(){e.polygonEnd(),S.lineStart=y}};function m(b,D){b=t(b,D),e.point(b[0],b[1])}function y(){u=NaN,S.point=w,e.lineStart()}function w(b,D){var F=Tt([b,D]),C=t(b,D);i(u,p,l,g,_,M,u=C[0],p=C[1],l=b,g=F[0],_=F[1],M=F[2],fe,e),e.point(u,p)}function k(){S.point=m,e.lineEnd()}function N(){y(),S.point=z,S.lineEnd=L}function z(b,D){w(r=b,D),o=u,a=p,s=g,c=_,d=M,S.point=w}function L(){i(u,p,l,g,_,M,o,a,r,s,c,d,fe,e),S.lineEnd=k,k()}return S}}var Bi=Un({point:function(t,n){this.stream.point(t*B,n*B)}});function Hi(t){return Un({point:function(n,i){var e=t(n,i);return this.stream.point(e[0],e[1])}})}function Wi(t,n,i,e,r){function o(a,s){return a*=e,s*=r,[n+t*a,i-t*s]}return o.invert=function(a,s){return[(a-n)/t*e,(i-s)/t*r]},o}function pe(t,n,i,e,r,o){if(!o)return Wi(t,n,i,e,r);var a=G(o),s=U(o),c=a*t,d=s*t,l=a/t,u=s/t,p=(s*i-a*n)/t,g=(s*n+a*i)/t;function _(M,S){return M*=e,S*=r,[c*M-d*S+n,i-d*M-c*S]}return _.invert=function(M,S){return[e*(l*M-u*S+p),r*(g-u*M-l*S)]},_}function Zi(t){return Ki(function(){return t})()}function Ki(t){var n,i=150,e=480,r=250,o=0,a=0,s=0,c=0,d=0,l,u=0,p=1,g=1,_=null,M=re,S=null,m,y,w,k=Cn,N=.5,z,L,b,D,F;function C(h){return b(h[0]*B,h[1]*B)}function W(h){return h=b.invert(h[0],h[1]),h&&[h[0]*Q,h[1]*Q]}C.stream=function(h){return D&&F===h?D:D=Bi(Hi(l)(M(z(k(F=h)))))},C.preclip=function(h){return arguments.length?(M=h,_=void 0,f()):M},C.postclip=function(h){return arguments.length?(k=h,S=m=y=w=null,f()):k},C.clipAngle=function(h){return arguments.length?(M=+h?Ni(_=h*B):(_=null,re),f()):_*Q},C.clipExtent=function(h){return arguments.length?(k=h==null?(S=m=y=w=null,Cn):Pi(S=+h[0][0],m=+h[0][1],y=+h[1][0],w=+h[1][1]),f()):S==null?null:[[S,m],[y,w]]},C.scale=function(h){return arguments.length?(i=+h,j()):i},C.translate=function(h){return arguments.length?(e=+h[0],r=+h[1],j()):[e,r]},C.center=function(h){return arguments.length?(o=h[0]%360*B,a=h[1]%360*B,j()):[o*Q,a*Q]},C.rotate=function(h){return arguments.length?(s=h[0]%360*B,c=h[1]%360*B,d=h.length>2?h[2]%360*B:0,j()):[s*Q,c*Q,d*Q]},C.angle=function(h){return arguments.length?(u=h%360*B,j()):u*Q},C.reflectX=function(h){return arguments.length?(p=h?-1:1,j()):p<0},C.reflectY=function(h){return arguments.length?(g=h?-1:1,j()):g<0},C.precision=function(h){return arguments.length?(z=he(L,N=h*h),f()):Mt(N)},C.fitExtent=function(h,v){return Ye(C,h,v)},C.fitSize=function(h,v){return ji(C,h,v)},C.fitWidth=function(h,v){return Yi(C,h,v)},C.fitHeight=function(h,v){return Xi(C,h,v)};function j(){var h=pe(i,0,0,p,g,u).apply(null,n(o,a)),v=pe(i,e-h[0],r-h[1],p,g,u);return l=Oe(s,c,d),L=Tn(n,v),b=Tn(l,L),z=he(L,N),f()}function f(){return D=F=null,C}return function(){return n=t.apply(this,arguments),C.invert=n.invert&&W,j()}}function Bn(t,n){return[t,di(vi((K+n)/2))]}Bn.invert=function(t,n){return[t,2*ze(gi(n))-K]};function Qi(){return xi(Bn).scale(961/nt)}function xi(t){var n=Zi(t),i=n.center,e=n.scale,r=n.translate,o=n.clipExtent,a=null,s,c,d;n.scale=function(u){return arguments.length?(e(u),l()):e()},n.translate=function(u){return arguments.length?(r(u),l()):r()},n.center=function(u){return arguments.length?(i(u),l()):i()},n.clipExtent=function(u){return arguments.length?(u==null?a=s=c=d=null:(a=+u[0][0],s=+u[0][1],c=+u[1][0],d=+u[1][1]),l()):a==null?null:[[a,s],[c,d]]};function l(){var u=$*e(),p=n(yi(n.rotate()).invert([0,0]));return o(a==null?[[p[0]-u,p[1]-u],[p[0]+u,p[1]+u]]:t===Bn?[[Math.max(p[0]-u,a),s],[Math.min(p[0]+u,c),d]]:[[a,Math.max(p[1]-u,s)],[c,Math.min(p[1]+u,d)]])}return l()}const qt=t=>()=>t;function tr(t,{sourceEvent:n,target:i,transform:e,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:r}})}function _n(t){t.stopImmediatePropagation()}function Ct(t){t.preventDefault(),t.stopImmediatePropagation()}function nr(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function er(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ge(){return this.__zoom||Gn}function ir(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function rr(){return navigator.maxTouchPoints||"ontouchstart"in this}function or(t,n,i){var e=t.invertX(n[0][0])-i[0][0],r=t.invertX(n[1][0])-i[1][0],o=t.invertY(n[0][1])-i[0][1],a=t.invertY(n[1][1])-i[1][1];return t.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function ar(){var t=nr,n=er,i=or,e=ir,r=rr,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=ci,d=Qe("start","zoom","end"),l,u,p,g=500,_=150,M=0,S=10;function m(f){f.property("__zoom",ge).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",F).filter(r).on("touchstart.zoom",C).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(f,h,v,E){var O=f.selection?f.selection():f;O.property("__zoom",ge),f!==O?N(f,h,v,E):O.interrupt().each(function(){z(this,arguments).event(E).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},m.scaleBy=function(f,h,v,E){m.scaleTo(f,function(){var O=this.__zoom.k,T=typeof h=="function"?h.apply(this,arguments):h;return O*T},v,E)},m.scaleTo=function(f,h,v,E){m.transform(f,function(){var O=n.apply(this,arguments),T=this.__zoom,I=v==null?k(O):typeof v=="function"?v.apply(this,arguments):v,R=T.invert(I),J=typeof h=="function"?h.apply(this,arguments):h;return i(w(y(T,J),I,R),O,a)},v,E)},m.translateBy=function(f,h,v,E){m.transform(f,function(){return i(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof v=="function"?v.apply(this,arguments):v),n.apply(this,arguments),a)},null,E)},m.translateTo=function(f,h,v,E,O){m.transform(f,function(){var T=n.apply(this,arguments),I=this.__zoom,R=E==null?k(T):typeof E=="function"?E.apply(this,arguments):E;return i(Gn.translate(R[0],R[1]).scale(I.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof v=="function"?-v.apply(this,arguments):-v),T,a)},E,O)};function y(f,h){return h=Math.max(o[0],Math.min(o[1],h)),h===f.k?f:new hn(h,f.x,f.y)}function w(f,h,v){var E=h[0]-v[0]*f.k,O=h[1]-v[1]*f.k;return E===f.x&&O===f.y?f:new hn(f.k,E,O)}function k(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function N(f,h,v,E){f.on("start.zoom",function(){z(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(E).end()}).tween("zoom",function(){var O=this,T=arguments,I=z(O,T).event(E),R=n.apply(O,T),J=v==null?k(R):typeof v=="function"?v.apply(O,T):v,q=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),X=O.__zoom,H=typeof h=="function"?h.apply(O,T):h,ft=c(X.invert(J).concat(q/X.k),H.invert(J).concat(q/H.k));return function(ut){if(ut===1)ut=H;else{var ht=ft(ut),ln=q/ht[2];ut=new hn(ln,J[0]-ht[0]*ln,J[1]-ht[1]*ln)}I.zoom(null,ut)}})}function z(f,h,v){return!v&&f.__zooming||new L(f,h)}function L(f,h){this.that=f,this.args=h,this.active=0,this.sourceEvent=null,this.extent=n.apply(f,h),this.taps=0}L.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,h){return this.mouse&&f!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var h=pt(this.that).datum();d.call(f,this.that,new tr(f,{sourceEvent:this.sourceEvent,target:m,type:f,transform:this.that.__zoom,dispatch:d}),h)}};function b(f,...h){if(!t.apply(this,arguments))return;var v=z(this,h).event(f),E=this.__zoom,O=Math.max(o[0],Math.min(o[1],E.k*Math.pow(2,e.apply(this,arguments)))),T=vt(f);if(v.wheel)(v.mouse[0][0]!==T[0]||v.mouse[0][1]!==T[1])&&(v.mouse[1]=E.invert(v.mouse[0]=T)),clearTimeout(v.wheel);else{if(E.k===O)return;v.mouse=[T,E.invert(T)],pn(this),v.start()}Ct(f),v.wheel=setTimeout(I,_),v.zoom("mouse",i(w(y(E,O),v.mouse[0],v.mouse[1]),v.extent,a));function I(){v.wheel=null,v.end()}}function D(f,...h){if(p||!t.apply(this,arguments))return;var v=f.currentTarget,E=z(this,h,!0).event(f),O=pt(f.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",q,!0),T=vt(f,v),I=f.clientX,R=f.clientY;oi(f.view),_n(f),E.mouse=[T,this.__zoom.invert(T)],pn(this),E.start();function J(X){if(Ct(X),!E.moved){var H=X.clientX-I,ft=X.clientY-R;E.moved=H*H+ft*ft>M}E.event(X).zoom("mouse",i(w(E.that.__zoom,E.mouse[0]=vt(X,v),E.mouse[1]),E.extent,a))}function q(X){O.on("mousemove.zoom mouseup.zoom",null),ai(X.view,E.moved),Ct(X),E.event(X).end()}}function F(f,...h){if(t.apply(this,arguments)){var v=this.__zoom,E=vt(f.changedTouches?f.changedTouches[0]:f,this),O=v.invert(E),T=v.k*(f.shiftKey?.5:2),I=i(w(y(v,T),E,O),n.apply(this,h),a);Ct(f),s>0?pt(this).transition().duration(s).call(N,I,E,f):pt(this).call(m.transform,I,E,f)}}function C(f,...h){if(t.apply(this,arguments)){var v=f.touches,E=v.length,O=z(this,h,f.changedTouches.length===E).event(f),T,I,R,J;for(_n(f),I=0;I<E;++I)R=v[I],J=vt(R,this),J=[J,this.__zoom.invert(J),R.identifier],O.touch0?!O.touch1&&O.touch0[2]!==J[2]&&(O.touch1=J,O.taps=0):(O.touch0=J,T=!0,O.taps=1+!!l);l&&(l=clearTimeout(l)),T&&(O.taps<2&&(u=J[0],l=setTimeout(function(){l=null},g)),pn(this),O.start())}}function W(f,...h){if(this.__zooming){var v=z(this,h).event(f),E=f.changedTouches,O=E.length,T,I,R,J;for(Ct(f),T=0;T<O;++T)I=E[T],R=vt(I,this),v.touch0&&v.touch0[2]===I.identifier?v.touch0[0]=R:v.touch1&&v.touch1[2]===I.identifier&&(v.touch1[0]=R);if(I=v.that.__zoom,v.touch1){var q=v.touch0[0],X=v.touch0[1],H=v.touch1[0],ft=v.touch1[1],ut=(ut=H[0]-q[0])*ut+(ut=H[1]-q[1])*ut,ht=(ht=ft[0]-X[0])*ht+(ht=ft[1]-X[1])*ht;I=y(I,Math.sqrt(ut/ht)),R=[(q[0]+H[0])/2,(q[1]+H[1])/2],J=[(X[0]+ft[0])/2,(X[1]+ft[1])/2]}else if(v.touch0)R=v.touch0[0],J=v.touch0[1];else return;v.zoom("touch",i(w(I,R,J),v.extent,a))}}function j(f,...h){if(this.__zooming){var v=z(this,h).event(f),E=f.changedTouches,O=E.length,T,I;for(_n(f),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),T=0;T<O;++T)I=E[T],v.touch0&&v.touch0[2]===I.identifier?delete v.touch0:v.touch1&&v.touch1[2]===I.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(I=vt(I,this),Math.hypot(u[0]-I[0],u[1]-I[1])<S)){var R=pt(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return m.wheelDelta=function(f){return arguments.length?(e=typeof f=="function"?f:qt(+f),m):e},m.filter=function(f){return arguments.length?(t=typeof f=="function"?f:qt(!!f),m):t},m.touchable=function(f){return arguments.length?(r=typeof f=="function"?f:qt(!!f),m):r},m.extent=function(f){return arguments.length?(n=typeof f=="function"?f:qt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),m):n},m.scaleExtent=function(f){return arguments.length?(o[0]=+f[0],o[1]=+f[1],m):[o[0],o[1]]},m.translateExtent=function(f){return arguments.length?(a[0][0]=+f[0][0],a[1][0]=+f[1][0],a[0][1]=+f[0][1],a[1][1]=+f[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(f){return arguments.length?(i=f,m):i},m.duration=function(f){return arguments.length?(s=+f,m):s},m.interpolate=function(f){return arguments.length?(c=f,m):c},m.on=function(){var f=d.on.apply(d,arguments);return f===d?m:f},m.clickDistance=function(f){return arguments.length?(M=(f=+f)*f,m):Math.sqrt(M)},m.tapDistance=function(f){return arguments.length?(S=+f,m):S},m}function de(t,n,i){const e=t.slice();return e[15]=n[i],e}function ur(t){let n,i,e;return{c(){n=et("circle"),this.h()},l(r){n=it(r,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),Z(n).forEach(A),this.h()},h(){P(n,"cx",i=t[0](t[15])[0]),P(n,"cy",e=t[0](t[15])[1]),P(n,"r","30"),P(n,"fill","#599FF0")},m(r,o){tt(r,n,o)},p(r,o){o&33&&i!==(i=r[0](r[15])[0])&&P(n,"cx",i),o&33&&e!==(e=r[0](r[15])[1])&&P(n,"cy",e)},d(r){r&&A(n)}}}function lr(t){let n;function i(o,a){return o[2]?cr:sr}let e=i(t),r=e(t);return{c(){r.c(),n=mt()},l(o){r.l(o),n=mt()},m(o,a){r.m(o,a),tt(o,n,a)},p(o,a){e===(e=i(o))&&r?r.p(o,a):(r.d(1),r=e(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){o&&A(n),r.d(o)}}}function sr(t){let n,i;return{c(){n=et("path"),this.h()},l(e){n=it(e,"path",{d:!0,class:!0}),Z(n).forEach(A),this.h()},h(){P(n,"d",i=t[6](t[15])),P(n,"class","svelte-ndv55b")},m(e,r){tt(e,n,r)},p(e,r){r&96&&i!==(i=e[6](e[15]))&&P(n,"d",i)},d(e){e&&A(n)}}}function cr(t){let n,i,e,r;return{c(){n=et("path"),this.h()},l(o){n=it(o,"path",{d:!0,class:!0}),Z(n).forEach(A),this.h()},h(){P(n,"d",i=t[6](t[15])),P(n,"class","svelte-ndv55b"),dt(n,"hover",t[15].properties&&t[15].properties.id&&t[7]==t[15].properties.id)},m(o,a){tt(o,n,a),e||(r=[Bt(n,"mouseover",function(){sn(t[8](t[15]))&&t[8](t[15]).apply(this,arguments)}),Bt(n,"mouseout",function(){sn(t[9](t[15]))&&t[9](t[15]).apply(this,arguments)}),Bt(n,"click",function(){sn(t[10](t[15]))&&t[10](t[15]).apply(this,arguments)})],e=!0)},p(o,a){t=o,a&96&&i!==(i=t[6](t[15]))&&P(n,"d",i),a&160&&dt(n,"hover",t[15].properties&&t[15].properties.id&&t[7]==t[15].properties.id)},d(o){o&&A(n),e=!1,Ge(r)}}}function me(t){let n;function i(o,a){return o[4]=="polygons"?lr:ur}let e=i(t),r=e(t);return{c(){r.c(),n=mt()},l(o){r.l(o),n=mt()},m(o,a){r.m(o,a),tt(o,n,a)},p(o,a){e===(e=i(o))&&r?r.p(o,a):(r.d(1),r=e(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){o&&A(n),r.d(o)}}}function fr(t){let n,i,e,r,o,a=Nt(t[5]),s=[];for(let c=0;c<a.length;c+=1)s[c]=me(de(t,a,c));return{c(){n=et("g"),i=et("pattern"),e=et("circle"),r=et("pattern"),o=et("circle");for(let c=0;c<s.length;c+=1)s[c].c();this.h()},l(c){n=it(c,"g",{class:!0,id:!0});var d=Z(n);i=it(d,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var l=Z(i);e=it(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),Z(e).forEach(A),l.forEach(A),r=it(d,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var u=Z(r);o=it(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),Z(o).forEach(A),u.forEach(A);for(let p=0;p<s.length;p+=1)s[p].l(d);d.forEach(A),this.h()},h(){P(e,"cx","1"),P(e,"cy","1"),P(e,"r","3"),P(e,"fill","#A060C1"),P(i,"id","circles-urban-industrial-era"),P(i,"x","0"),P(i,"y","0"),P(i,"width","5"),P(i,"height","5"),P(i,"patternUnits","userSpaceOnUse"),P(o,"cx","50"),P(o,"cy","50"),P(o,"r","20"),P(o,"fill","#599FF0"),P(r,"id","circles-pre-1600s"),P(r,"x","0"),P(r,"y","0"),P(r,"width","50"),P(r,"height","50"),P(r,"patternUnits","userSpaceOnUse"),P(n,"class","map-svg-g svelte-ndv55b"),P(n,"id",t[1]),dt(n,"visible",t[3]),dt(n,"hidden",!t[3])},m(c,d){tt(c,n,d),lt(n,i),lt(i,e),lt(n,r),lt(r,o);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(n,null)},p(c,[d]){if(d&2037){a=Nt(c[5]);let l;for(l=0;l<a.length;l+=1){const u=de(c,a,l);s[l]?s[l].p(u,d):(s[l]=me(u),s[l].c(),s[l].m(n,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=a.length}d&2&&P(n,"id",c[1]),d&8&&dt(n,"visible",c[3]),d&8&&dt(n,"hidden",!c[3])},i:Ft,o:Ft,d(c){c&&A(n),Vn(s,c)}}}function hr(t,n,i){let{url:e=""}=n,{projection:r}=n,{id:o}=n,{interactive:a=!1}=n,{visible:s=!1}=n,{geometryType:c="polygons"}=n;function d(y){console.log("Map(id: "+o+"):onChapterMouseOver(event:"+JSON.stringify(y.detail)+")"),i(7,g=y.detail.id)}function l(y){console.log("Map(id: "+o+"):onChapterMouseLeave(event:"+JSON.stringify(y.detail)+")"),i(7,g=null)}let u=[],p=null,g=null;const _=jn();Ee(()=>{hi(ei+e).then(y=>{i(5,u=y.features),i(6,p=je().projection(r))})});function M(y){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(y)+")"),y.properties&&y.properties.id&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(y.properties.id)+")"),_("featureMouseOver",{mapID:o,featureID:y.properties&&y.properties.id?y.properties.id:"?"})}function S(y){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(y)+")"),y.properties&&y.properties.id&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(y.properties.id)+")"),_("featureMouseOut",{mapID:o,featureID:y.properties&&y.properties.id?y.properties.id:"?"})}function m(y){console.log("Map:onFeatureClick(feature:"+JSON.stringify(y)+")"),_("featureClick",{mapID:o,featureID:y.properties&&y.properties.id?y.properties.id:"?"})}return t.$$set=y=>{"url"in y&&i(11,e=y.url),"projection"in y&&i(0,r=y.projection),"id"in y&&i(1,o=y.id),"interactive"in y&&i(2,a=y.interactive),"visible"in y&&i(3,s=y.visible),"geometryType"in y&&i(4,c=y.geometryType)},[r,o,a,s,c,u,p,g,M,S,m,e,d,l]}class Xe extends an{constructor(n){super(),un(this,n,hr,fr,on,{url:11,projection:0,id:1,interactive:2,visible:3,geometryType:4,onChapterMouseOver:12,onChapterMouseLeave:13})}get onChapterMouseOver(){return this.$$.ctx[12]}get onChapterMouseLeave(){return this.$$.ctx[13]}}function pr(t){return t.k}function gr(t){return[t.x,t.y]}function ve(t){return function(){return t}}function dr(){let t=0,n=0,i=960,e=500,r=!0,o=!0,a=256,s=pr,c=gr,d=0;function l(){const u=+s.apply(this,arguments),p=c.apply(this,arguments),g=Math.log2(u/a),_=Math.round(Math.max(g+d,0)),M=Math.pow(2,g-_)*a,S=+p[0]-u/2,m=+p[1]-u/2,y=Math.max(r?0:-1/0,Math.floor((t-S)/M)),w=Math.min(r?1<<_:1/0,Math.ceil((i-S)/M)),k=Math.max(o?0:-1/0,Math.floor((n-m)/M)),N=Math.min(o?1<<_:1/0,Math.ceil((e-m)/M)),z=[];for(let L=k;L<N;++L)for(let b=y;b<w;++b)z.push([b,L,_]);return z.translate=[S/M,m/M],z.scale=M,z}return l.size=function(u){return arguments.length?(t=n=0,i=+u[0],e=+u[1],l):[i-t,e-n]},l.extent=function(u){return arguments.length?(t=+u[0][0],n=+u[0][1],i=+u[1][0],e=+u[1][1],l):[[t,n],[i,e]]},l.scale=function(u){return arguments.length?(s=typeof u=="function"?u:ve(+u),l):s},l.translate=function(u){return arguments.length?(c=typeof u=="function"?u:ve([+u[0],+u[1]]),l):c},l.zoomDelta=function(u){return arguments.length?(d=+u,l):d},l.tileSize=function(u){return arguments.length?(a=+u,l):a},l.clamp=function(u){return arguments.length?(r=o=!!u,l):r&&o},l.clampX=function(u){return arguments.length?(r=!!u,l):r},l.clampY=function(u){return arguments.length?(o=!!u,l):o},l}function _e(t,n,i){const e=t.slice();e[11]=n[i];const r=vr(e[11],e[1]);return e[12]=r[0],e[13]=r[1],e}function ye(t){let n;return{c(){n=et("image"),this.h()},l(i){n=it(i,"image",{"xlink:href":!0,x:!0,y:!0,width:!0,height:!0,class:!0}),Z(n).forEach(A),this.h()},h(){Ue(n,"xlink:href",t[3](...t[11])),P(n,"x",t[12]),P(n,"y",t[13]),P(n,"width",t[2]),P(n,"height",t[2]),P(n,"class","svelte-511esr")},m(i,e){tt(i,n,e)},p:Ft,d(i){i&&A(n)}}}function mr(t){let n,i=Nt(t[1]),e=[];for(let r=0;r<i.length;r+=1)e[r]=ye(_e(t,i,r));return{c(){n=et("g");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){n=it(r,"g",{class:!0});var o=Z(n);for(let a=0;a<e.length;a+=1)e[a].l(o);o.forEach(A),this.h()},h(){P(n,"class","map-svg-g svelte-511esr"),dt(n,"visible",t[0])},m(r,o){tt(r,n,o);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(n,null)},p(r,[o]){if(o&14){i=Nt(r[1]);let a;for(a=0;a<i.length;a+=1){const s=_e(r,i,a);e[a]?e[a].p(s,o):(e[a]=ye(s),e[a].c(),e[a].m(n,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=i.length}o&1&&dt(n,"visible",r[0])},i:Ft,o:Ft,d(r){r&&A(n),Vn(e,r)}}}function vr(t,n){const[i,e]=t,{translate:[r,o],scale:a}=n;return[(i+r)*a,(e+o)*a]}function _r(t,n,i){let{urlPath:e}=n,{urlExtension:r}=n,{projection:o}=n,{visible:a=!1}=n;jn(),Ee(()=>{});const c=dr().size([2e3,1e3]).scale(o.scale()*2*Math.PI).translate(o([0,0]))(),{translate:[d,l],scale:u}=c,p=(g,_,M)=>`${e}${M}/${g}/${_}.${r}`;return t.$$set=g=>{"urlPath"in g&&i(4,e=g.urlPath),"urlExtension"in g&&i(5,r=g.urlExtension),"projection"in g&&i(6,o=g.projection),"visible"in g&&i(0,a=g.visible)},[a,c,u,p,e,r,o]}class yr extends an{constructor(n){super(),un(this,n,_r,mr,on,{urlPath:4,urlExtension:5,projection:6,visible:0})}}function Me(t,n,i){const e=t.slice();return e[16]=n[i],e}function Mr(t){let n,i;return n=new yr({props:{urlPath:t[16].urlPath,urlExtension:t[16].urlExtension,projection:t[4],visible:t[0].views[t[3]].maps&&t[0].views[t[3]].maps.includes(t[16].id)}}),{c(){Et(n.$$.fragment)},l(e){kt(n.$$.fragment,e)},m(e,r){zt(n,e,r),i=!0},p(e,r){const o={};r&1&&(o.urlPath=e[16].urlPath),r&1&&(o.urlExtension=e[16].urlExtension),r&9&&(o.visible=e[0].views[e[3]].maps&&e[0].views[e[3]].maps.includes(e[16].id)),n.$set(o)},i(e){i||(x(n.$$.fragment,e),i=!0)},o(e){at(n.$$.fragment,e),i=!1},d(e){Ot(n,e)}}}function wr(t){let n,i,e,r;const o=[Er,Sr],a=[];function s(c,d){return c[16].interactive?0:1}return n=s(t),i=a[n]=o[n](t),{c(){i.c(),e=mt()},l(c){i.l(c),e=mt()},m(c,d){a[n].m(c,d),tt(c,e,d),r=!0},p(c,d){let l=n;n=s(c),n===l?a[n].p(c,d):(Yn(),at(a[l],1,1,()=>{a[l]=null}),Xn(),i=a[n],i?i.p(c,d):(i=a[n]=o[n](c),i.c()),x(i,1),i.m(e.parentNode,e))},i(c){r||(x(i),r=!0)},o(c){at(i),r=!1},d(c){c&&A(e),a[n].d(c)}}}function Sr(t){let n,i;return n=new Xe({props:{url:t[16].url,geometryType:t[16].geometryType?t[16].geometryType:"polygons",id:t[16].id,projection:t[4],visible:t[0].views[t[3]].maps&&t[0].views[t[3]].maps.includes(t[16].id)}}),{c(){Et(n.$$.fragment)},l(e){kt(n.$$.fragment,e)},m(e,r){zt(n,e,r),i=!0},p(e,r){const o={};r&1&&(o.url=e[16].url),r&1&&(o.geometryType=e[16].geometryType?e[16].geometryType:"polygons"),r&1&&(o.id=e[16].id),r&9&&(o.visible=e[0].views[e[3]].maps&&e[0].views[e[3]].maps.includes(e[16].id)),n.$set(o)},i(e){i||(x(n.$$.fragment,e),i=!0)},o(e){at(n.$$.fragment,e),i=!1},d(e){Ot(n,e)}}}function Er(t){let n,i,e={url:t[16].url,geometryType:t[16].geometryType?t[16].geometryType:"polygons",id:t[16].id,projection:t[4],visible:t[0].views[t[3]].maps&&t[0].views[t[3]].maps.includes(t[16].id),interactive:!0};return n=new Xe({props:e}),t[11](n),n.$on("featureMouseOver",t[5]),n.$on("featureMouseOut",t[6]),n.$on("featureClick",t[7]),{c(){Et(n.$$.fragment)},l(r){kt(n.$$.fragment,r)},m(r,o){zt(n,r,o),i=!0},p(r,o){const a={};o&1&&(a.url=r[16].url),o&1&&(a.geometryType=r[16].geometryType?r[16].geometryType:"polygons"),o&1&&(a.id=r[16].id),o&9&&(a.visible=r[0].views[r[3]].maps&&r[0].views[r[3]].maps.includes(r[16].id)),n.$set(a)},i(r){i||(x(n.$$.fragment,r),i=!0)},o(r){at(n.$$.fragment,r),i=!1},d(r){t[11](null),Ot(n,r)}}}function we(t){let n,i,e,r;const o=[wr,Mr],a=[];function s(c,d){return c[16].type=="shapefile"?0:c[16].type=="tile"?1:-1}return~(n=s(t))&&(i=a[n]=o[n](t)),{c(){i&&i.c(),e=mt()},l(c){i&&i.l(c),e=mt()},m(c,d){~n&&a[n].m(c,d),tt(c,e,d),r=!0},p(c,d){let l=n;n=s(c),n===l?~n&&a[n].p(c,d):(i&&(Yn(),at(a[l],1,1,()=>{a[l]=null}),Xn()),~n?(i=a[n],i?i.p(c,d):(i=a[n]=o[n](c),i.c()),x(i,1),i.m(e.parentNode,e)):i=null)},i(c){r||(x(i),r=!0)},o(c){at(i),r=!1},d(c){c&&A(e),~n&&a[n].d(c)}}}function kr(t){let n,i,e,r=t[0].views[t[3]].name+"",o,a,s,c,d,l=Nt(Object.values(t[0].maps)),u=[];for(let g=0;g<l.length;g+=1)u[g]=we(Me(t,l,g));const p=g=>at(u[g],1,1,()=>{u[g]=null});return{c(){n=cn("div"),i=cn("div"),e=cn("h1"),o=qe(r),a=wn(),s=et("svg"),c=et("g");for(let g=0;g<u.length;g+=1)u[g].c();this.h()},l(g){n=fn(g,"DIV",{id:!0,class:!0});var _=Z(n);i=fn(_,"DIV",{id:!0,class:!0});var M=Z(i);e=fn(M,"H1",{class:!0});var S=Z(e);o=Be(S,r),S.forEach(A),M.forEach(A),a=Sn(_),s=it(_,"svg",{id:!0,class:!0});var m=Z(s);c=it(m,"g",{});var y=Z(c);for(let w=0;w<u.length;w+=1)u[w].l(y);y.forEach(A),m.forEach(A),_.forEach(A),this.h()},h(){P(e,"class","svelte-1deeijh"),P(i,"id","story-narrative"),P(i,"class","svelte-1deeijh"),P(s,"id","map-svg"),P(s,"class","svelte-1deeijh"),P(n,"id","map"),P(n,"class","svelte-1deeijh")},m(g,_){tt(g,n,_),lt(n,i),lt(i,e),lt(e,o),lt(n,a),lt(n,s),lt(s,c);for(let M=0;M<u.length;M+=1)u[M]&&u[M].m(c,null);t[12](c),d=!0},p(g,[_]){if((!d||_&9)&&r!==(r=g[0].views[g[3]].name+"")&&He(o,r),_&251){l=Nt(Object.values(g[0].maps));let M;for(M=0;M<l.length;M+=1){const S=Me(g,l,M);u[M]?(u[M].p(S,_),x(u[M],1)):(u[M]=we(S),u[M].c(),x(u[M],1),u[M].m(c,null))}for(Yn(),M=l.length;M<u.length;M+=1)p(M);Xn()}},i(g){if(!d){for(let _=0;_<l.length;_+=1)x(u[_]);d=!0}},o(g){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)at(u[_]);d=!1},d(g){g&&A(n),Vn(u,g),t[12](null)}}}let yn=800,Mn=600;function Se(t){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[[[t.nwLng,t.nwLat],[t.seLng,t.nwLat],[t.seLng,t.seLat],[t.nwLng,t.seLat],[t.nwLng,t.nwLat]]],type:"Polygon"}}]}}function zr(t,n,i){let{story:e={}}=n;function r(w){console.log("Maps:onChapterMouseOver(event:"+JSON.stringify(w.detail)+")"),s&&s.onChapterMouseOver(w)}function o(w){console.log("Maps:onChapterMouseLeave(event:"+JSON.stringify(w.detail)+")"),s&&s.onChapterMouseLeave(w)}function a(w){if(console.log(`Maps:onNavigate(event:${JSON.stringify(w.detail)})`),i(3,l=w.detail.viewID),e.views[l].extent){console.log(`Maps:onNavigate(era.extent:${JSON.stringify(e.views[l].extent)})`);const N=Se(e.views[l].extent);var k=je().projection(g);const z=k.bounds(N),[[L,b],[D,F]]=z;pt(c).transition().duration(3e3).ease(xe).call(d.transform,Gn.translate(yn/2,Mn/2).scale(.9/Math.max((D-L)/yn,(F-b)/Mn)).translate(-(L+D)/2,-(b+F)/2))}}let s,c,d,l=e.intialView;d=ar().on("zoom",p);const u=jn();function p(w){const{transform:k}=w;pt(c).attr("transform",k)}const g=Qi().rotate([74,0]).fitSize([yn,Mn],Se(e.views[e.intialView].extent));function _(w){console.log("Maps:onFeatureMouseOver(event.detail:"+JSON.stringify(w.detail)+")"),u("featureMouseOver",w.detail)}function M(w){console.log("Maps:onFeatureMouseOut(event.detail:"+JSON.stringify(w.detail)+")"),u("featureMouseOut",w.detail)}function S(w){console.log("Maps:onFeatureClick(event.detail:"+JSON.stringify(w.detail)+")"),u("featureClick",w.detail)}function m(w){Wt[w?"unshift":"push"](()=>{s=w,i(1,s)})}function y(w){Wt[w?"unshift":"push"](()=>{c=w,i(2,c)})}return t.$$set=w=>{"story"in w&&i(0,e=w.story)},[e,s,c,l,g,_,M,S,r,o,a,m,y]}class Or extends an{constructor(n){super(),un(this,n,zr,kr,on,{story:0,onChapterMouseOver:8,onChapterMouseLeave:9,onNavigate:10})}get onChapterMouseOver(){return this.$$.ctx[8]}get onChapterMouseLeave(){return this.$$.ctx[9]}get onNavigate(){return this.$$.ctx[10]}}const Nr="intro",Tr={"nyc-region-land":{id:"nyc-landline",type:"shapefile",url:"/gis/NYC_region_land_4326.geojson"},"nyc-historical_waterline":{id:"nyc-historical_waterline",type:"shapefile",url:"/gis/historical_water_polygons_final_4326.geojson"},"seventeenseventysix-shoreline":{id:"seventeenseventysix-shoreline",type:"shapefile",url:"/gis/1776_shoreline_polylines_4326.geojson"},pluto:{id:"pluto",type:"tile",urlPath:"/gis/pluto/",urlExtension:"png"},"indian-paths-kings-county":{id:"indian-paths-kings-county",type:"shapefile",url:"/gis/Indian_villages_ponds_paths_kings_cty_4326.geojson"},"indian-paths-ny":{id:"indian-paths-nyc",type:"shapefile",url:"/gis/Indian_paths_of_great_metropolis_NYC_bolton_1912_4326.geojson"},"oyster-historic-beds":{id:"oyster-historic-beds",type:"shapefile",url:"/gis/historic_oyster_beds_HEP.geojson"},"oyster-restoration-sites":{id:"oyster-restoration-sites",type:"shapefile",geometryType:"polygons",url:"/gis/recent_restoration_sites_oysters_2018_HEP.geojson"},"bip-lots":{id:"bip-lots",type:"shapefile",url:"/gis/era_3_1855-1950s_story_polys_sorted.geojson",interactive:!0}},Pr={intro:{id:"intro",name:"Intro",extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline"]},"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",extent:{nwLng:-74.09,nwLat:40.8,seLng:-73.94,seLat:40.6},maps:["nyc-landline","historical-waterline","indian-paths-kings-county","indian-paths-nyc","oyster-historic-beds","oyster-restoration-sites"]},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","historical-waterline"]},"urban-industrial-era":{id:"urban-industrial-era",name:"Urban + Industrial Era",extent:{nwLng:-73.965,nwLat:40.735,seLng:-73.945,seLat:40.705},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots"]},migration:{id:"migration",name:"Migration"},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization"}},Cr={"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",link:null,view:"pre-1600s",chapters:{}},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",link:null,view:"early-european-settlement",chapters:{}},"urban-industrial-era":{id:"urban-industrial-era",name:"Urban + Industrial Era",link:null,view:"urban-industrial-era",chapters:{sugar:{id:"sugar",name:"Sugar",link:"/era/urban-industrial/sugar"},petroleum:{id:"petroleum",name:"Petroleum",link:"/era/urban-industrial/petroleum"},"coal-tar-gasification":{id:"coal-tar-gasification",name:"Coal-tar Gasification",link:"/era/urban-industrial/coal-tar-gasification"},"shipbuilding-and-ironworks":{id:"shipbuilding-and-ironworks",name:"Shipbuilding and Ironworks",link:"/era/urban-industrial/shipbuilding-and-ironworks"},"the-creek-disappears":{id:"the-creek-disappears",name:"The Creek Disappears",link:"/era/urban-industrial/the-creek-disappears"},"eastern-district-terminal":{id:"eastern-district-terminal",name:"Eastern District Terminal",link:"/era/urban-industrial/eastern-district-terminal"},demographics:{id:"demographics",name:"Demographics",link:"/era/urban-industrial/demographics"}}},migration:{id:"migration",name:"Migration",link:null,view:"migration",chapters:{}},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization",link:null,view:"activism-deindustrialization",chapters:{}}},$t={intialView:Nr,maps:Tr,views:Pr,eras:Cr};function Lr(t){let n,i,e,r,o,a,s,c;n=new ti({}),n.$on("navigate",t[7]);let d={story:$t};e=new Or({props:d}),t[9](e),e.$on("featureMouseOver",t[2]),e.$on("featureMouseOut",t[3]),e.$on("featureClick",t[6]);let l={eras:$t.eras};return o=new ni({props:l}),t[10](o),o.$on("chapterMouseOver",t[4]),o.$on("chapterMouseLeave",t[5]),o.$on("navigate",t[7]),{c(){Et(n.$$.fragment),i=wn(),Et(e.$$.fragment),r=wn(),Et(o.$$.fragment)},l(u){kt(n.$$.fragment,u),i=Sn(u),kt(e.$$.fragment,u),r=Sn(u),kt(o.$$.fragment,u)},m(u,p){zt(n,u,p),tt(u,i,p),zt(e,u,p),tt(u,r,p),zt(o,u,p),a=!0,s||(c=Bt(window,"popstate",t[8]),s=!0)},p(u,[p]){const g={};e.$set(g);const _={};o.$set(_)},i(u){a||(x(n.$$.fragment,u),x(e.$$.fragment,u),x(o.$$.fragment,u),a=!0)},o(u){at(n.$$.fragment,u),at(e.$$.fragment,u),at(o.$$.fragment,u),a=!1},d(u){u&&(A(i),A(r)),Ot(n,u),t[9](null),Ot(e,u),t[10](null),Ot(o,u),s=!1,c()}}}function br(t,n,i){let e;We(t,Ke,m=>i(15,e=m));let r,o,a="intro";$t.views[a];let s=null;function c(m){console.log("routes/map:onFeatureMouseOver(event.detail:"+JSON.stringify(m.detail)+")"),r.onMapFeatureMouseOver(m)}function d(m){console.log("routes/map:onMapFeatureMouseOut(event.detail:"+JSON.stringify(m.detail)+")"),r.onMapFeatureMouseOut(m)}function l(m){console.log("routes/map:onChapterMouseOver(event.detail:"+JSON.stringify(m.detail)+")"),o.onChapterMouseOver(m)}function u(m){console.log("routes/map:onChapterMouseLeave(event.detail:"+JSON.stringify(m.detail)+")"),o.onChapterMouseLeave(m)}function p(m){console.log("routes/map:onFeatureClick(event.detail:"+JSON.stringify(m.detail)+")"),r.onMapFeatureClick(m)}function g(m,y=!0){console.log(`routes/map:onNavigate(event.detail:${JSON.stringify(m.detail)})`),a=m.detail.viewID,$t.views[a],s=m.detail.eraID,s&&$t.eras[s],o.onNavigate(m),r.onNavigate(m),y&&Ze(`#/view/${m.detail.viewID}`,{state:m.detail})}function _(m){m.state&&(console.log(`routes/:popstate:event.state:${JSON.stringify(m.state)}`),console.log(`routes/:popstate:page.state:${JSON.stringify(e.state)}`),m.state["sveltekit:states"].viewID&&g({detail:{...m.state["sveltekit:states"]}},!1))}function M(m){Wt[m?"unshift":"push"](()=>{o=m,i(1,o)})}function S(m){Wt[m?"unshift":"push"](()=>{r=m,i(0,r)})}return[r,o,c,d,l,u,p,g,_,M,S]}class Ar extends an{constructor(n){super(),un(this,n,br,Lr,on,{})}}export{Ar as component};
