import{s as it,Q as mn,R as vn,b as gn,f as W,m as H,S as pn,i as on,n as bn,T as Dt,U as Ft,x as ye,v as Cn,V as at,F as lt,C as Ve,W as Xe,e as Ge,c as je,h as qt,z as Wn,a as Vt,g as Xt}from"../chunks/scheduler.CswFsUOV.js";import{S as rt,i as ot,t as rn,g as Be,e as He,a as ln,c as wn,b as zn,m as kn,d as On}from"../chunks/index.CcUBC9rR.js";import{s as fn,d as We,i as bt,T as st,b as ct,c as Ze,N as Ue,a as Ke}from"../chunks/NavTimeline.CclYoO4t.js";function $n(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}class _n{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const u=i[r],o=t+u,f=Math.abs(t)<Math.abs(u)?t-(o-u):u-(o-t);f&&(i[e++]=f),t=o}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,u,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,r=t[--i],o=e+r,u=r-(o-e),!u););i>0&&(u<0&&t[i-1]<0||u>0&&t[i-1]>0)&&(r=u*2,e=o+r,r==e-o&&(o=e))}return o}}function*Qe(n){for(const t of n)yield*t}function Me(n){return Array.from(Qe(n))}function xe(n){let t;for(;t=n.sourceEvent;)n=t;return n}function dn(n,t){if(n=xe(n),t===void 0&&(t=n.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var e=i.createSVGPoint();return e.x=n.clientX,e.y=n.clientY,e=e.matrixTransform(t.getScreenCTM().inverse()),[e.x,e.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop]}}return[n.pageX,n.pageY]}const _t={capture:!0,passive:!1};function yt(n){n.preventDefault(),n.stopImmediatePropagation()}function ni(n){var t=n.document.documentElement,i=fn(n).on("dragstart.drag",yt,_t);"onselectstart"in t?i.on("selectstart.drag",yt,_t):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ti(n,t){var i=n.document.documentElement,e=fn(n).on("dragstart.drag",null);t&&(e.on("click.drag",yt,_t),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in i?e.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var ei=1e-12;function Gt(n){return((n=Math.exp(n))+1/n)/2}function ii(n){return((n=Math.exp(n))-1/n)/2}function ri(n){return((n=Math.exp(2*n))-1)/(n+1)}const oi=function n(t,i,e){function r(u,o){var f=u[0],c=u[1],s=u[2],a=o[0],l=o[1],g=o[2],d=a-f,_=l-c,y=d*d+_*_,M,m;if(y<ei)m=Math.log(g/s)/t,M=function(L){return[f+L*d,c+L*_,s*Math.exp(t*L*m)]};else{var w=Math.sqrt(y),k=(g*g-s*s+e*y)/(2*s*i*w),E=(g*g-s*s-e*y)/(2*g*i*w),C=Math.log(Math.sqrt(k*k+1)-k),z=Math.log(Math.sqrt(E*E+1)-E);m=(z-C)/t,M=function(L){var T=L*m,R=Gt(C),F=s/(i*w)*(R*ri(t*T+C)-ii(C));return[f+F*d,c+F*_,s*R/Gt(t*T+C)]}}return M.duration=m*1e3*t/Math.SQRT2,M}return r.rho=function(u){var o=Math.max(.001,+u),f=o*o,c=f*f;return n(o,f,c)},r}(Math.SQRT2,2,4);function ui(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function ai(n,t){return fetch(n,t).then(ui)}var J=1e-6,li=1e-12,D=Math.PI,K=D/2,jt=D/4,x=D*2,Q=180/D,j=D/180,Y=Math.abs,Se=Math.atan,Jn=Math.atan2,V=Math.cos,si=Math.exp,ci=Math.log,X=Math.sin,fi=Math.sign||function(n){return n>0?1:n<0?-1:0},Mn=Math.sqrt,hi=Math.tan;function pi(n){return n>1?0:n<-1?D:Math.acos(n)}function An(n){return n>1?K:n<-1?-K:Math.asin(n)}function tn(){}function Zn(n,t){n&&Ht.hasOwnProperty(n.type)&&Ht[n.type](n,t)}var Bt={Feature:function(n,t){Zn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)Zn(i[e].geometry,t)}},Ht={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){Mt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)Mt(i[e],t,0)},Polygon:function(n,t){Wt(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)Wt(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)Zn(i[e],t)}};function Mt(n,t,i){var e=-1,r=n.length-i,u;for(t.lineStart();++e<r;)u=n[e],t.point(u[0],u[1],u[2]);t.lineEnd()}function Wt(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)Mt(n[i],t,1);t.polygonEnd()}function Sn(n,t){n&&Bt.hasOwnProperty(n.type)?Bt[n.type](n,t):Zn(n,t)}function St(n){return[Jn(n[1],n[0]),An(n[2])]}function Nn(n){var t=n[0],i=n[1],e=V(i);return[e*V(t),e*X(t),X(i)]}function Vn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Un(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function ft(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Xn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Et(n){var t=Mn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function wt(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function zt(n,t){return Y(n)>D&&(n-=Math.round(n/x)*x),[n,t]}zt.invert=zt;function Ee(n,t,i){return(n%=x)?t||i?wt(Ut(n),Kt(t,i)):Ut(n):t||i?Kt(t,i):zt}function Zt(n){return function(t,i){return t+=n,Y(t)>D&&(t-=Math.round(t/x)*x),[t,i]}}function Ut(n){var t=Zt(n);return t.invert=Zt(-n),t}function Kt(n,t){var i=V(n),e=X(n),r=V(t),u=X(t);function o(f,c){var s=V(c),a=V(f)*s,l=X(f)*s,g=X(c),d=g*i+a*e;return[Jn(l*r-d*u,a*i-g*e),An(d*r+l*u)]}return o.invert=function(f,c){var s=V(c),a=V(f)*s,l=X(f)*s,g=X(c),d=g*r-l*u;return[Jn(l*r+g*u,a*i+d*e),An(d*i-a*e)]},o}function gi(n){n=Ee(n[0]*j,n[1]*j,n.length>2?n[2]*j:0);function t(i){return i=n(i[0]*j,i[1]*j),i[0]*=Q,i[1]*=Q,i}return t.invert=function(i){return i=n.invert(i[0]*j,i[1]*j),i[0]*=Q,i[1]*=Q,i},t}function di(n,t,i,e,r,u){if(i){var o=V(t),f=X(t),c=e*i;r==null?(r=t+e*x,u=t-c/2):(r=Qt(o,r),u=Qt(o,u),(e>0?r<u:r>u)&&(r+=e*x));for(var s,a=r;e>0?a>u:a<u;a-=c)s=St([o,-f*V(a),-f*X(a)]),n.point(s[0],s[1])}}function Qt(n,t){t=Nn(t),t[0]-=n,Et(t);var i=pi(-t[1]);return((-t[2]<0?-i:i)+x-J)%x}function we(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:tn,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function Hn(n,t){return Y(n[0]-t[0])<J&&Y(n[1]-t[1])<J}function Gn(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function ze(n,t,i,e,r){var u=[],o=[],f,c;if(n.forEach(function(_){if(!((y=_.length-1)<=0)){var y,M=_[0],m=_[y],w;if(Hn(M,m)){if(!M[2]&&!m[2]){for(r.lineStart(),f=0;f<y;++f)r.point((M=_[f])[0],M[1]);r.lineEnd();return}m[0]+=2*J}u.push(w=new Gn(M,_,null,!0)),o.push(w.o=new Gn(M,null,w,!1)),u.push(w=new Gn(m,_,null,!1)),o.push(w.o=new Gn(m,null,w,!0))}}),!!u.length){for(o.sort(t),xt(u),xt(o),f=0,c=o.length;f<c;++f)o[f].e=i=!i;for(var s=u[0],a,l;;){for(var g=s,d=!0;g.v;)if((g=g.n)===s)return;a=g.z,r.lineStart();do{if(g.v=g.o.v=!0,g.e){if(d)for(f=0,c=a.length;f<c;++f)r.point((l=a[f])[0],l[1]);else e(g.x,g.n.x,1,r);g=g.n}else{if(d)for(a=g.p.z,f=a.length-1;f>=0;--f)r.point((l=a[f])[0],l[1]);else e(g.x,g.p.x,-1,r);g=g.p}g=g.o,a=g.z,d=!d}while(!g.v);r.lineEnd()}}}function xt(n){if(t=n.length){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function ht(n){return Y(n[0])<=D?n[0]:fi(n[0])*((Y(n[0])+D)%x-D)}function mi(n,t){var i=ht(t),e=t[1],r=X(e),u=[X(i),-V(i),0],o=0,f=0,c=new _n;r===1?e=K+J:r===-1&&(e=-K-J);for(var s=0,a=n.length;s<a;++s)if(g=(l=n[s]).length)for(var l,g,d=l[g-1],_=ht(d),y=d[1]/2+jt,M=X(y),m=V(y),w=0;w<g;++w,_=E,M=z,m=L,d=k){var k=l[w],E=ht(k),C=k[1]/2+jt,z=X(C),L=V(C),T=E-_,R=T>=0?1:-1,F=R*T,N=F>D,U=M*z;if(c.add(Jn(U*R*X(F),m*L+U*V(F))),o+=N?T+R*x:T,N^_>=i^E>=i){var A=Un(Nn(d),Nn(k));Et(A);var h=Un(u,A);Et(h);var p=(N^T>=0?-1:1)*An(h[2]);(e>p||e===p&&(A[0]||A[1]))&&(f+=N^T>=0?1:-1)}}return(o<-J||o<J&&c<-li)^f&1}function ke(n,t,i,e){return function(r){var u=t(r),o=we(),f=t(o),c=!1,s,a,l,g={point:d,lineStart:y,lineEnd:M,polygonStart:function(){g.point=m,g.lineStart=w,g.lineEnd=k,a=[],s=[]},polygonEnd:function(){g.point=d,g.lineStart=y,g.lineEnd=M,a=Me(a);var E=mi(s,e);a.length?(c||(r.polygonStart(),c=!0),ze(a,_i,E,i,r)):E&&(c||(r.polygonStart(),c=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),a=s=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(E,C){n(E,C)&&r.point(E,C)}function _(E,C){u.point(E,C)}function y(){g.point=_,u.lineStart()}function M(){g.point=d,u.lineEnd()}function m(E,C){l.push([E,C]),f.point(E,C)}function w(){f.lineStart(),l=[]}function k(){m(l[0][0],l[0][1]),f.lineEnd();var E=f.clean(),C=o.result(),z,L=C.length,T,R,F;if(l.pop(),s.push(l),l=null,!!L){if(E&1){if(R=C[0],(T=R.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),z=0;z<T;++z)r.point((F=R[z])[0],F[1]);r.lineEnd()}return}L>1&&E&2&&C.push(C.pop().concat(C.shift())),a.push(C.filter(vi))}}return g}}function vi(n){return n.length>1}function _i(n,t){return((n=n.x)[0]<0?n[1]-K-J:K-n[1])-((t=t.x)[0]<0?t[1]-K-J:K-t[1])}const ne=ke(function(){return!0},yi,Si,[-D,-K]);function yi(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(u,o){var f=u>0?D:-D,c=Y(u-t);Y(c-D)<J?(n.point(t,i=(i+o)/2>0?K:-K),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(f,i),n.point(u,i),r=0):e!==f&&c>=D&&(Y(t-e)<J&&(t-=e*J),Y(u-f)<J&&(u-=f*J),i=Mi(t,i,u,o),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(f,i),r=0),n.point(t=u,i=o),e=f},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function Mi(n,t,i,e){var r,u,o=X(n-i);return Y(o)>J?Se((X(t)*(u=V(e))*X(i)-X(e)*(r=V(t))*X(n))/(r*u*o)):(t+e)/2}function Si(n,t,i,e){var r;if(n==null)r=i*K,e.point(-D,r),e.point(0,r),e.point(D,r),e.point(D,0),e.point(D,-r),e.point(0,-r),e.point(-D,-r),e.point(-D,0),e.point(-D,r);else if(Y(n[0]-t[0])>J){var u=n[0]<t[0]?D:-D;r=i*u/2,e.point(-u,r),e.point(0,r),e.point(u,r)}else e.point(t[0],t[1])}function Ei(n){var t=V(n),i=2*j,e=t>0,r=Y(t)>J;function u(a,l,g,d){di(d,n,i,g,a,l)}function o(a,l){return V(a)*V(l)>t}function f(a){var l,g,d,_,y;return{lineStart:function(){_=d=!1,y=1},point:function(M,m){var w=[M,m],k,E=o(M,m),C=e?E?0:s(M,m):E?s(M+(M<0?D:-D),m):0;if(!l&&(_=d=E)&&a.lineStart(),E!==d&&(k=c(l,w),(!k||Hn(l,k)||Hn(w,k))&&(w[2]=1)),E!==d)y=0,E?(a.lineStart(),k=c(w,l),a.point(k[0],k[1])):(k=c(l,w),a.point(k[0],k[1],2),a.lineEnd()),l=k;else if(r&&l&&e^E){var z;!(C&g)&&(z=c(w,l,!0))&&(y=0,e?(a.lineStart(),a.point(z[0][0],z[0][1]),a.point(z[1][0],z[1][1]),a.lineEnd()):(a.point(z[1][0],z[1][1]),a.lineEnd(),a.lineStart(),a.point(z[0][0],z[0][1],3)))}E&&(!l||!Hn(l,w))&&a.point(w[0],w[1]),l=w,d=E,g=C},lineEnd:function(){d&&a.lineEnd(),l=null},clean:function(){return y|(_&&d)<<1}}}function c(a,l,g){var d=Nn(a),_=Nn(l),y=[1,0,0],M=Un(d,_),m=Vn(M,M),w=M[0],k=m-w*w;if(!k)return!g&&a;var E=t*m/k,C=-t*w/k,z=Un(y,M),L=Xn(y,E),T=Xn(M,C);ft(L,T);var R=z,F=Vn(L,R),N=Vn(R,R),U=F*F-N*(Vn(L,L)-1);if(!(U<0)){var A=Mn(U),h=Xn(R,(-F-A)/N);if(ft(h,L),h=St(h),!g)return h;var p=a[0],v=l[0],S=a[1],O=l[1],$;v<p&&($=p,p=v,v=$);var P=v-p,I=Y(P-D)<J,b=I||P<J;if(!I&&O<S&&($=S,S=O,O=$),b?I?S+O>0^h[1]<(Y(h[0]-p)<J?S:O):S<=h[1]&&h[1]<=O:P>D^(p<=h[0]&&h[0]<=v)){var G=Xn(R,(-F+A)/N);return ft(G,L),[h,St(G)]}}}function s(a,l){var g=e?n:D-n,d=0;return a<-g?d|=1:a>g&&(d|=2),l<-g?d|=4:l>g&&(d|=8),d}return ke(o,f,u,e?[0,-n]:[-D,n-D])}function wi(n,t,i,e,r,u){var o=n[0],f=n[1],c=t[0],s=t[1],a=0,l=1,g=c-o,d=s-f,_;if(_=i-o,!(!g&&_>0)){if(_/=g,g<0){if(_<a)return;_<l&&(l=_)}else if(g>0){if(_>l)return;_>a&&(a=_)}if(_=r-o,!(!g&&_<0)){if(_/=g,g<0){if(_>l)return;_>a&&(a=_)}else if(g>0){if(_<a)return;_<l&&(l=_)}if(_=e-f,!(!d&&_>0)){if(_/=d,d<0){if(_<a)return;_<l&&(l=_)}else if(d>0){if(_>l)return;_>a&&(a=_)}if(_=u-f,!(!d&&_<0)){if(_/=d,d<0){if(_>l)return;_>a&&(a=_)}else if(d>0){if(_<a)return;_<l&&(l=_)}return a>0&&(n[0]=o+a*g,n[1]=f+a*d),l<1&&(t[0]=o+l*g,t[1]=f+l*d),!0}}}}}var Tn=1e9,jn=-Tn;function zi(n,t,i,e){function r(s,a){return n<=s&&s<=i&&t<=a&&a<=e}function u(s,a,l,g){var d=0,_=0;if(s==null||(d=o(s,l))!==(_=o(a,l))||c(s,a)<0^l>0)do g.point(d===0||d===3?n:i,d>1?e:t);while((d=(d+l+4)%4)!==_);else g.point(a[0],a[1])}function o(s,a){return Y(s[0]-n)<J?a>0?0:3:Y(s[0]-i)<J?a>0?2:1:Y(s[1]-t)<J?a>0?1:0:a>0?3:2}function f(s,a){return c(s.x,a.x)}function c(s,a){var l=o(s,1),g=o(a,1);return l!==g?l-g:l===0?a[1]-s[1]:l===1?s[0]-a[0]:l===2?s[1]-a[1]:a[0]-s[0]}return function(s){var a=s,l=we(),g,d,_,y,M,m,w,k,E,C,z,L={point:T,lineStart:U,lineEnd:A,polygonStart:F,polygonEnd:N};function T(p,v){r(p,v)&&a.point(p,v)}function R(){for(var p=0,v=0,S=d.length;v<S;++v)for(var O=d[v],$=1,P=O.length,I=O[0],b,G,q=I[0],Z=I[1];$<P;++$)b=q,G=Z,I=O[$],q=I[0],Z=I[1],G<=e?Z>e&&(q-b)*(e-G)>(Z-G)*(n-b)&&++p:Z<=e&&(q-b)*(e-G)<(Z-G)*(n-b)&&--p;return p}function F(){a=l,g=[],d=[],z=!0}function N(){var p=R(),v=z&&p,S=(g=Me(g)).length;(v||S)&&(s.polygonStart(),v&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),S&&ze(g,f,p,u,s),s.polygonEnd()),a=s,g=d=_=null}function U(){L.point=h,d&&d.push(_=[]),C=!0,E=!1,w=k=NaN}function A(){g&&(h(y,M),m&&E&&l.rejoin(),g.push(l.result())),L.point=T,E&&a.lineEnd()}function h(p,v){var S=r(p,v);if(d&&_.push([p,v]),C)y=p,M=v,m=S,C=!1,S&&(a.lineStart(),a.point(p,v));else if(S&&E)a.point(p,v);else{var O=[w=Math.max(jn,Math.min(Tn,w)),k=Math.max(jn,Math.min(Tn,k))],$=[p=Math.max(jn,Math.min(Tn,p)),v=Math.max(jn,Math.min(Tn,v))];wi(O,$,n,t,i,e)?(E||(a.lineStart(),a.point(O[0],O[1])),a.point($[0],$[1]),S||a.lineEnd(),z=!1):S&&(a.lineStart(),a.point(p,v),z=!1)}w=p,k=v,E=S}return L}}const kt=n=>n;var pt=new _n,Ot=new _n,Oe,Ce,Ct,$t,hn={point:tn,lineStart:tn,lineEnd:tn,polygonStart:function(){hn.lineStart=ki,hn.lineEnd=Ci},polygonEnd:function(){hn.lineStart=hn.lineEnd=hn.point=tn,pt.add(Y(Ot)),Ot=new _n},result:function(){var n=pt/2;return pt=new _n,n}};function ki(){hn.point=Oi}function Oi(n,t){hn.point=$e,Oe=Ct=n,Ce=$t=t}function $e(n,t){Ot.add($t*n-Ct*t),Ct=n,$t=t}function Ci(){$e(Oe,Ce)}var Pn=1/0,Kn=Pn,Yn=-Pn,Qn=Yn,xn={point:$i,lineStart:tn,lineEnd:tn,polygonStart:tn,polygonEnd:tn,result:function(){var n=[[Pn,Kn],[Yn,Qn]];return Yn=Qn=-(Kn=Pn=1/0),n}};function $i(n,t){n<Pn&&(Pn=n),n>Yn&&(Yn=n),t<Kn&&(Kn=t),t>Qn&&(Qn=t)}var Nt=0,Pt=0,Rn=0,nt=0,tt=0,En=0,Lt=0,Tt=0,In=0,Ne,Pe,un,an,nn={point:yn,lineStart:te,lineEnd:ee,polygonStart:function(){nn.lineStart=Li,nn.lineEnd=Ti},polygonEnd:function(){nn.point=yn,nn.lineStart=te,nn.lineEnd=ee},result:function(){var n=In?[Lt/In,Tt/In]:En?[nt/En,tt/En]:Rn?[Nt/Rn,Pt/Rn]:[NaN,NaN];return Nt=Pt=Rn=nt=tt=En=Lt=Tt=In=0,n}};function yn(n,t){Nt+=n,Pt+=t,++Rn}function te(){nn.point=Ni}function Ni(n,t){nn.point=Pi,yn(un=n,an=t)}function Pi(n,t){var i=n-un,e=t-an,r=Mn(i*i+e*e);nt+=r*(un+n)/2,tt+=r*(an+t)/2,En+=r,yn(un=n,an=t)}function ee(){nn.point=yn}function Li(){nn.point=Ri}function Ti(){Le(Ne,Pe)}function Ri(n,t){nn.point=Le,yn(Ne=un=n,Pe=an=t)}function Le(n,t){var i=n-un,e=t-an,r=Mn(i*i+e*e);nt+=r*(un+n)/2,tt+=r*(an+t)/2,En+=r,r=an*n-un*t,Lt+=r*(un+n),Tt+=r*(an+t),In+=r*3,yn(un=n,an=t)}function Te(n){this._context=n}Te.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,x);break}}},result:tn};var Rt=new _n,gt,Re,Ie,Dn,Fn,qn={point:tn,lineStart:function(){qn.point=Ii},lineEnd:function(){gt&&De(Re,Ie),qn.point=tn},polygonStart:function(){gt=!0},polygonEnd:function(){gt=null},result:function(){var n=+Rt;return Rt=new _n,n}};function Ii(n,t){qn.point=De,Re=Dn=n,Ie=Fn=t}function De(n,t){Dn-=n,Fn-=t,Rt.add(Mn(Dn*Dn+Fn*Fn)),Dn=n,Fn=t}let ie,et,re,oe;class ue{constructor(t){this._append=t==null?Fe:Di(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,i){switch(this._point){case 0:{this._append`M${t},${i}`,this._point=1;break}case 1:{this._append`L${t},${i}`;break}default:{if(this._append`M${t},${i}`,this._radius!==re||this._append!==et){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,re=e,et=this._append,oe=this._,this._=r}this._+=oe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Fe(n){let t=1;this._+=n[0];for(const i=n.length;t<i;++t)this._+=arguments[t]+n[t]}function Di(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Fe;if(t!==ie){const i=10**t;ie=t,et=function(r){let u=1;this._+=r[0];for(const o=r.length;u<o;++u)this._+=Math.round(arguments[u]*i)/i+r[u]}}return et}function be(n,t){let i=3,e=4.5,r,u;function o(f){return f&&(typeof e=="function"&&u.pointRadius(+e.apply(this,arguments)),Sn(f,r(u))),u.result()}return o.area=function(f){return Sn(f,r(hn)),hn.result()},o.measure=function(f){return Sn(f,r(qn)),qn.result()},o.bounds=function(f){return Sn(f,r(xn)),xn.result()},o.centroid=function(f){return Sn(f,r(nn)),nn.result()},o.projection=function(f){return arguments.length?(r=f==null?(n=null,kt):(n=f).stream,o):n},o.context=function(f){return arguments.length?(u=f==null?(t=null,new ue(i)):new Te(t=f),typeof e!="function"&&u.pointRadius(e),o):t},o.pointRadius=function(f){return arguments.length?(e=typeof f=="function"?f:(u.pointRadius(+f),+f),o):e},o.digits=function(f){if(!arguments.length)return i;if(f==null)i=null;else{const c=Math.floor(f);if(!(c>=0))throw new RangeError(`invalid digits: ${f}`);i=c}return t===null&&(u=new ue(i)),o},o.projection(n).digits(i).context(t)}function Jt(n){return function(t){var i=new It;for(var e in n)i[e]=n[e];return i.stream=t,i}}function It(){}It.prototype={constructor:It,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function At(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),Sn(i,n.stream(xn)),t(xn.result()),e!=null&&n.clipExtent(e),n}function Je(n,t,i){return At(n,function(e){var r=t[1][0]-t[0][0],u=t[1][1]-t[0][1],o=Math.min(r/(e[1][0]-e[0][0]),u/(e[1][1]-e[0][1])),f=+t[0][0]+(r-o*(e[1][0]+e[0][0]))/2,c=+t[0][1]+(u-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([f,c])},i)}function Fi(n,t,i){return Je(n,[[0,0],t],i)}function bi(n,t,i){return At(n,function(e){var r=+t,u=r/(e[1][0]-e[0][0]),o=(r-u*(e[1][0]+e[0][0]))/2,f=-u*e[0][1];n.scale(150*u).translate([o,f])},i)}function Ji(n,t,i){return At(n,function(e){var r=+t,u=r/(e[1][1]-e[0][1]),o=-u*e[0][0],f=(r-u*(e[1][1]+e[0][1]))/2;n.scale(150*u).translate([o,f])},i)}var ae=16,Ai=V(30*j);function le(n,t){return+t?qi(n,t):Yi(n)}function Yi(n){return Jt({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function qi(n,t){function i(e,r,u,o,f,c,s,a,l,g,d,_,y,M){var m=s-e,w=a-r,k=m*m+w*w;if(k>4*t&&y--){var E=o+g,C=f+d,z=c+_,L=Mn(E*E+C*C+z*z),T=An(z/=L),R=Y(Y(z)-1)<J||Y(u-l)<J?(u+l)/2:Jn(C,E),F=n(R,T),N=F[0],U=F[1],A=N-e,h=U-r,p=w*A-m*h;(p*p/k>t||Y((m*A+w*h)/k-.5)>.3||o*g+f*d+c*_<Ai)&&(i(e,r,u,o,f,c,N,U,R,E/=L,C/=L,z,y,M),M.point(N,U),i(N,U,R,E,C,z,s,a,l,g,d,_,y,M))}}return function(e){var r,u,o,f,c,s,a,l,g,d,_,y,M={point:m,lineStart:w,lineEnd:E,polygonStart:function(){e.polygonStart(),M.lineStart=C},polygonEnd:function(){e.polygonEnd(),M.lineStart=w}};function m(T,R){T=n(T,R),e.point(T[0],T[1])}function w(){l=NaN,M.point=k,e.lineStart()}function k(T,R){var F=Nn([T,R]),N=n(T,R);i(l,g,a,d,_,y,l=N[0],g=N[1],a=T,d=F[0],_=F[1],y=F[2],ae,e),e.point(l,g)}function E(){M.point=m,e.lineEnd()}function C(){w(),M.point=z,M.lineEnd=L}function z(T,R){k(r=T,R),u=l,o=g,f=d,c=_,s=y,M.point=k}function L(){i(l,g,a,d,_,y,u,o,r,f,c,s,ae,e),M.lineEnd=E,E()}return M}}var Vi=Jt({point:function(n,t){this.stream.point(n*j,t*j)}});function Xi(n){return Jt({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function Gi(n,t,i,e,r){function u(o,f){return o*=e,f*=r,[t+n*o,i-n*f]}return u.invert=function(o,f){return[(o-t)/n*e,(i-f)/n*r]},u}function se(n,t,i,e,r,u){if(!u)return Gi(n,t,i,e,r);var o=V(u),f=X(u),c=o*n,s=f*n,a=o/n,l=f/n,g=(f*i-o*t)/n,d=(f*t+o*i)/n;function _(y,M){return y*=e,M*=r,[c*y-s*M+t,i-s*y-c*M]}return _.invert=function(y,M){return[e*(a*y-l*M+g),r*(d-l*y-a*M)]},_}function ji(n){return Bi(function(){return n})()}function Bi(n){var t,i=150,e=480,r=250,u=0,o=0,f=0,c=0,s=0,a,l=0,g=1,d=1,_=null,y=ne,M=null,m,w,k,E=kt,C=.5,z,L,T,R,F;function N(p){return T(p[0]*j,p[1]*j)}function U(p){return p=T.invert(p[0],p[1]),p&&[p[0]*Q,p[1]*Q]}N.stream=function(p){return R&&F===p?R:R=Vi(Xi(a)(y(z(E(F=p)))))},N.preclip=function(p){return arguments.length?(y=p,_=void 0,h()):y},N.postclip=function(p){return arguments.length?(E=p,M=m=w=k=null,h()):E},N.clipAngle=function(p){return arguments.length?(y=+p?Ei(_=p*j):(_=null,ne),h()):_*Q},N.clipExtent=function(p){return arguments.length?(E=p==null?(M=m=w=k=null,kt):zi(M=+p[0][0],m=+p[0][1],w=+p[1][0],k=+p[1][1]),h()):M==null?null:[[M,m],[w,k]]},N.scale=function(p){return arguments.length?(i=+p,A()):i},N.translate=function(p){return arguments.length?(e=+p[0],r=+p[1],A()):[e,r]},N.center=function(p){return arguments.length?(u=p[0]%360*j,o=p[1]%360*j,A()):[u*Q,o*Q]},N.rotate=function(p){return arguments.length?(f=p[0]%360*j,c=p[1]%360*j,s=p.length>2?p[2]%360*j:0,A()):[f*Q,c*Q,s*Q]},N.angle=function(p){return arguments.length?(l=p%360*j,A()):l*Q},N.reflectX=function(p){return arguments.length?(g=p?-1:1,A()):g<0},N.reflectY=function(p){return arguments.length?(d=p?-1:1,A()):d<0},N.precision=function(p){return arguments.length?(z=le(L,C=p*p),h()):Mn(C)},N.fitExtent=function(p,v){return Je(N,p,v)},N.fitSize=function(p,v){return Fi(N,p,v)},N.fitWidth=function(p,v){return bi(N,p,v)},N.fitHeight=function(p,v){return Ji(N,p,v)};function A(){var p=se(i,0,0,g,d,l).apply(null,t(u,o)),v=se(i,e-p[0],r-p[1],g,d,l);return a=Ee(f,c,s),L=wt(t,v),T=wt(a,L),z=le(L,C),h()}function h(){return R=F=null,N}return function(){return t=n.apply(this,arguments),N.invert=t.invert&&U,A()}}function Yt(n,t){return[n,ci(hi((K+t)/2))]}Yt.invert=function(n,t){return[n,2*Se(si(t))-K]};function Hi(){return Wi(Yt).scale(961/x)}function Wi(n){var t=ji(n),i=t.center,e=t.scale,r=t.translate,u=t.clipExtent,o=null,f,c,s;t.scale=function(l){return arguments.length?(e(l),a()):e()},t.translate=function(l){return arguments.length?(r(l),a()):r()},t.center=function(l){return arguments.length?(i(l),a()):i()},t.clipExtent=function(l){return arguments.length?(l==null?o=f=c=s=null:(o=+l[0][0],f=+l[0][1],c=+l[1][0],s=+l[1][1]),a()):o==null?null:[[o,f],[c,s]]};function a(){var l=D*e(),g=t(gi(t.rotate()).invert([0,0]));return u(o==null?[[g[0]-l,g[1]-l],[g[0]+l,g[1]+l]]:n===Yt?[[Math.max(g[0]-l,o),f],[Math.min(g[0]+l,c),s]]:[[o,Math.max(g[1]-l,f)],[c,Math.min(g[1]+l,s)]])}return a()}const Bn=n=>()=>n;function Zi(n,{sourceEvent:t,target:i,transform:e,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:r}})}function dt(n){n.stopImmediatePropagation()}function Ln(n){n.preventDefault(),n.stopImmediatePropagation()}function Ui(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function Ki(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function ce(){return this.__zoom||bt}function Qi(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function xi(){return navigator.maxTouchPoints||"ontouchstart"in this}function nr(n,t,i){var e=n.invertX(t[0][0])-i[0][0],r=n.invertX(t[1][0])-i[1][0],u=n.invertY(t[0][1])-i[0][1],o=n.invertY(t[1][1])-i[1][1];return n.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),o>u?(u+o)/2:Math.min(0,u)||Math.max(0,o))}function tr(){var n=Ui,t=Ki,i=nr,e=Qi,r=xi,u=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],f=250,c=oi,s=We("start","zoom","end"),a,l,g,d=500,_=150,y=0,M=10;function m(h){h.property("__zoom",ce).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",F).filter(r).on("touchstart.zoom",N).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(h,p,v,S){var O=h.selection?h.selection():h;O.property("__zoom",ce),h!==O?C(h,p,v,S):O.interrupt().each(function(){z(this,arguments).event(S).start().zoom(null,typeof p=="function"?p.apply(this,arguments):p).end()})},m.scaleBy=function(h,p,v,S){m.scaleTo(h,function(){var O=this.__zoom.k,$=typeof p=="function"?p.apply(this,arguments):p;return O*$},v,S)},m.scaleTo=function(h,p,v,S){m.transform(h,function(){var O=t.apply(this,arguments),$=this.__zoom,P=v==null?E(O):typeof v=="function"?v.apply(this,arguments):v,I=$.invert(P),b=typeof p=="function"?p.apply(this,arguments):p;return i(k(w($,b),P,I),O,o)},v,S)},m.translateBy=function(h,p,v,S){m.transform(h,function(){return i(this.__zoom.translate(typeof p=="function"?p.apply(this,arguments):p,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),o)},null,S)},m.translateTo=function(h,p,v,S,O){m.transform(h,function(){var $=t.apply(this,arguments),P=this.__zoom,I=S==null?E($):typeof S=="function"?S.apply(this,arguments):S;return i(bt.translate(I[0],I[1]).scale(P.k).translate(typeof p=="function"?-p.apply(this,arguments):-p,typeof v=="function"?-v.apply(this,arguments):-v),$,o)},S,O)};function w(h,p){return p=Math.max(u[0],Math.min(u[1],p)),p===h.k?h:new st(p,h.x,h.y)}function k(h,p,v){var S=p[0]-v[0]*h.k,O=p[1]-v[1]*h.k;return S===h.x&&O===h.y?h:new st(h.k,S,O)}function E(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function C(h,p,v,S){h.on("start.zoom",function(){z(this,arguments).event(S).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(S).end()}).tween("zoom",function(){var O=this,$=arguments,P=z(O,$).event(S),I=t.apply(O,$),b=v==null?E(I):typeof v=="function"?v.apply(O,$):v,G=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),q=O.__zoom,Z=typeof p=="function"?p.apply(O,$):p,sn=c(q.invert(b).concat(G/q.k),Z.invert(b).concat(G/Z.k));return function(en){if(en===1)en=Z;else{var cn=sn(en),ut=G/cn[2];en=new st(ut,b[0]-cn[0]*ut,b[1]-cn[1]*ut)}P.zoom(null,en)}})}function z(h,p,v){return!v&&h.__zooming||new L(h,p)}function L(h,p){this.that=h,this.args=p,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,p),this.taps=0}L.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,p){return this.mouse&&h!=="mouse"&&(this.mouse[1]=p.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=p.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=p.invert(this.touch1[0])),this.that.__zoom=p,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var p=fn(this.that).datum();s.call(h,this.that,new Zi(h,{sourceEvent:this.sourceEvent,target:m,type:h,transform:this.that.__zoom,dispatch:s}),p)}};function T(h,...p){if(!n.apply(this,arguments))return;var v=z(this,p).event(h),S=this.__zoom,O=Math.max(u[0],Math.min(u[1],S.k*Math.pow(2,e.apply(this,arguments)))),$=dn(h);if(v.wheel)(v.mouse[0][0]!==$[0]||v.mouse[0][1]!==$[1])&&(v.mouse[1]=S.invert(v.mouse[0]=$)),clearTimeout(v.wheel);else{if(S.k===O)return;v.mouse=[$,S.invert($)],ct(this),v.start()}Ln(h),v.wheel=setTimeout(P,_),v.zoom("mouse",i(k(w(S,O),v.mouse[0],v.mouse[1]),v.extent,o));function P(){v.wheel=null,v.end()}}function R(h,...p){if(g||!n.apply(this,arguments))return;var v=h.currentTarget,S=z(this,p,!0).event(h),O=fn(h.view).on("mousemove.zoom",b,!0).on("mouseup.zoom",G,!0),$=dn(h,v),P=h.clientX,I=h.clientY;ni(h.view),dt(h),S.mouse=[$,this.__zoom.invert($)],ct(this),S.start();function b(q){if(Ln(q),!S.moved){var Z=q.clientX-P,sn=q.clientY-I;S.moved=Z*Z+sn*sn>y}S.event(q).zoom("mouse",i(k(S.that.__zoom,S.mouse[0]=dn(q,v),S.mouse[1]),S.extent,o))}function G(q){O.on("mousemove.zoom mouseup.zoom",null),ti(q.view,S.moved),Ln(q),S.event(q).end()}}function F(h,...p){if(n.apply(this,arguments)){var v=this.__zoom,S=dn(h.changedTouches?h.changedTouches[0]:h,this),O=v.invert(S),$=v.k*(h.shiftKey?.5:2),P=i(k(w(v,$),S,O),t.apply(this,p),o);Ln(h),f>0?fn(this).transition().duration(f).call(C,P,S,h):fn(this).call(m.transform,P,S,h)}}function N(h,...p){if(n.apply(this,arguments)){var v=h.touches,S=v.length,O=z(this,p,h.changedTouches.length===S).event(h),$,P,I,b;for(dt(h),P=0;P<S;++P)I=v[P],b=dn(I,this),b=[b,this.__zoom.invert(b),I.identifier],O.touch0?!O.touch1&&O.touch0[2]!==b[2]&&(O.touch1=b,O.taps=0):(O.touch0=b,$=!0,O.taps=1+!!a);a&&(a=clearTimeout(a)),$&&(O.taps<2&&(l=b[0],a=setTimeout(function(){a=null},d)),ct(this),O.start())}}function U(h,...p){if(this.__zooming){var v=z(this,p).event(h),S=h.changedTouches,O=S.length,$,P,I,b;for(Ln(h),$=0;$<O;++$)P=S[$],I=dn(P,this),v.touch0&&v.touch0[2]===P.identifier?v.touch0[0]=I:v.touch1&&v.touch1[2]===P.identifier&&(v.touch1[0]=I);if(P=v.that.__zoom,v.touch1){var G=v.touch0[0],q=v.touch0[1],Z=v.touch1[0],sn=v.touch1[1],en=(en=Z[0]-G[0])*en+(en=Z[1]-G[1])*en,cn=(cn=sn[0]-q[0])*cn+(cn=sn[1]-q[1])*cn;P=w(P,Math.sqrt(en/cn)),I=[(G[0]+Z[0])/2,(G[1]+Z[1])/2],b=[(q[0]+sn[0])/2,(q[1]+sn[1])/2]}else if(v.touch0)I=v.touch0[0],b=v.touch0[1];else return;v.zoom("touch",i(k(P,I,b),v.extent,o))}}function A(h,...p){if(this.__zooming){var v=z(this,p).event(h),S=h.changedTouches,O=S.length,$,P;for(dt(h),g&&clearTimeout(g),g=setTimeout(function(){g=null},d),$=0;$<O;++$)P=S[$],v.touch0&&v.touch0[2]===P.identifier?delete v.touch0:v.touch1&&v.touch1[2]===P.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(P=dn(P,this),Math.hypot(l[0]-P[0],l[1]-P[1])<M)){var I=fn(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return m.wheelDelta=function(h){return arguments.length?(e=typeof h=="function"?h:Bn(+h),m):e},m.filter=function(h){return arguments.length?(n=typeof h=="function"?h:Bn(!!h),m):n},m.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:Bn(!!h),m):r},m.extent=function(h){return arguments.length?(t=typeof h=="function"?h:Bn([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),m):t},m.scaleExtent=function(h){return arguments.length?(u[0]=+h[0],u[1]=+h[1],m):[u[0],u[1]]},m.translateExtent=function(h){return arguments.length?(o[0][0]=+h[0][0],o[1][0]=+h[1][0],o[0][1]=+h[0][1],o[1][1]=+h[1][1],m):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},m.constrain=function(h){return arguments.length?(i=h,m):i},m.duration=function(h){return arguments.length?(f=+h,m):f},m.interpolate=function(h){return arguments.length?(c=h,m):c},m.on=function(){var h=s.on.apply(s,arguments);return h===s?m:h},m.clickDistance=function(h){return arguments.length?(y=(h=+h)*h,m):Math.sqrt(y)},m.tapDistance=function(h){return arguments.length?(M=+h,m):M},m}function fe(n,t,i){const e=n.slice();return e[14]=t[i],e}function er(n){let t,i;return{c(){t=mn("path"),this.h()},l(e){t=vn(e,"path",{d:!0,class:!0}),gn(t).forEach(W),this.h()},h(){H(t,"d",i=n[4](n[14])),H(t,"class","svelte-1mqhvhf")},m(e,r){on(e,t,r)},p(e,r){r&24&&i!==(i=e[4](e[14]))&&H(t,"d",i)},d(e){e&&W(t)}}}function ir(n){let t,i,e,r;return{c(){t=mn("path"),this.h()},l(u){t=vn(u,"path",{d:!0,class:!0}),gn(t).forEach(W),this.h()},h(){H(t,"d",i=n[4](n[14])),H(t,"class","svelte-1mqhvhf"),pn(t,"hover",n[14].properties&&n[14].properties.id&&n[5]==n[14].properties.id)},m(u,o){on(u,t,o),e||(r=[at(t,"mouseover",function(){lt(n[6](n[14]))&&n[6](n[14]).apply(this,arguments)}),at(t,"mouseout",function(){lt(n[7](n[14]))&&n[7](n[14]).apply(this,arguments)}),at(t,"click",function(){lt(n[8](n[14]))&&n[8](n[14]).apply(this,arguments)})],e=!0)},p(u,o){n=u,o&24&&i!==(i=n[4](n[14]))&&H(t,"d",i),o&40&&pn(t,"hover",n[14].properties&&n[14].properties.id&&n[5]==n[14].properties.id)},d(u){u&&W(t),e=!1,Ve(r)}}}function he(n){let t;function i(u,o){return u[1]?ir:er}let e=i(n),r=e(n);return{c(){r.c(),t=Cn()},l(u){r.l(u),t=Cn()},m(u,o){r.m(u,o),on(u,t,o)},p(u,o){e===(e=i(u))&&r?r.p(u,o):(r.d(1),r=e(u),r&&(r.c(),r.m(t.parentNode,t)))},d(u){u&&W(t),r.d(u)}}}function rr(n){let t,i=$n(n[3]),e=[];for(let r=0;r<i.length;r+=1)e[r]=he(fe(n,i,r));return{c(){t=mn("g");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=vn(r,"g",{class:!0,id:!0});var u=gn(t);for(let o=0;o<e.length;o+=1)e[o].l(u);u.forEach(W),this.h()},h(){H(t,"class","map-svg-g svelte-1mqhvhf"),H(t,"id",n[0]),pn(t,"visible",n[2]),pn(t,"hidden",!n[2])},m(r,u){on(r,t,u);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null)},p(r,[u]){if(u&506){i=$n(r[3]);let o;for(o=0;o<i.length;o+=1){const f=fe(r,i,o);e[o]?e[o].p(f,u):(e[o]=he(f),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=i.length}u&1&&H(t,"id",r[0]),u&4&&pn(t,"visible",r[2]),u&4&&pn(t,"hidden",!r[2])},i:bn,o:bn,d(r){r&&W(t),Dt(e,r)}}}function or(n,t,i){let{url:e=""}=t,{projection:r}=t,{id:u}=t,{interactive:o=!1}=t,{visible:f=!1}=t;function c(m){console.log("Map(id: "+u+"):onChapterMouseOver(event:"+JSON.stringify(m.detail)+")"),i(5,g=m.detail.id)}function s(m){console.log("Map(id: "+u+"):onChapterMouseLeave(event:"+JSON.stringify(m.detail)+")"),i(5,g=null)}let a=[],l=null,g=null;const d=Ft();ye(()=>{ai(e).then(m=>{i(3,a=m.features),i(4,l=be().projection(r))})});function _(m){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(m)+")"),m.properties&&m.properties.id&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(m.properties.id)+")"),d("featureMouseOver",{mapID:u,featureID:m.properties&&m.properties.id?m.properties.id:"?"})}function y(m){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(m)+")"),m.properties&&m.properties.id&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(m.properties.id)+")"),d("featureMouseOut",{mapID:u,featureID:m.properties&&m.properties.id?m.properties.id:"?"})}function M(m){console.log("Map:onFeatureClick(feature:"+JSON.stringify(m)+")"),d("featureClick",{mapID:u,featureID:m.properties&&m.properties.id?m.properties.id:"?"})}return n.$$set=m=>{"url"in m&&i(9,e=m.url),"projection"in m&&i(10,r=m.projection),"id"in m&&i(0,u=m.id),"interactive"in m&&i(1,o=m.interactive),"visible"in m&&i(2,f=m.visible)},[u,o,f,a,l,g,_,y,M,e,r,c,s]}let Ae=class extends rt{constructor(t){super(),ot(this,t,or,rr,it,{url:9,projection:10,id:0,interactive:1,visible:2,onChapterMouseOver:11,onChapterMouseLeave:12})}get onChapterMouseOver(){return this.$$.ctx[11]}get onChapterMouseLeave(){return this.$$.ctx[12]}};function ur(n){return n.k}function ar(n){return[n.x,n.y]}function pe(n){return function(){return n}}function lr(){let n=0,t=0,i=960,e=500,r=!0,u=!0,o=256,f=ur,c=ar,s=0;function a(){const l=+f.apply(this,arguments),g=c.apply(this,arguments),d=Math.log2(l/o),_=Math.round(Math.max(d+s,0)),y=Math.pow(2,d-_)*o,M=+g[0]-l/2,m=+g[1]-l/2,w=Math.max(r?0:-1/0,Math.floor((n-M)/y)),k=Math.min(r?1<<_:1/0,Math.ceil((i-M)/y)),E=Math.max(u?0:-1/0,Math.floor((t-m)/y)),C=Math.min(u?1<<_:1/0,Math.ceil((e-m)/y)),z=[];for(let L=E;L<C;++L)for(let T=w;T<k;++T)z.push([T,L,_]);return z.translate=[M/y,m/y],z.scale=y,z}return a.size=function(l){return arguments.length?(n=t=0,i=+l[0],e=+l[1],a):[i-n,e-t]},a.extent=function(l){return arguments.length?(n=+l[0][0],t=+l[0][1],i=+l[1][0],e=+l[1][1],a):[[n,t],[i,e]]},a.scale=function(l){return arguments.length?(f=typeof l=="function"?l:pe(+l),a):f},a.translate=function(l){return arguments.length?(c=typeof l=="function"?l:pe([+l[0],+l[1]]),a):c},a.zoomDelta=function(l){return arguments.length?(s=+l,a):s},a.tileSize=function(l){return arguments.length?(o=+l,a):o},a.clamp=function(l){return arguments.length?(r=u=!!l,a):r&&u},a.clampX=function(l){return arguments.length?(r=!!l,a):r},a.clampY=function(l){return arguments.length?(u=!!l,a):u},a}function ge(n,t,i){const e=n.slice();e[11]=t[i];const r=cr(e[11],e[1]);return e[12]=r[0],e[13]=r[1],e}function de(n){let t;return{c(){t=mn("image"),this.h()},l(i){t=vn(i,"image",{"xlink:href":!0,x:!0,y:!0,width:!0,height:!0,class:!0}),gn(t).forEach(W),this.h()},h(){Xe(t,"xlink:href",n[3](...n[11])),H(t,"x",n[12]),H(t,"y",n[13]),H(t,"width",n[2]),H(t,"height",n[2]),H(t,"class","svelte-511esr")},m(i,e){on(i,t,e)},p:bn,d(i){i&&W(t)}}}function sr(n){let t,i=$n(n[1]),e=[];for(let r=0;r<i.length;r+=1)e[r]=de(ge(n,i,r));return{c(){t=mn("g");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=vn(r,"g",{class:!0});var u=gn(t);for(let o=0;o<e.length;o+=1)e[o].l(u);u.forEach(W),this.h()},h(){H(t,"class","map-svg-g svelte-511esr"),pn(t,"visible",n[0])},m(r,u){on(r,t,u);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null)},p(r,[u]){if(u&14){i=$n(r[1]);let o;for(o=0;o<i.length;o+=1){const f=ge(r,i,o);e[o]?e[o].p(f,u):(e[o]=de(f),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=i.length}u&1&&pn(t,"visible",r[0])},i:bn,o:bn,d(r){r&&W(t),Dt(e,r)}}}function cr(n,t){const[i,e]=n,{translate:[r,u],scale:o}=t;return[(i+r)*o,(e+u)*o]}function fr(n,t,i){let{urlPath:e}=t,{urlExtension:r}=t,{projection:u}=t,{visible:o=!1}=t;Ft(),ye(()=>{});const c=lr().size([2e3,1e3]).scale(u.scale()*2*Math.PI).translate(u([0,0]))(),{translate:[s,a],scale:l}=c;console.log(`tx:${s}, ty:${a}, k:${l}`);for(const[d,_,y]of c)console.log(`tile ${d}/${_}/${y} is at ${(d+s)*l}, ${(_+a)*l}`);const g=(d,_,y)=>`${e}${y}/${d}/${_}.${r}`;return n.$$set=d=>{"urlPath"in d&&i(4,e=d.urlPath),"urlExtension"in d&&i(5,r=d.urlExtension),"projection"in d&&i(6,u=d.projection),"visible"in d&&i(0,o=d.visible)},[o,c,l,g,e,r,u]}class hr extends rt{constructor(t){super(),ot(this,t,fr,sr,it,{urlPath:4,urlExtension:5,projection:6,visible:0})}}const pr="urban-industrial-area",gr={"nyc-region-land":{id:"nyc-landline",type:"shapefile",url:"/gis/NYC_region_land_4326.geojson"},"nyc-historical_waterline":{id:"nyc-historical_waterline",type:"shapefile",url:"/gis/historical_water_polygons_final_4326.geojson"},"seventeenseventysix-shoreline":{id:"seventeenseventysix-shoreline",type:"shapefile",url:"/gis/1776_shoreline_polylines_4326.geojson"},pluto:{id:"pluto",type:"tile",urlPath:"/gis/pluto/",urlExtension:"png"},"indian-paths-kings-county":{id:"indian-paths-kings-county",type:"shapefile",url:"/gis/Indian_villages_ponds_paths_kings_cty_4326.geojson"},"indian-paths-ny":{id:"indian-paths-nyc",type:"shapefile",url:"/gis/Indian_paths_of_great_metropolis_NYC_bolton_1912_4326.geojson"},"oyster-bed-sites":{id:"oyster-bed-sites",type:"shapefile",url:"/gis/recent_restoration_sites_oysters_2018_HEP.geojson"},"bip-lots":{id:"bip-lots",type:"shapefile",url:"/gis/era_3_1855-1950s_story_polys_sorted.geojson",interactive:!0}},dr={"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",link:null,extent:{nwLng:-74.005,nwLat:40.745,seLng:-73.94,seLat:40.67},maps:["nyc-landline","historical-waterline","indian-paths-kings-county","indian-paths-nyc","oyster-bed-sites"],chapters:{}},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",link:null,extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","historical-waterline"],chapters:{}},"urban-industrial-area":{id:"urban-industrial",name:"Urban + Industrial Area",link:null,extent:{nwLng:-73.965,nwLat:40.735,seLng:-73.945,seLat:40.705},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots"],chapters:{sugar:{id:"sugar",name:"Sugar",link:"/eras/urban-industrial/sugar"},petroleum:{id:"petroleum",name:"Petroleum",link:"/eras/urban-industrial/petroleum"},"coal-tar-gasification":{id:"coal-tar-gasification",name:"Coal-tar Gasification",link:"/eras/urban-industrial/coal-tar-gasification"},"shipbuilding-and-ironworks":{id:"shipbuilding-and-ironworks",name:"Shipbuilding and Ironworks",link:"/eras/urban-industrial/shipbuilding-and-ironworks"},"the-creek-disappears":{id:"the-creek-disappears",name:"The Creek Disappears",link:"/eras/urban-industrial/the-creek-disappears"},"eastern-district-terminal":{id:"eastern-district-terminal",name:"Eastern District Terminal",link:"/eras/urban-industrial/eastern-district-terminal"},demographics:{id:"demographics",name:"Demographics",link:"/eras/urban-industrial/demographics"}}},migration:{id:"migration",name:"Migration",link:null,chapters:{}},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization",link:null,chapters:{}}},B={intialView:pr,maps:gr,eras:dr};function me(n,t,i){const e=n.slice();return e[15]=t[i],e[16]=t,e[17]=i,e}function mr(n){let t,i;return t=new hr({props:{urlPath:n[15].urlPath,urlExtension:n[15].urlExtension,projection:n[2],visible:B.eras[n[1]].maps&&B.eras[n[1]].maps.includes(n[15].id)}}),{c(){wn(t.$$.fragment)},l(e){zn(t.$$.fragment,e)},m(e,r){kn(t,e,r),i=!0},p(e,r){const u={};r&2&&(u.visible=B.eras[e[1]].maps&&B.eras[e[1]].maps.includes(e[15].id)),t.$set(u)},i(e){i||(rn(t.$$.fragment,e),i=!0)},o(e){ln(t.$$.fragment,e),i=!1},d(e){On(t,e)}}}function vr(n){let t,i,e,r;const u=[yr,_r],o=[];function f(c,s){return c[15].interactive?0:1}return t=f(n),i=o[t]=u[t](n),{c(){i.c(),e=Cn()},l(c){i.l(c),e=Cn()},m(c,s){o[t].m(c,s),on(c,e,s),r=!0},p(c,s){i.p(c,s)},i(c){r||(rn(i),r=!0)},o(c){ln(i),r=!1},d(c){c&&W(e),o[t].d(c)}}}function _r(n){let t,i;return t=new Ae({props:{url:n[15].url,id:n[15].id,projection:n[2],visible:B.eras[n[1]].maps&&B.eras[n[1]].maps.includes(n[15].id)}}),{c(){wn(t.$$.fragment)},l(e){zn(t.$$.fragment,e)},m(e,r){kn(t,e,r),i=!0},p(e,r){const u={};r&2&&(u.visible=B.eras[e[1]].maps&&B.eras[e[1]].maps.includes(e[15].id)),t.$set(u)},i(e){i||(rn(t.$$.fragment,e),i=!0)},o(e){ln(t.$$.fragment,e),i=!1},d(e){On(t,e)}}}function yr(n){let t,i=n[16],e=n[17],r;const u=()=>n[9](t,i,e),o=()=>n[9](null,i,e);let f={url:n[15].url,id:n[15].id,projection:n[2],visible:B.eras[n[1]].maps&&B.eras[n[1]].maps.includes(n[15].id),interactive:!0};return t=new Ae({props:f}),u(),t.$on("featureMouseOver",n[3]),t.$on("featureMouseOut",n[4]),t.$on("featureClick",n[5]),{c(){wn(t.$$.fragment)},l(c){zn(t.$$.fragment,c)},m(c,s){kn(t,c,s),r=!0},p(c,s){(i!==c[16]||e!==c[17])&&(o(),i=c[16],e=c[17],u());const a={};s&2&&(a.visible=B.eras[c[1]].maps&&B.eras[c[1]].maps.includes(c[15].id)),t.$set(a)},i(c){r||(rn(t.$$.fragment,c),r=!0)},o(c){ln(t.$$.fragment,c),r=!1},d(c){o(),On(t,c)}}}function ve(n){let t,i,e,r;const u=[vr,mr],o=[];function f(c,s){return c[15].type=="shapefile"?0:c[15].type=="tile"?1:-1}return~(t=f(n))&&(i=o[t]=u[t](n)),{c(){i&&i.c(),e=Cn()},l(c){i&&i.l(c),e=Cn()},m(c,s){~t&&o[t].m(c,s),on(c,e,s),r=!0},p(c,s){i&&i.p(c,s)},i(c){r||(rn(i),r=!0)},o(c){ln(i),r=!1},d(c){c&&W(e),~t&&o[t].d(c)}}}function Mr(n){let t,i,e,r,u=$n(Object.values(B.maps)),o=[];for(let c=0;c<u.length;c+=1)o[c]=ve(me(n,u,c));const f=c=>ln(o[c],1,1,()=>{o[c]=null});return{c(){t=Ge("div"),i=mn("svg"),e=mn("g");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){t=je(c,"DIV",{id:!0,class:!0});var s=gn(t);i=vn(s,"svg",{id:!0,class:!0});var a=gn(i);e=vn(a,"g",{});var l=gn(e);for(let g=0;g<o.length;g+=1)o[g].l(l);l.forEach(W),a.forEach(W),s.forEach(W),this.h()},h(){H(i,"id","map-svg"),H(i,"class","svelte-1tqo9pt"),H(t,"id","map"),H(t,"class","svelte-1tqo9pt")},m(c,s){on(c,t,s),qt(t,i),qt(i,e);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);n[10](e),r=!0},p(c,[s]){if(s&62){u=$n(Object.values(B.maps));let a;for(a=0;a<u.length;a+=1){const l=me(c,u,a);o[a]?(o[a].p(l,s),rn(o[a],1)):(o[a]=ve(l),o[a].c(),rn(o[a],1),o[a].m(e,null))}for(Be(),a=u.length;a<o.length;a+=1)f(a);He()}},i(c){if(!r){for(let s=0;s<u.length;s+=1)rn(o[s]);r=!0}},o(c){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)ln(o[s]);r=!1},d(c){c&&W(t),Dt(o,c),n[10](null)}}}let mt=800,vt=600;function Ye(n){console.log("Maps:onChapterMouseOver(event:"+JSON.stringify(n.detail)+")")}function qe(n){console.log("Maps:onChapterMouseLeave(event:"+JSON.stringify(n.detail)+")")}function _e(n){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[[[n.nwLng,n.nwLat],[n.seLng,n.nwLat],[n.seLng,n.seLat],[n.nwLng,n.seLat],[n.nwLng,n.nwLat]]],type:"Polygon"}}]}}function Sr(n,t,i){function e(y){if(console.log(`Maps:onEraClick(event:${JSON.stringify(y.detail)})`),console.log(`Maps:onEraClick(era.extent:${JSON.stringify(B.eras[y.detail.id].extent)})`),i(1,o=y.detail.id),B.eras[y.detail.id].extent){const m=_e(B.eras[y.detail.id].extent);var M=be().projection(s);const w=M.bounds(m),[[k,E],[C,z]]=w;fn(r).transition().duration(3e3).ease(Ze).call(u.transform,bt.translate(mt/2,vt/2).scale(.9/Math.max((C-k)/mt,(z-E)/vt)).translate(-(k+C)/2,-(E+z)/2))}}let r,u,o=B.intialView;u=tr().on("zoom",c);const f=Ft();function c(y){const{transform:M}=y;fn(r).attr("transform",M)}const s=Hi().rotate([74,0]).fitSize([mt,vt],_e(B.eras[B.intialView].extent));function a(y){console.log("Maps:onFeatureMouseOver(event.detail:"+JSON.stringify(y.detail)+")"),f("featureMouseOver",y.detail)}function l(y){console.log("Maps:onFeatureMouseOut(event.detail:"+JSON.stringify(y.detail)+")"),f("featureMouseOut",y.detail)}function g(y){console.log("Maps:onFeatureClick(event.detail:"+JSON.stringify(y.detail)+")"),f("featureClick",y.detail)}console.log(JSON.stringify());function d(y,M,m){Wn[y?"unshift":"push"](()=>{M[m].this=y})}function _(y){Wn[y?"unshift":"push"](()=>{r=y,i(0,r)})}return[r,o,s,a,l,g,Ye,qe,e,d,_]}class Er extends rt{constructor(t){super(),ot(this,t,Sr,Mr,it,{onChapterMouseOver:6,onChapterMouseLeave:7,onEraClick:8})}get onChapterMouseOver(){return Ye}get onChapterMouseLeave(){return qe}get onEraClick(){return this.$$.ctx[8]}}function wr(n){let t,i,e,r,u,o;t=new Ue({}),t.$on("eraClick",n[7]);let f={};e=new Er({props:f}),n[8](e),e.$on("featureMouseOver",n[2]),e.$on("featureMouseOut",n[3]),e.$on("featureClick",n[6]);let c={};return u=new Ke({props:c}),n[9](u),u.$on("chapterMouseOver",n[4]),u.$on("chapterMouseLeave",n[5]),u.$on("eraClick",n[7]),{c(){wn(t.$$.fragment),i=Vt(),wn(e.$$.fragment),r=Vt(),wn(u.$$.fragment)},l(s){zn(t.$$.fragment,s),i=Xt(s),zn(e.$$.fragment,s),r=Xt(s),zn(u.$$.fragment,s)},m(s,a){kn(t,s,a),on(s,i,a),kn(e,s,a),on(s,r,a),kn(u,s,a),o=!0},p(s,[a]){const l={};e.$set(l);const g={};u.$set(g)},i(s){o||(rn(t.$$.fragment,s),rn(e.$$.fragment,s),rn(u.$$.fragment,s),o=!0)},o(s){ln(t.$$.fragment,s),ln(e.$$.fragment,s),ln(u.$$.fragment,s),o=!1},d(s){s&&(W(i),W(r)),On(t,s),n[8](null),On(e,s),n[9](null),On(u,s)}}}function zr(n,t,i){let e,r;function u(d){console.log("routes/map:onFeatureMouseOver(event.detail:"+JSON.stringify(d.detail)+")"),e.onMapFeatureMouseOver(d)}function o(d){console.log("routes/map:onMapFeatureMouseOut(event.detail:"+JSON.stringify(d.detail)+")"),e.onMapFeatureMouseOut(d)}function f(d){console.log("routes/map:onChapterMouseOver(event.detail:"+JSON.stringify(d.detail)+")"),r.onChapterMouseOver(d)}function c(d){console.log("routes/map:onChapterMouseLeave(event.detail:"+JSON.stringify(d.detail)+")"),r.onChapterMouseLeave(d)}function s(d){console.log("routes/map:onFeatureClick(event.detail:"+JSON.stringify(d.detail)+")"),e.onMapFeatureClick(d)}function a(d){console.log(`routes/map:onEraClick(event.detail:${JSON.stringify(d.detail)})`),r.onEraClick(d)}function l(d){Wn[d?"unshift":"push"](()=>{r=d,i(1,r)})}function g(d){Wn[d?"unshift":"push"](()=>{e=d,i(0,e)})}return[e,r,u,o,f,c,s,a,l,g]}class Nr extends rt{constructor(t){super(),ot(this,t,zr,wr,it,{})}}export{Nr as component};
