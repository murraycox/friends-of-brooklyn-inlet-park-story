import{s as et,Q as mn,R as vn,f as pn,i as W,q as B,S as hn,k as un,n as Fn,T as Dt,U as Ft,x as ye,v as Hn,V as ut,C as Ye,F as at,W as Ve,e as Xe,d as Ge,l as Yt,z as vt,b as Vt,j as Xt}from"../chunks/scheduler.of9vohBy.js";import{S as it,i as rt,t as fn,g as je,e as Be,a as gn,c as Tn,b as Rn,m as In,d as Dn}from"../chunks/index.BfJpb6qV.js";import{s as sn,d as He,i as Jt,T as lt,b as st,c as We,N as Ze,a as Ue}from"../chunks/NavTimeline.DLUKqpWX.js";function wn(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}class _n{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const u=i[r],o=t+u,f=Math.abs(t)<Math.abs(u)?t-(o-u):u-(o-t);f&&(i[e++]=f),t=o}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,u,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,r=t[--i],o=e+r,u=r-(o-e),!u););i>0&&(u<0&&t[i-1]<0||u>0&&t[i-1]>0)&&(r=u*2,e=o+r,r==e-o&&(o=e))}return o}}function*Ke(n){for(const t of n)yield*t}function Me(n){return Array.from(Ke(n))}function Qe(n){let t;for(;t=n.sourceEvent;)n=t;return n}function dn(n,t){if(n=Qe(n),t===void 0&&(t=n.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var e=i.createSVGPoint();return e.x=n.clientX,e.y=n.clientY,e=e.matrixTransform(t.getScreenCTM().inverse()),[e.x,e.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop]}}return[n.pageX,n.pageY]}const _t={capture:!0,passive:!1};function yt(n){n.preventDefault(),n.stopImmediatePropagation()}function xe(n){var t=n.document.documentElement,i=sn(n).on("dragstart.drag",yt,_t);"onselectstart"in t?i.on("selectstart.drag",yt,_t):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ni(n,t){var i=n.document.documentElement,e=sn(n).on("dragstart.drag",null);t&&(e.on("click.drag",yt,_t),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in i?e.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var ti=1e-12;function Gt(n){return((n=Math.exp(n))+1/n)/2}function ei(n){return((n=Math.exp(n))-1/n)/2}function ii(n){return((n=Math.exp(2*n))-1)/(n+1)}const ri=function n(t,i,e){function r(u,o){var f=u[0],d=u[1],c=u[2],a=o[0],l=o[1],p=o[2],g=a-f,_=l-d,S=g*g+_*_,y,m;if(S<ti)m=Math.log(p/c)/t,y=function(L){return[f+L*g,d+L*_,c*Math.exp(t*L*m)]};else{var w=Math.sqrt(S),C=(p*p-c*c+e*S)/(2*c*i*w),E=(p*p-c*c-e*S)/(2*p*i*w),O=Math.log(Math.sqrt(C*C+1)-C),k=Math.log(Math.sqrt(E*E+1)-E);m=(k-O)/t,y=function(L){var T=L*m,R=Gt(O),F=c/(i*w)*(R*ii(t*T+O)-ei(O));return[f+F*g,d+F*_,c*R/Gt(t*T+O)]}}return y.duration=m*1e3*t/Math.SQRT2,y}return r.rho=function(u){var o=Math.max(.001,+u),f=o*o,d=f*f;return n(o,f,d)},r}(Math.SQRT2,2,4);function oi(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function ui(n,t){return fetch(n,t).then(oi)}var b=1e-6,ai=1e-12,D=Math.PI,K=D/2,jt=D/4,x=D*2,Q=180/D,j=D/180,q=Math.abs,Se=Math.atan,Jn=Math.atan2,V=Math.cos,li=Math.exp,si=Math.log,X=Math.sin,ci=Math.sign||function(n){return n>0?1:n<0?-1:0},Mn=Math.sqrt,fi=Math.tan;function hi(n){return n>1?0:n<-1?D:Math.acos(n)}function bn(n){return n>1?K:n<-1?-K:Math.asin(n)}function tn(){}function Wn(n,t){n&&Ht.hasOwnProperty(n.type)&&Ht[n.type](n,t)}var Bt={Feature:function(n,t){Wn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)Wn(i[e].geometry,t)}},Ht={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){Mt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)Mt(i[e],t,0)},Polygon:function(n,t){Wt(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)Wt(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)Wn(i[e],t)}};function Mt(n,t,i){var e=-1,r=n.length-i,u;for(t.lineStart();++e<r;)u=n[e],t.point(u[0],u[1],u[2]);t.lineEnd()}function Wt(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)Mt(n[i],t,1);t.polygonEnd()}function Sn(n,t){n&&Bt.hasOwnProperty(n.type)?Bt[n.type](n,t):Wn(n,t)}function St(n){return[Jn(n[1],n[0]),bn(n[2])]}function zn(n){var t=n[0],i=n[1],e=V(i);return[e*V(t),e*X(t),X(i)]}function Yn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Zn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function ct(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Vn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Et(n){var t=Mn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function wt(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function zt(n,t){return q(n)>D&&(n-=Math.round(n/x)*x),[n,t]}zt.invert=zt;function Ee(n,t,i){return(n%=x)?t||i?wt(Ut(n),Kt(t,i)):Ut(n):t||i?Kt(t,i):zt}function Zt(n){return function(t,i){return t+=n,q(t)>D&&(t-=Math.round(t/x)*x),[t,i]}}function Ut(n){var t=Zt(n);return t.invert=Zt(-n),t}function Kt(n,t){var i=V(n),e=X(n),r=V(t),u=X(t);function o(f,d){var c=V(d),a=V(f)*c,l=X(f)*c,p=X(d),g=p*i+a*e;return[Jn(l*r-g*u,a*i-p*e),bn(g*r+l*u)]}return o.invert=function(f,d){var c=V(d),a=V(f)*c,l=X(f)*c,p=X(d),g=p*r-l*u;return[Jn(l*r+p*u,a*i+g*e),bn(g*i-a*e)]},o}function pi(n){n=Ee(n[0]*j,n[1]*j,n.length>2?n[2]*j:0);function t(i){return i=n(i[0]*j,i[1]*j),i[0]*=Q,i[1]*=Q,i}return t.invert=function(i){return i=n.invert(i[0]*j,i[1]*j),i[0]*=Q,i[1]*=Q,i},t}function gi(n,t,i,e,r,u){if(i){var o=V(t),f=X(t),d=e*i;r==null?(r=t+e*x,u=t-d/2):(r=Qt(o,r),u=Qt(o,u),(e>0?r<u:r>u)&&(r+=e*x));for(var c,a=r;e>0?a>u:a<u;a-=d)c=St([o,-f*V(a),-f*X(a)]),n.point(c[0],c[1])}}function Qt(n,t){t=zn(t),t[0]-=n,Et(t);var i=hi(-t[1]);return((-t[2]<0?-i:i)+x-b)%x}function we(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:tn,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function Bn(n,t){return q(n[0]-t[0])<b&&q(n[1]-t[1])<b}function Xn(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function ze(n,t,i,e,r){var u=[],o=[],f,d;if(n.forEach(function(_){if(!((S=_.length-1)<=0)){var S,y=_[0],m=_[S],w;if(Bn(y,m)){if(!y[2]&&!m[2]){for(r.lineStart(),f=0;f<S;++f)r.point((y=_[f])[0],y[1]);r.lineEnd();return}m[0]+=2*b}u.push(w=new Xn(y,_,null,!0)),o.push(w.o=new Xn(y,null,w,!1)),u.push(w=new Xn(m,_,null,!1)),o.push(w.o=new Xn(m,null,w,!0))}}),!!u.length){for(o.sort(t),xt(u),xt(o),f=0,d=o.length;f<d;++f)o[f].e=i=!i;for(var c=u[0],a,l;;){for(var p=c,g=!0;p.v;)if((p=p.n)===c)return;a=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(f=0,d=a.length;f<d;++f)r.point((l=a[f])[0],l[1]);else e(p.x,p.n.x,1,r);p=p.n}else{if(g)for(a=p.p.z,f=a.length-1;f>=0;--f)r.point((l=a[f])[0],l[1]);else e(p.x,p.p.x,-1,r);p=p.p}p=p.o,a=p.z,g=!g}while(!p.v);r.lineEnd()}}}function xt(n){if(t=n.length){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function ft(n){return q(n[0])<=D?n[0]:ci(n[0])*((q(n[0])+D)%x-D)}function di(n,t){var i=ft(t),e=t[1],r=X(e),u=[X(i),-V(i),0],o=0,f=0,d=new _n;r===1?e=K+b:r===-1&&(e=-K-b);for(var c=0,a=n.length;c<a;++c)if(p=(l=n[c]).length)for(var l,p,g=l[p-1],_=ft(g),S=g[1]/2+jt,y=X(S),m=V(S),w=0;w<p;++w,_=E,y=k,m=L,g=C){var C=l[w],E=ft(C),O=C[1]/2+jt,k=X(O),L=V(O),T=E-_,R=T>=0?1:-1,F=R*T,N=F>D,Z=y*k;if(d.add(Jn(Z*R*X(F),m*L+Z*V(F))),o+=N?T+R*x:T,N^_>=i^E>=i){var A=Zn(zn(g),zn(C));Et(A);var s=Zn(u,A);Et(s);var h=(N^T>=0?-1:1)*bn(s[2]);(e>h||e===h&&(A[0]||A[1]))&&(f+=N^T>=0?1:-1)}}return(o<-b||o<b&&d<-ai)^f&1}function ke(n,t,i,e){return function(r){var u=t(r),o=we(),f=t(o),d=!1,c,a,l,p={point:g,lineStart:S,lineEnd:y,polygonStart:function(){p.point=m,p.lineStart=w,p.lineEnd=C,a=[],c=[]},polygonEnd:function(){p.point=g,p.lineStart=S,p.lineEnd=y,a=Me(a);var E=di(c,e);a.length?(d||(r.polygonStart(),d=!0),ze(a,vi,E,i,r)):E&&(d||(r.polygonStart(),d=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=c=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function g(E,O){n(E,O)&&r.point(E,O)}function _(E,O){u.point(E,O)}function S(){p.point=_,u.lineStart()}function y(){p.point=g,u.lineEnd()}function m(E,O){l.push([E,O]),f.point(E,O)}function w(){f.lineStart(),l=[]}function C(){m(l[0][0],l[0][1]),f.lineEnd();var E=f.clean(),O=o.result(),k,L=O.length,T,R,F;if(l.pop(),c.push(l),l=null,!!L){if(E&1){if(R=O[0],(T=R.length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),k=0;k<T;++k)r.point((F=R[k])[0],F[1]);r.lineEnd()}return}L>1&&E&2&&O.push(O.pop().concat(O.shift())),a.push(O.filter(mi))}}return p}}function mi(n){return n.length>1}function vi(n,t){return((n=n.x)[0]<0?n[1]-K-b:K-n[1])-((t=t.x)[0]<0?t[1]-K-b:K-t[1])}const ne=ke(function(){return!0},_i,Mi,[-D,-K]);function _i(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(u,o){var f=u>0?D:-D,d=q(u-t);q(d-D)<b?(n.point(t,i=(i+o)/2>0?K:-K),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(f,i),n.point(u,i),r=0):e!==f&&d>=D&&(q(t-e)<b&&(t-=e*b),q(u-f)<b&&(u-=f*b),i=yi(t,i,u,o),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(f,i),r=0),n.point(t=u,i=o),e=f},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function yi(n,t,i,e){var r,u,o=X(n-i);return q(o)>b?Se((X(t)*(u=V(e))*X(i)-X(e)*(r=V(t))*X(n))/(r*u*o)):(t+e)/2}function Mi(n,t,i,e){var r;if(n==null)r=i*K,e.point(-D,r),e.point(0,r),e.point(D,r),e.point(D,0),e.point(D,-r),e.point(0,-r),e.point(-D,-r),e.point(-D,0),e.point(-D,r);else if(q(n[0]-t[0])>b){var u=n[0]<t[0]?D:-D;r=i*u/2,e.point(-u,r),e.point(0,r),e.point(u,r)}else e.point(t[0],t[1])}function Si(n){var t=V(n),i=2*j,e=t>0,r=q(t)>b;function u(a,l,p,g){gi(g,n,i,p,a,l)}function o(a,l){return V(a)*V(l)>t}function f(a){var l,p,g,_,S;return{lineStart:function(){_=g=!1,S=1},point:function(y,m){var w=[y,m],C,E=o(y,m),O=e?E?0:c(y,m):E?c(y+(y<0?D:-D),m):0;if(!l&&(_=g=E)&&a.lineStart(),E!==g&&(C=d(l,w),(!C||Bn(l,C)||Bn(w,C))&&(w[2]=1)),E!==g)S=0,E?(a.lineStart(),C=d(w,l),a.point(C[0],C[1])):(C=d(l,w),a.point(C[0],C[1],2),a.lineEnd()),l=C;else if(r&&l&&e^E){var k;!(O&p)&&(k=d(w,l,!0))&&(S=0,e?(a.lineStart(),a.point(k[0][0],k[0][1]),a.point(k[1][0],k[1][1]),a.lineEnd()):(a.point(k[1][0],k[1][1]),a.lineEnd(),a.lineStart(),a.point(k[0][0],k[0][1],3)))}E&&(!l||!Bn(l,w))&&a.point(w[0],w[1]),l=w,g=E,p=O},lineEnd:function(){g&&a.lineEnd(),l=null},clean:function(){return S|(_&&g)<<1}}}function d(a,l,p){var g=zn(a),_=zn(l),S=[1,0,0],y=Zn(g,_),m=Yn(y,y),w=y[0],C=m-w*w;if(!C)return!p&&a;var E=t*m/C,O=-t*w/C,k=Zn(S,y),L=Vn(S,E),T=Vn(y,O);ct(L,T);var R=k,F=Yn(L,R),N=Yn(R,R),Z=F*F-N*(Yn(L,L)-1);if(!(Z<0)){var A=Mn(Z),s=Vn(R,(-F-A)/N);if(ct(s,L),s=St(s),!p)return s;var h=a[0],v=l[0],M=a[1],z=l[1],P;v<h&&(P=h,h=v,v=P);var $=v-h,I=q($-D)<b,J=I||$<b;if(!I&&z<M&&(P=M,M=z,z=P),J?I?M+z>0^s[1]<(q(s[0]-h)<b?M:z):M<=s[1]&&s[1]<=z:$>D^(h<=s[0]&&s[0]<=v)){var G=Vn(R,(-F+A)/N);return ct(G,L),[s,St(G)]}}}function c(a,l){var p=e?n:D-n,g=0;return a<-p?g|=1:a>p&&(g|=2),l<-p?g|=4:l>p&&(g|=8),g}return ke(o,f,u,e?[0,-n]:[-D,n-D])}function Ei(n,t,i,e,r,u){var o=n[0],f=n[1],d=t[0],c=t[1],a=0,l=1,p=d-o,g=c-f,_;if(_=i-o,!(!p&&_>0)){if(_/=p,p<0){if(_<a)return;_<l&&(l=_)}else if(p>0){if(_>l)return;_>a&&(a=_)}if(_=r-o,!(!p&&_<0)){if(_/=p,p<0){if(_>l)return;_>a&&(a=_)}else if(p>0){if(_<a)return;_<l&&(l=_)}if(_=e-f,!(!g&&_>0)){if(_/=g,g<0){if(_<a)return;_<l&&(l=_)}else if(g>0){if(_>l)return;_>a&&(a=_)}if(_=u-f,!(!g&&_<0)){if(_/=g,g<0){if(_>l)return;_>a&&(a=_)}else if(g>0){if(_<a)return;_<l&&(l=_)}return a>0&&(n[0]=o+a*p,n[1]=f+a*g),l<1&&(t[0]=o+l*p,t[1]=f+l*g),!0}}}}}var On=1e9,Gn=-On;function wi(n,t,i,e){function r(c,a){return n<=c&&c<=i&&t<=a&&a<=e}function u(c,a,l,p){var g=0,_=0;if(c==null||(g=o(c,l))!==(_=o(a,l))||d(c,a)<0^l>0)do p.point(g===0||g===3?n:i,g>1?e:t);while((g=(g+l+4)%4)!==_);else p.point(a[0],a[1])}function o(c,a){return q(c[0]-n)<b?a>0?0:3:q(c[0]-i)<b?a>0?2:1:q(c[1]-t)<b?a>0?1:0:a>0?3:2}function f(c,a){return d(c.x,a.x)}function d(c,a){var l=o(c,1),p=o(a,1);return l!==p?l-p:l===0?a[1]-c[1]:l===1?c[0]-a[0]:l===2?c[1]-a[1]:a[0]-c[0]}return function(c){var a=c,l=we(),p,g,_,S,y,m,w,C,E,O,k,L={point:T,lineStart:Z,lineEnd:A,polygonStart:F,polygonEnd:N};function T(h,v){r(h,v)&&a.point(h,v)}function R(){for(var h=0,v=0,M=g.length;v<M;++v)for(var z=g[v],P=1,$=z.length,I=z[0],J,G,Y=I[0],H=I[1];P<$;++P)J=Y,G=H,I=z[P],Y=I[0],H=I[1],G<=e?H>e&&(Y-J)*(e-G)>(H-G)*(n-J)&&++h:H<=e&&(Y-J)*(e-G)<(H-G)*(n-J)&&--h;return h}function F(){a=l,p=[],g=[],k=!0}function N(){var h=R(),v=k&&h,M=(p=Me(p)).length;(v||M)&&(c.polygonStart(),v&&(c.lineStart(),u(null,null,1,c),c.lineEnd()),M&&ze(p,f,h,u,c),c.polygonEnd()),a=c,p=g=_=null}function Z(){L.point=s,g&&g.push(_=[]),O=!0,E=!1,w=C=NaN}function A(){p&&(s(S,y),m&&E&&l.rejoin(),p.push(l.result())),L.point=T,E&&a.lineEnd()}function s(h,v){var M=r(h,v);if(g&&_.push([h,v]),O)S=h,y=v,m=M,O=!1,M&&(a.lineStart(),a.point(h,v));else if(M&&E)a.point(h,v);else{var z=[w=Math.max(Gn,Math.min(On,w)),C=Math.max(Gn,Math.min(On,C))],P=[h=Math.max(Gn,Math.min(On,h)),v=Math.max(Gn,Math.min(On,v))];Ei(z,P,n,t,i,e)?(E||(a.lineStart(),a.point(z[0],z[1])),a.point(P[0],P[1]),M||a.lineEnd(),k=!1):M&&(a.lineStart(),a.point(h,v),k=!1)}w=h,C=v,E=M}return L}}const kt=n=>n;var ht=new _n,Ct=new _n,Ce,Oe,Ot,Pt,cn={point:tn,lineStart:tn,lineEnd:tn,polygonStart:function(){cn.lineStart=zi,cn.lineEnd=Ci},polygonEnd:function(){cn.lineStart=cn.lineEnd=cn.point=tn,ht.add(q(Ct)),Ct=new _n},result:function(){var n=ht/2;return ht=new _n,n}};function zi(){cn.point=ki}function ki(n,t){cn.point=Pe,Ce=Ot=n,Oe=Pt=t}function Pe(n,t){Ct.add(Pt*n-Ot*t),Ot=n,Pt=t}function Ci(){Pe(Ce,Oe)}var kn=1/0,Un=kn,An=-kn,Kn=An,Qn={point:Oi,lineStart:tn,lineEnd:tn,polygonStart:tn,polygonEnd:tn,result:function(){var n=[[kn,Un],[An,Kn]];return An=Kn=-(Un=kn=1/0),n}};function Oi(n,t){n<kn&&(kn=n),n>An&&(An=n),t<Un&&(Un=t),t>Kn&&(Kn=t)}var Nt=0,$t=0,Pn=0,xn=0,nt=0,En=0,Lt=0,Tt=0,Nn=0,Ne,$e,rn,on,nn={point:yn,lineStart:te,lineEnd:ee,polygonStart:function(){nn.lineStart=$i,nn.lineEnd=Li},polygonEnd:function(){nn.point=yn,nn.lineStart=te,nn.lineEnd=ee},result:function(){var n=Nn?[Lt/Nn,Tt/Nn]:En?[xn/En,nt/En]:Pn?[Nt/Pn,$t/Pn]:[NaN,NaN];return Nt=$t=Pn=xn=nt=En=Lt=Tt=Nn=0,n}};function yn(n,t){Nt+=n,$t+=t,++Pn}function te(){nn.point=Pi}function Pi(n,t){nn.point=Ni,yn(rn=n,on=t)}function Ni(n,t){var i=n-rn,e=t-on,r=Mn(i*i+e*e);xn+=r*(rn+n)/2,nt+=r*(on+t)/2,En+=r,yn(rn=n,on=t)}function ee(){nn.point=yn}function $i(){nn.point=Ti}function Li(){Le(Ne,$e)}function Ti(n,t){nn.point=Le,yn(Ne=rn=n,$e=on=t)}function Le(n,t){var i=n-rn,e=t-on,r=Mn(i*i+e*e);xn+=r*(rn+n)/2,nt+=r*(on+t)/2,En+=r,r=on*n-rn*t,Lt+=r*(rn+n),Tt+=r*(on+t),Nn+=r*3,yn(rn=n,on=t)}function Te(n){this._context=n}Te.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,x);break}}},result:tn};var Rt=new _n,pt,Re,Ie,$n,Ln,qn={point:tn,lineStart:function(){qn.point=Ri},lineEnd:function(){pt&&De(Re,Ie),qn.point=tn},polygonStart:function(){pt=!0},polygonEnd:function(){pt=null},result:function(){var n=+Rt;return Rt=new _n,n}};function Ri(n,t){qn.point=De,Re=$n=n,Ie=Ln=t}function De(n,t){$n-=n,Ln-=t,Rt.add(Mn($n*$n+Ln*Ln)),$n=n,Ln=t}let ie,tt,re,oe;class ue{constructor(t){this._append=t==null?Fe:Ii(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,i){switch(this._point){case 0:{this._append`M${t},${i}`,this._point=1;break}case 1:{this._append`L${t},${i}`;break}default:{if(this._append`M${t},${i}`,this._radius!==re||this._append!==tt){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,re=e,tt=this._append,oe=this._,this._=r}this._+=oe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Fe(n){let t=1;this._+=n[0];for(const i=n.length;t<i;++t)this._+=arguments[t]+n[t]}function Ii(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Fe;if(t!==ie){const i=10**t;ie=t,tt=function(r){let u=1;this._+=r[0];for(const o=r.length;u<o;++u)this._+=Math.round(arguments[u]*i)/i+r[u]}}return tt}function Je(n,t){let i=3,e=4.5,r,u;function o(f){return f&&(typeof e=="function"&&u.pointRadius(+e.apply(this,arguments)),Sn(f,r(u))),u.result()}return o.area=function(f){return Sn(f,r(cn)),cn.result()},o.measure=function(f){return Sn(f,r(qn)),qn.result()},o.bounds=function(f){return Sn(f,r(Qn)),Qn.result()},o.centroid=function(f){return Sn(f,r(nn)),nn.result()},o.projection=function(f){return arguments.length?(r=f==null?(n=null,kt):(n=f).stream,o):n},o.context=function(f){return arguments.length?(u=f==null?(t=null,new ue(i)):new Te(t=f),typeof e!="function"&&u.pointRadius(e),o):t},o.pointRadius=function(f){return arguments.length?(e=typeof f=="function"?f:(u.pointRadius(+f),+f),o):e},o.digits=function(f){if(!arguments.length)return i;if(f==null)i=null;else{const d=Math.floor(f);if(!(d>=0))throw new RangeError(`invalid digits: ${f}`);i=d}return t===null&&(u=new ue(i)),o},o.projection(n).digits(i).context(t)}function bt(n){return function(t){var i=new It;for(var e in n)i[e]=n[e];return i.stream=t,i}}function It(){}It.prototype={constructor:It,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function At(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),Sn(i,n.stream(Qn)),t(Qn.result()),e!=null&&n.clipExtent(e),n}function be(n,t,i){return At(n,function(e){var r=t[1][0]-t[0][0],u=t[1][1]-t[0][1],o=Math.min(r/(e[1][0]-e[0][0]),u/(e[1][1]-e[0][1])),f=+t[0][0]+(r-o*(e[1][0]+e[0][0]))/2,d=+t[0][1]+(u-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([f,d])},i)}function Di(n,t,i){return be(n,[[0,0],t],i)}function Fi(n,t,i){return At(n,function(e){var r=+t,u=r/(e[1][0]-e[0][0]),o=(r-u*(e[1][0]+e[0][0]))/2,f=-u*e[0][1];n.scale(150*u).translate([o,f])},i)}function Ji(n,t,i){return At(n,function(e){var r=+t,u=r/(e[1][1]-e[0][1]),o=-u*e[0][0],f=(r-u*(e[1][1]+e[0][1]))/2;n.scale(150*u).translate([o,f])},i)}var ae=16,bi=V(30*j);function le(n,t){return+t?qi(n,t):Ai(n)}function Ai(n){return bt({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function qi(n,t){function i(e,r,u,o,f,d,c,a,l,p,g,_,S,y){var m=c-e,w=a-r,C=m*m+w*w;if(C>4*t&&S--){var E=o+p,O=f+g,k=d+_,L=Mn(E*E+O*O+k*k),T=bn(k/=L),R=q(q(k)-1)<b||q(u-l)<b?(u+l)/2:Jn(O,E),F=n(R,T),N=F[0],Z=F[1],A=N-e,s=Z-r,h=w*A-m*s;(h*h/C>t||q((m*A+w*s)/C-.5)>.3||o*p+f*g+d*_<bi)&&(i(e,r,u,o,f,d,N,Z,R,E/=L,O/=L,k,S,y),y.point(N,Z),i(N,Z,R,E,O,k,c,a,l,p,g,_,S,y))}}return function(e){var r,u,o,f,d,c,a,l,p,g,_,S,y={point:m,lineStart:w,lineEnd:E,polygonStart:function(){e.polygonStart(),y.lineStart=O},polygonEnd:function(){e.polygonEnd(),y.lineStart=w}};function m(T,R){T=n(T,R),e.point(T[0],T[1])}function w(){l=NaN,y.point=C,e.lineStart()}function C(T,R){var F=zn([T,R]),N=n(T,R);i(l,p,a,g,_,S,l=N[0],p=N[1],a=T,g=F[0],_=F[1],S=F[2],ae,e),e.point(l,p)}function E(){y.point=m,e.lineEnd()}function O(){w(),y.point=k,y.lineEnd=L}function k(T,R){C(r=T,R),u=l,o=p,f=g,d=_,c=S,y.point=C}function L(){i(l,p,a,g,_,S,u,o,r,f,d,c,ae,e),y.lineEnd=E,E()}return y}}var Yi=bt({point:function(n,t){this.stream.point(n*j,t*j)}});function Vi(n){return bt({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function Xi(n,t,i,e,r){function u(o,f){return o*=e,f*=r,[t+n*o,i-n*f]}return u.invert=function(o,f){return[(o-t)/n*e,(i-f)/n*r]},u}function se(n,t,i,e,r,u){if(!u)return Xi(n,t,i,e,r);var o=V(u),f=X(u),d=o*n,c=f*n,a=o/n,l=f/n,p=(f*i-o*t)/n,g=(f*t+o*i)/n;function _(S,y){return S*=e,y*=r,[d*S-c*y+t,i-c*S-d*y]}return _.invert=function(S,y){return[e*(a*S-l*y+p),r*(g-l*S-a*y)]},_}function Gi(n){return ji(function(){return n})()}function ji(n){var t,i=150,e=480,r=250,u=0,o=0,f=0,d=0,c=0,a,l=0,p=1,g=1,_=null,S=ne,y=null,m,w,C,E=kt,O=.5,k,L,T,R,F;function N(h){return T(h[0]*j,h[1]*j)}function Z(h){return h=T.invert(h[0],h[1]),h&&[h[0]*Q,h[1]*Q]}N.stream=function(h){return R&&F===h?R:R=Yi(Vi(a)(S(k(E(F=h)))))},N.preclip=function(h){return arguments.length?(S=h,_=void 0,s()):S},N.postclip=function(h){return arguments.length?(E=h,y=m=w=C=null,s()):E},N.clipAngle=function(h){return arguments.length?(S=+h?Si(_=h*j):(_=null,ne),s()):_*Q},N.clipExtent=function(h){return arguments.length?(E=h==null?(y=m=w=C=null,kt):wi(y=+h[0][0],m=+h[0][1],w=+h[1][0],C=+h[1][1]),s()):y==null?null:[[y,m],[w,C]]},N.scale=function(h){return arguments.length?(i=+h,A()):i},N.translate=function(h){return arguments.length?(e=+h[0],r=+h[1],A()):[e,r]},N.center=function(h){return arguments.length?(u=h[0]%360*j,o=h[1]%360*j,A()):[u*Q,o*Q]},N.rotate=function(h){return arguments.length?(f=h[0]%360*j,d=h[1]%360*j,c=h.length>2?h[2]%360*j:0,A()):[f*Q,d*Q,c*Q]},N.angle=function(h){return arguments.length?(l=h%360*j,A()):l*Q},N.reflectX=function(h){return arguments.length?(p=h?-1:1,A()):p<0},N.reflectY=function(h){return arguments.length?(g=h?-1:1,A()):g<0},N.precision=function(h){return arguments.length?(k=le(L,O=h*h),s()):Mn(O)},N.fitExtent=function(h,v){return be(N,h,v)},N.fitSize=function(h,v){return Di(N,h,v)},N.fitWidth=function(h,v){return Fi(N,h,v)},N.fitHeight=function(h,v){return Ji(N,h,v)};function A(){var h=se(i,0,0,p,g,l).apply(null,t(u,o)),v=se(i,e-h[0],r-h[1],p,g,l);return a=Ee(f,d,c),L=wt(t,v),T=wt(a,L),k=le(L,O),s()}function s(){return R=F=null,N}return function(){return t=n.apply(this,arguments),N.invert=t.invert&&Z,A()}}function qt(n,t){return[n,si(fi((K+t)/2))]}qt.invert=function(n,t){return[n,2*Se(li(t))-K]};function Bi(){return Hi(qt).scale(961/x)}function Hi(n){var t=Gi(n),i=t.center,e=t.scale,r=t.translate,u=t.clipExtent,o=null,f,d,c;t.scale=function(l){return arguments.length?(e(l),a()):e()},t.translate=function(l){return arguments.length?(r(l),a()):r()},t.center=function(l){return arguments.length?(i(l),a()):i()},t.clipExtent=function(l){return arguments.length?(l==null?o=f=d=c=null:(o=+l[0][0],f=+l[0][1],d=+l[1][0],c=+l[1][1]),a()):o==null?null:[[o,f],[d,c]]};function a(){var l=D*e(),p=t(pi(t.rotate()).invert([0,0]));return u(o==null?[[p[0]-l,p[1]-l],[p[0]+l,p[1]+l]]:n===qt?[[Math.max(p[0]-l,o),f],[Math.min(p[0]+l,d),c]]:[[o,Math.max(p[1]-l,f)],[d,Math.min(p[1]+l,c)]])}return a()}const jn=n=>()=>n;function Wi(n,{sourceEvent:t,target:i,transform:e,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:r}})}function gt(n){n.stopImmediatePropagation()}function Cn(n){n.preventDefault(),n.stopImmediatePropagation()}function Zi(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function Ui(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function ce(){return this.__zoom||Jt}function Ki(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function Qi(){return navigator.maxTouchPoints||"ontouchstart"in this}function xi(n,t,i){var e=n.invertX(t[0][0])-i[0][0],r=n.invertX(t[1][0])-i[1][0],u=n.invertY(t[0][1])-i[0][1],o=n.invertY(t[1][1])-i[1][1];return n.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),o>u?(u+o)/2:Math.min(0,u)||Math.max(0,o))}function nr(){var n=Zi,t=Ui,i=xi,e=Ki,r=Qi,u=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],f=250,d=ri,c=He("start","zoom","end"),a,l,p,g=500,_=150,S=0,y=10;function m(s){s.property("__zoom",ce).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",F).filter(r).on("touchstart.zoom",N).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(s,h,v,M){var z=s.selection?s.selection():s;z.property("__zoom",ce),s!==z?O(s,h,v,M):z.interrupt().each(function(){k(this,arguments).event(M).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},m.scaleBy=function(s,h,v,M){m.scaleTo(s,function(){var z=this.__zoom.k,P=typeof h=="function"?h.apply(this,arguments):h;return z*P},v,M)},m.scaleTo=function(s,h,v,M){m.transform(s,function(){var z=t.apply(this,arguments),P=this.__zoom,$=v==null?E(z):typeof v=="function"?v.apply(this,arguments):v,I=P.invert($),J=typeof h=="function"?h.apply(this,arguments):h;return i(C(w(P,J),$,I),z,o)},v,M)},m.translateBy=function(s,h,v,M){m.transform(s,function(){return i(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),o)},null,M)},m.translateTo=function(s,h,v,M,z){m.transform(s,function(){var P=t.apply(this,arguments),$=this.__zoom,I=M==null?E(P):typeof M=="function"?M.apply(this,arguments):M;return i(Jt.translate(I[0],I[1]).scale($.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof v=="function"?-v.apply(this,arguments):-v),P,o)},M,z)};function w(s,h){return h=Math.max(u[0],Math.min(u[1],h)),h===s.k?s:new lt(h,s.x,s.y)}function C(s,h,v){var M=h[0]-v[0]*s.k,z=h[1]-v[1]*s.k;return M===s.x&&z===s.y?s:new lt(s.k,M,z)}function E(s){return[(+s[0][0]+ +s[1][0])/2,(+s[0][1]+ +s[1][1])/2]}function O(s,h,v,M){s.on("start.zoom",function(){k(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(M).end()}).tween("zoom",function(){var z=this,P=arguments,$=k(z,P).event(M),I=t.apply(z,P),J=v==null?E(I):typeof v=="function"?v.apply(z,P):v,G=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),Y=z.__zoom,H=typeof h=="function"?h.apply(z,P):h,an=d(Y.invert(J).concat(G/Y.k),H.invert(J).concat(G/H.k));return function(en){if(en===1)en=H;else{var ln=an(en),ot=G/ln[2];en=new lt(ot,J[0]-ln[0]*ot,J[1]-ln[1]*ot)}$.zoom(null,en)}})}function k(s,h,v){return!v&&s.__zooming||new L(s,h)}function L(s,h){this.that=s,this.args=h,this.active=0,this.sourceEvent=null,this.extent=t.apply(s,h),this.taps=0}L.prototype={event:function(s){return s&&(this.sourceEvent=s),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(s,h){return this.mouse&&s!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&s!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&s!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(s){var h=sn(this.that).datum();c.call(s,this.that,new Wi(s,{sourceEvent:this.sourceEvent,target:m,type:s,transform:this.that.__zoom,dispatch:c}),h)}};function T(s,...h){if(!n.apply(this,arguments))return;var v=k(this,h).event(s),M=this.__zoom,z=Math.max(u[0],Math.min(u[1],M.k*Math.pow(2,e.apply(this,arguments)))),P=dn(s);if(v.wheel)(v.mouse[0][0]!==P[0]||v.mouse[0][1]!==P[1])&&(v.mouse[1]=M.invert(v.mouse[0]=P)),clearTimeout(v.wheel);else{if(M.k===z)return;v.mouse=[P,M.invert(P)],st(this),v.start()}Cn(s),v.wheel=setTimeout($,_),v.zoom("mouse",i(C(w(M,z),v.mouse[0],v.mouse[1]),v.extent,o));function $(){v.wheel=null,v.end()}}function R(s,...h){if(p||!n.apply(this,arguments))return;var v=s.currentTarget,M=k(this,h,!0).event(s),z=sn(s.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",G,!0),P=dn(s,v),$=s.clientX,I=s.clientY;xe(s.view),gt(s),M.mouse=[P,this.__zoom.invert(P)],st(this),M.start();function J(Y){if(Cn(Y),!M.moved){var H=Y.clientX-$,an=Y.clientY-I;M.moved=H*H+an*an>S}M.event(Y).zoom("mouse",i(C(M.that.__zoom,M.mouse[0]=dn(Y,v),M.mouse[1]),M.extent,o))}function G(Y){z.on("mousemove.zoom mouseup.zoom",null),ni(Y.view,M.moved),Cn(Y),M.event(Y).end()}}function F(s,...h){if(n.apply(this,arguments)){var v=this.__zoom,M=dn(s.changedTouches?s.changedTouches[0]:s,this),z=v.invert(M),P=v.k*(s.shiftKey?.5:2),$=i(C(w(v,P),M,z),t.apply(this,h),o);Cn(s),f>0?sn(this).transition().duration(f).call(O,$,M,s):sn(this).call(m.transform,$,M,s)}}function N(s,...h){if(n.apply(this,arguments)){var v=s.touches,M=v.length,z=k(this,h,s.changedTouches.length===M).event(s),P,$,I,J;for(gt(s),$=0;$<M;++$)I=v[$],J=dn(I,this),J=[J,this.__zoom.invert(J),I.identifier],z.touch0?!z.touch1&&z.touch0[2]!==J[2]&&(z.touch1=J,z.taps=0):(z.touch0=J,P=!0,z.taps=1+!!a);a&&(a=clearTimeout(a)),P&&(z.taps<2&&(l=J[0],a=setTimeout(function(){a=null},g)),st(this),z.start())}}function Z(s,...h){if(this.__zooming){var v=k(this,h).event(s),M=s.changedTouches,z=M.length,P,$,I,J;for(Cn(s),P=0;P<z;++P)$=M[P],I=dn($,this),v.touch0&&v.touch0[2]===$.identifier?v.touch0[0]=I:v.touch1&&v.touch1[2]===$.identifier&&(v.touch1[0]=I);if($=v.that.__zoom,v.touch1){var G=v.touch0[0],Y=v.touch0[1],H=v.touch1[0],an=v.touch1[1],en=(en=H[0]-G[0])*en+(en=H[1]-G[1])*en,ln=(ln=an[0]-Y[0])*ln+(ln=an[1]-Y[1])*ln;$=w($,Math.sqrt(en/ln)),I=[(G[0]+H[0])/2,(G[1]+H[1])/2],J=[(Y[0]+an[0])/2,(Y[1]+an[1])/2]}else if(v.touch0)I=v.touch0[0],J=v.touch0[1];else return;v.zoom("touch",i(C($,I,J),v.extent,o))}}function A(s,...h){if(this.__zooming){var v=k(this,h).event(s),M=s.changedTouches,z=M.length,P,$;for(gt(s),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),P=0;P<z;++P)$=M[P],v.touch0&&v.touch0[2]===$.identifier?delete v.touch0:v.touch1&&v.touch1[2]===$.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&($=dn($,this),Math.hypot(l[0]-$[0],l[1]-$[1])<y)){var I=sn(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return m.wheelDelta=function(s){return arguments.length?(e=typeof s=="function"?s:jn(+s),m):e},m.filter=function(s){return arguments.length?(n=typeof s=="function"?s:jn(!!s),m):n},m.touchable=function(s){return arguments.length?(r=typeof s=="function"?s:jn(!!s),m):r},m.extent=function(s){return arguments.length?(t=typeof s=="function"?s:jn([[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]]),m):t},m.scaleExtent=function(s){return arguments.length?(u[0]=+s[0],u[1]=+s[1],m):[u[0],u[1]]},m.translateExtent=function(s){return arguments.length?(o[0][0]=+s[0][0],o[1][0]=+s[1][0],o[0][1]=+s[0][1],o[1][1]=+s[1][1],m):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},m.constrain=function(s){return arguments.length?(i=s,m):i},m.duration=function(s){return arguments.length?(f=+s,m):f},m.interpolate=function(s){return arguments.length?(d=s,m):d},m.on=function(){var s=c.on.apply(c,arguments);return s===c?m:s},m.clickDistance=function(s){return arguments.length?(S=(s=+s)*s,m):Math.sqrt(S)},m.tapDistance=function(s){return arguments.length?(y=+s,m):y},m}function fe(n,t,i){const e=n.slice();return e[14]=t[i],e}function tr(n){let t,i;return{c(){t=mn("path"),this.h()},l(e){t=vn(e,"path",{d:!0,class:!0}),pn(t).forEach(W),this.h()},h(){B(t,"d",i=n[4](n[14])),B(t,"class","svelte-1mqhvhf")},m(e,r){un(e,t,r)},p(e,r){r&24&&i!==(i=e[4](e[14]))&&B(t,"d",i)},d(e){e&&W(t)}}}function er(n){let t,i,e,r;return{c(){t=mn("path"),this.h()},l(u){t=vn(u,"path",{d:!0,class:!0}),pn(t).forEach(W),this.h()},h(){B(t,"d",i=n[4](n[14])),B(t,"class","svelte-1mqhvhf"),hn(t,"hover",n[14].properties&&n[14].properties.id&&n[5]==n[14].properties.id)},m(u,o){un(u,t,o),e||(r=[ut(t,"mouseover",function(){at(n[6](n[14]))&&n[6](n[14]).apply(this,arguments)}),ut(t,"mouseout",function(){at(n[7](n[14]))&&n[7](n[14]).apply(this,arguments)}),ut(t,"click",function(){at(n[8](n[14]))&&n[8](n[14]).apply(this,arguments)})],e=!0)},p(u,o){n=u,o&24&&i!==(i=n[4](n[14]))&&B(t,"d",i),o&40&&hn(t,"hover",n[14].properties&&n[14].properties.id&&n[5]==n[14].properties.id)},d(u){u&&W(t),e=!1,Ye(r)}}}function he(n){let t;function i(u,o){return u[1]?er:tr}let e=i(n),r=e(n);return{c(){r.c(),t=Hn()},l(u){r.l(u),t=Hn()},m(u,o){r.m(u,o),un(u,t,o)},p(u,o){e===(e=i(u))&&r?r.p(u,o):(r.d(1),r=e(u),r&&(r.c(),r.m(t.parentNode,t)))},d(u){u&&W(t),r.d(u)}}}function ir(n){let t,i=wn(n[3]),e=[];for(let r=0;r<i.length;r+=1)e[r]=he(fe(n,i,r));return{c(){t=mn("g");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=vn(r,"g",{class:!0,id:!0});var u=pn(t);for(let o=0;o<e.length;o+=1)e[o].l(u);u.forEach(W),this.h()},h(){B(t,"class","map-svg-g svelte-1mqhvhf"),B(t,"id",n[0]),hn(t,"visible",n[2]),hn(t,"hidden",!n[2])},m(r,u){un(r,t,u);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null)},p(r,[u]){if(u&506){i=wn(r[3]);let o;for(o=0;o<i.length;o+=1){const f=fe(r,i,o);e[o]?e[o].p(f,u):(e[o]=he(f),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=i.length}u&1&&B(t,"id",r[0]),u&4&&hn(t,"visible",r[2]),u&4&&hn(t,"hidden",!r[2])},i:Fn,o:Fn,d(r){r&&W(t),Dt(e,r)}}}function rr(n,t,i){let{url:e=""}=t,{projection:r}=t,{id:u}=t,{interactive:o=!1}=t,{visible:f=!1}=t;function d(m){console.log("Map(id: "+u+"):onChapterMouseOver(event:"+JSON.stringify(m.detail)+")"),i(5,p=m.detail.id)}function c(m){console.log("Map(id: "+u+"):onChapterMouseLeave(event:"+JSON.stringify(m.detail)+")"),i(5,p=null)}let a=[],l=null,p=null;const g=Ft();ye(()=>{ui(e).then(m=>{i(3,a=m.features),i(4,l=Je().projection(r))})});function _(m){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(m)+")"),m.properties&&m.properties.id&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(m.properties.id)+")"),g("featureMouseOver",{mapID:u,featureID:m.properties&&m.properties.id?m.properties.id:"?"})}function S(m){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(m)+")"),m.properties&&m.properties.id&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(m.properties.id)+")"),g("featureMouseOut",{mapID:u,featureID:m.properties&&m.properties.id?m.properties.id:"?"})}function y(m){console.log("Map:onFeatureClick(feature:"+JSON.stringify(m)+")"),g("featureClick",{mapID:u,featureID:m.properties&&m.properties.id?m.properties.id:"?"})}return n.$$set=m=>{"url"in m&&i(9,e=m.url),"projection"in m&&i(10,r=m.projection),"id"in m&&i(0,u=m.id),"interactive"in m&&i(1,o=m.interactive),"visible"in m&&i(2,f=m.visible)},[u,o,f,a,l,p,_,S,y,e,r,d,c]}let or=class extends it{constructor(t){super(),rt(this,t,rr,ir,et,{url:9,projection:10,id:0,interactive:1,visible:2,onChapterMouseOver:11,onChapterMouseLeave:12})}get onChapterMouseOver(){return this.$$.ctx[11]}get onChapterMouseLeave(){return this.$$.ctx[12]}};function ur(n){return n.k}function ar(n){return[n.x,n.y]}function pe(n){return function(){return n}}function lr(){let n=0,t=0,i=960,e=500,r=!0,u=!0,o=256,f=ur,d=ar,c=0;function a(){const l=+f.apply(this,arguments),p=d.apply(this,arguments),g=Math.log2(l/o),_=Math.round(Math.max(g+c,0)),S=Math.pow(2,g-_)*o,y=+p[0]-l/2,m=+p[1]-l/2,w=Math.max(r?0:-1/0,Math.floor((n-y)/S)),C=Math.min(r?1<<_:1/0,Math.ceil((i-y)/S)),E=Math.max(u?0:-1/0,Math.floor((t-m)/S)),O=Math.min(u?1<<_:1/0,Math.ceil((e-m)/S)),k=[];for(let L=E;L<O;++L)for(let T=w;T<C;++T)k.push([T,L,_]);return k.translate=[y/S,m/S],k.scale=S,k}return a.size=function(l){return arguments.length?(n=t=0,i=+l[0],e=+l[1],a):[i-n,e-t]},a.extent=function(l){return arguments.length?(n=+l[0][0],t=+l[0][1],i=+l[1][0],e=+l[1][1],a):[[n,t],[i,e]]},a.scale=function(l){return arguments.length?(f=typeof l=="function"?l:pe(+l),a):f},a.translate=function(l){return arguments.length?(d=typeof l=="function"?l:pe([+l[0],+l[1]]),a):d},a.zoomDelta=function(l){return arguments.length?(c=+l,a):c},a.tileSize=function(l){return arguments.length?(o=+l,a):o},a.clamp=function(l){return arguments.length?(r=u=!!l,a):r&&u},a.clampX=function(l){return arguments.length?(r=!!l,a):r},a.clampY=function(l){return arguments.length?(u=!!l,a):u},a}function ge(n,t,i){const e=n.slice();e[11]=t[i];const r=cr(e[11],e[1]);return e[12]=r[0],e[13]=r[1],e}function de(n){let t;return{c(){t=mn("image"),this.h()},l(i){t=vn(i,"image",{"xlink:href":!0,x:!0,y:!0,width:!0,height:!0,class:!0}),pn(t).forEach(W),this.h()},h(){Ve(t,"xlink:href",n[3](...n[11])),B(t,"x",n[12]),B(t,"y",n[13]),B(t,"width",n[2]),B(t,"height",n[2]),B(t,"class","svelte-511esr")},m(i,e){un(i,t,e)},p:Fn,d(i){i&&W(t)}}}function sr(n){let t,i=wn(n[1]),e=[];for(let r=0;r<i.length;r+=1)e[r]=de(ge(n,i,r));return{c(){t=mn("g");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=vn(r,"g",{class:!0});var u=pn(t);for(let o=0;o<e.length;o+=1)e[o].l(u);u.forEach(W),this.h()},h(){B(t,"class","map-svg-g svelte-511esr"),hn(t,"visible",n[0])},m(r,u){un(r,t,u);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null)},p(r,[u]){if(u&14){i=wn(r[1]);let o;for(o=0;o<i.length;o+=1){const f=ge(r,i,o);e[o]?e[o].p(f,u):(e[o]=de(f),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=i.length}u&1&&hn(t,"visible",r[0])},i:Fn,o:Fn,d(r){r&&W(t),Dt(e,r)}}}function cr(n,t){const[i,e]=n,{translate:[r,u],scale:o}=t;return[(i+r)*o,(e+u)*o]}function fr(n,t,i){let{urlPath:e}=t,{urlExtension:r}=t,{projection:u}=t,{visible:o=!1}=t;Ft(),ye(()=>{});const d=lr().size([2e3,1e3]).scale(u.scale()*2*Math.PI).translate(u([0,0]))(),{translate:[c,a],scale:l}=d;console.log(`tx:${c}, ty:${a}, k:${l}`);for(const[g,_,S]of d)console.log(`tile ${g}/${_}/${S} is at ${(g+c)*l}, ${(_+a)*l}`);const p=(g,_,S)=>`${e}${S}/${g}/${_}.${r}`;return n.$$set=g=>{"urlPath"in g&&i(4,e=g.urlPath),"urlExtension"in g&&i(5,r=g.urlExtension),"projection"in g&&i(6,u=g.projection),"visible"in g&&i(0,o=g.visible)},[o,d,l,p,e,r,u]}class hr extends it{constructor(t){super(),rt(this,t,fr,sr,et,{urlPath:4,urlExtension:5,projection:6,visible:0})}}const pr="urban-industrial-area",gr={"nyc-region-land":{id:"nyc-landline",type:"shapefile",url:"/gis/NYC_region_land_4326.geojson"},"nyc-historical_waterline":{id:"nyc-historical_waterline",type:"shapefile",url:"/gis/historical_water_polygons_final_4326.geojson"},"seventeenseventysix-shoreline":{id:"seventeenseventysix-shoreline",type:"shapefile",url:"/gis/1776_shoreline_polylines_4326.geojson"},pluto:{id:"pluto",type:"tile",urlPath:"/gis/pluto/",urlExtension:"png"},"indian-paths-kings-county":{id:"indian-paths-kings-county",type:"shapefile",url:"/gis/Indian_villages_ponds_paths_kings_cty_4326.geojson"},"indian-paths-ny":{id:"indian-paths-nyc",type:"shapefile",url:"/gis/Indian_paths_of_great_metropolis_NYC_bolton_1912_4326.geojson"},"oyster-bed-sites":{id:"oyster-bed-sites",type:"shapefile",url:"/gis/recent_restoration_sites_oysters_2018_HEP.geojson"},"bip-lots":{id:"bip-lots",type:"shapefile",url:"/gis/era_3_1855-1950s_story_polys_sorted.geojson"}},dr={"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",link:null,extent:{nwLng:-74.005,nwLat:40.745,seLng:-73.94,seLat:40.67},maps:["nyc-landline","historical-waterline","indian-paths-kings-county","indian-paths-nyc","oyster-bed-sites"],chapters:{}},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",link:null,extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","historical-waterline"],chapters:{}},"urban-industrial-area":{id:"urban-industrial",name:"Urban + Industrial Area",link:null,extent:{nwLng:-73.965,nwLat:40.735,seLng:-73.945,seLat:40.705},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots"],chapters:{sugar:{id:"sugar",name:"Sugar",link:"/eras/urban-industrial/sugar"},petroleum:{id:"petroleum",name:"Petroleum",link:"/eras/urban-industrial/petroleum"},"coal-tar-gasification":{id:"coal-tar-gasification",name:"Coal-tar Gasification",link:"/eras/urban-industrial/coal-tar-gasification"},"shipbuilding-and-ironworks":{id:"shipbuilding-and-ironworks",name:"Shipbuilding and Ironworks",link:"/eras/urban-industrial/shipbuilding-and-ironworks"},"the-creek-disappears":{id:"the-creek-disappears",name:"The Creek Disappears",link:"/eras/urban-industrial/the-creek-disappears"},"eastern-district-terminal":{id:"eastern-district-terminal",name:"Eastern District Terminal",link:"/eras/urban-industrial/eastern-district-terminal"},demographics:{id:"demographics",name:"Demographics",link:"/eras/urban-industrial/demographics"}}},migration:{id:"migration",name:"Migration",link:null,chapters:{}},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization",link:null,chapters:{}}},U={intialView:pr,maps:gr,eras:dr};function me(n,t,i){const e=n.slice();return e[14]=t[i],e}function mr(n){let t,i;return t=new hr({props:{urlPath:n[14].urlPath,urlExtension:n[14].urlExtension,projection:n[2],visible:U.eras[n[1]].maps&&U.eras[n[1]].maps.includes(n[14].id)}}),{c(){Tn(t.$$.fragment)},l(e){Rn(t.$$.fragment,e)},m(e,r){In(t,e,r),i=!0},p(e,r){const u={};r&2&&(u.visible=U.eras[e[1]].maps&&U.eras[e[1]].maps.includes(e[14].id)),t.$set(u)},i(e){i||(fn(t.$$.fragment,e),i=!0)},o(e){gn(t.$$.fragment,e),i=!1},d(e){Dn(t,e)}}}function vr(n){let t,i;return t=new or({props:{url:n[14].url,id:n[14].id,projection:n[2],visible:U.eras[n[1]].maps&&U.eras[n[1]].maps.includes(n[14].id)}}),{c(){Tn(t.$$.fragment)},l(e){Rn(t.$$.fragment,e)},m(e,r){In(t,e,r),i=!0},p(e,r){const u={};r&2&&(u.visible=U.eras[e[1]].maps&&U.eras[e[1]].maps.includes(e[14].id)),t.$set(u)},i(e){i||(fn(t.$$.fragment,e),i=!0)},o(e){gn(t.$$.fragment,e),i=!1},d(e){Dn(t,e)}}}function ve(n){let t,i,e,r;const u=[vr,mr],o=[];function f(d,c){return d[14].type=="shapefile"?0:d[14].type=="tile"?1:-1}return~(t=f(n))&&(i=o[t]=u[t](n)),{c(){i&&i.c(),e=Hn()},l(d){i&&i.l(d),e=Hn()},m(d,c){~t&&o[t].m(d,c),un(d,e,c),r=!0},p(d,c){i&&i.p(d,c)},i(d){r||(fn(i),r=!0)},o(d){gn(i),r=!1},d(d){d&&W(e),~t&&o[t].d(d)}}}function _r(n){let t,i,e,r,u=wn(Object.values(U.maps)),o=[];for(let d=0;d<u.length;d+=1)o[d]=ve(me(n,u,d));const f=d=>gn(o[d],1,1,()=>{o[d]=null});return{c(){t=Xe("div"),i=mn("svg"),e=mn("g");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){t=Ge(d,"DIV",{id:!0,class:!0});var c=pn(t);i=vn(c,"svg",{id:!0,class:!0});var a=pn(i);e=vn(a,"g",{});var l=pn(e);for(let p=0;p<o.length;p+=1)o[p].l(l);l.forEach(W),a.forEach(W),c.forEach(W),this.h()},h(){B(i,"id","map-svg"),B(i,"class","svelte-1tqo9pt"),B(t,"id","map"),B(t,"class","svelte-1tqo9pt")},m(d,c){un(d,t,c),Yt(t,i),Yt(i,e);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);n[6](e),r=!0},p(d,[c]){if(c&6){u=wn(Object.values(U.maps));let a;for(a=0;a<u.length;a+=1){const l=me(d,u,a);o[a]?(o[a].p(l,c),fn(o[a],1)):(o[a]=ve(l),o[a].c(),fn(o[a],1),o[a].m(e,null))}for(je(),a=u.length;a<o.length;a+=1)f(a);Be()}},i(d){if(!r){for(let c=0;c<u.length;c+=1)fn(o[c]);r=!0}},o(d){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)gn(o[c]);r=!1},d(d){d&&W(t),Dt(o,d),n[6](null)}}}let dt=800,mt=600;function Ae(n){console.log("Maps:onChapterMouseOver(event:"+JSON.stringify(n.detail)+")")}function qe(n){console.log("Maps:onChapterMouseLeave(event:"+JSON.stringify(n.detail)+")")}function _e(n){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[[[n.nwLng,n.nwLat],[n.seLng,n.nwLat],[n.seLng,n.seLat],[n.nwLng,n.seLat],[n.nwLng,n.nwLat]]],type:"Polygon"}}]}}function yr(n,t,i){function e(a){if(console.log(`Maps:onEraClick(event:${JSON.stringify(a.detail)})`),console.log(`Maps:onEraClick(era.extent:${JSON.stringify(U.eras[a.detail.id].extent)})`),i(1,o=a.detail.id),U.eras[a.detail.id].extent){const p=_e(U.eras[a.detail.id].extent);var l=Je().projection(d);const g=l.bounds(p),[[_,S],[y,m]]=g;sn(r).transition().duration(3e3).ease(We).call(u.transform,Jt.translate(dt/2,mt/2).scale(.9/Math.max((y-_)/dt,(m-S)/mt)).translate(-(_+y)/2,-(S+m)/2))}}let r,u,o=U.intialView;u=nr().on("zoom",f),Ft();function f(a){const{transform:l}=a;sn(r).attr("transform",l)}const d=Bi().rotate([74,0]).fitSize([dt,mt],_e(U.eras[U.intialView].extent));console.log(JSON.stringify());function c(a){vt[a?"unshift":"push"](()=>{r=a,i(0,r)})}return[r,o,d,Ae,qe,e,c]}class Mr extends it{constructor(t){super(),rt(this,t,yr,_r,et,{onChapterMouseOver:3,onChapterMouseLeave:4,onEraClick:5})}get onChapterMouseOver(){return Ae}get onChapterMouseLeave(){return qe}get onEraClick(){return this.$$.ctx[5]}}function Sr(n){let t,i,e,r,u,o;t=new Ze({});let f={};e=new Mr({props:f}),n[8](e),e.$on("featureMouseOver",n[2]),e.$on("featureMouseOut",n[3]),e.$on("featureClick",n[6]);let d={};return u=new Ue({props:d}),n[9](u),u.$on("chapterMouseOver",n[4]),u.$on("chapterMouseLeave",n[5]),u.$on("eraClick",n[7]),{c(){Tn(t.$$.fragment),i=Vt(),Tn(e.$$.fragment),r=Vt(),Tn(u.$$.fragment)},l(c){Rn(t.$$.fragment,c),i=Xt(c),Rn(e.$$.fragment,c),r=Xt(c),Rn(u.$$.fragment,c)},m(c,a){In(t,c,a),un(c,i,a),In(e,c,a),un(c,r,a),In(u,c,a),o=!0},p(c,[a]){const l={};e.$set(l);const p={};u.$set(p)},i(c){o||(fn(t.$$.fragment,c),fn(e.$$.fragment,c),fn(u.$$.fragment,c),o=!0)},o(c){gn(t.$$.fragment,c),gn(e.$$.fragment,c),gn(u.$$.fragment,c),o=!1},d(c){c&&(W(i),W(r)),Dn(t,c),n[8](null),Dn(e,c),n[9](null),Dn(u,c)}}}function Er(n,t,i){let e,r;function u(g){console.log("routes/map:onFeatureMouseOver(event.detail:"+JSON.stringify(g.detail)+")"),e.onMapFeatureMouseOver(g)}function o(g){console.log("routes/map:onMapFeatureMouseOut(event.detail:"+JSON.stringify(g.detail)+")"),e.onMapFeatureMouseOut(g)}function f(g){console.log("routes/map:onChapterMouseOver(event.detail:"+JSON.stringify(g.detail)+")"),r.onChapterMouseOver(g)}function d(g){console.log("routes/map:onChapterMouseLeave(event.detail:"+JSON.stringify(g.detail)+")"),r.onChapterMouseLeave(g)}function c(g){console.log("routes/map:onFeatureClick(event.detail:"+JSON.stringify(g.detail)+")"),e.onMapFeatureClick(g)}function a(g){console.log(`routes/map:onEraClick(event.detail:${JSON.stringify(g.detail)})`),r.onEraClick(g)}function l(g){vt[g?"unshift":"push"](()=>{r=g,i(1,r)})}function p(g){vt[g?"unshift":"push"](()=>{e=g,i(0,e)})}return[e,r,u,o,f,d,c,a,l,p]}class Or extends it{constructor(t){super(),rt(this,t,Er,Sr,et,{})}}export{Or as component};
